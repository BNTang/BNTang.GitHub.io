{"title":"关于关闭自动装配","date":"2023-01-06T02:10:55.000Z","date_formatted":{"ll":"Jan 6, 2023","L":"01/06/2023","MM-DD":"01-06"},"link":"2023/01/06/Java/框架/Spring/01-关于关闭自动装配","tags":["Spring"],"updated":"2023-01-06T02:16:40.299Z","content":"<p>在我们平时引入第三方自定义的 starter 里面会包含一些自动装配配置，而我们这个时候并没有给定对应的数据库或者数据源的信息，这个时候我们启动项目是不行的，这个时候就需要关闭一下自动装配，等我们想用到对应的数据源的时候在配置好。所以我们需要在 application.yml 里添加配置来关闭数据库自动装配, 关闭的条件是需要自动他们自动装配的类名然后添加到 <code>exclude</code> 列表即可：</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs yaml\"><span class=\"hljs-attr\">spring:</span><br>  <span class=\"hljs-attr\">autoconfigure:</span><br>    <span class=\"hljs-attr\">exclude:</span> <span class=\"hljs-string\">com.baomidou.dynamic.datasource.spring.boot.autoconfigure.DynamicDataSourceAutoConfiguration</span><br></code></pre></td></tr></table></figure>\n<p>否则模块在启动的时候将抛出异常。记得在要使用的时候记得去除，否则你会一脸懵的以为自己配置好了数据源还是不能用。</p>\n<p>当然还有第二种排除的方式如下：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@SpringBootApplication(exclude = DynamicDataSourceAutoConfiguration.class)</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">BNTangServerHelloApplication</span> &#123;<br><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">main</span><span class=\"hljs-params\">(String[] args)</span> &#123;<br>        SpringApplication.run(BNTangServerHelloApplication.class, args);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>","prev":{"title":"请描述下 Java 中类的加载过程","link":"2023/01/31/面试题/JVM/01-请描述下 Java 中类的加载过程"},"next":{"title":"RBAC表结构设计","link":"2023/01/03/RBAC/01-表结构设计"},"plink":"http://example.com/2023/01/06/Java/框架/Spring/01-关于关闭自动装配/","reading_time":"260 words in 2 min"}