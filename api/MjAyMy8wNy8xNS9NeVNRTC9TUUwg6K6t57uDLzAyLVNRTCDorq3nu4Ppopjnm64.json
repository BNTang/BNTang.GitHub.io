{"title":"SQL 训练题目","date":"2023-07-14T17:45:50.000Z","date_formatted":{"ll":"Jul 15, 2023","L":"07/15/2023","MM-DD":"07-15"},"link":"2023/07/15/MySQL/SQL 训练/02-SQL 训练题目","tags":["SQL 训练"],"updated":"2023-07-16T12:31:29.981Z","content":"<h1 id=\"一.-查询-&quot;01&quot;-课程比-&quot;02&quot;-课程成绩高的学生的信息及课程分数\">一. 查询 “01” 课程比 “02” 课程成绩高的学生的信息及课程分数<a title=\"#一.-查询-&quot;01&quot;-课程比-&quot;02&quot;-课程成绩高的学生的信息及课程分数\" href=\"#一.-查询-&quot;01&quot;-课程比-&quot;02&quot;-课程成绩高的学生的信息及课程分数\"></a></h1>\n<p>解题思路：要查询的是两个课程的成绩，而且还要显示学生的信息。所以需要用到两张表，SC，Student 这两张表。<br>\n问题拆分：</p>\n<ol>\n<li>怎么查找两个课程的成绩呢？</li>\n<li>如何把课程表和学员信息表连接起来呢？</li>\n</ol>\n<p>那么用到哪些知识呢？</p>\n<ol>\n<li>子查询</li>\n<li>join</li>\n</ol>\n<p>语句实现：先找到两门课的成绩</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-comment\">-- 课程1的成绩</span><br><span class=\"hljs-keyword\">SELECT</span><br>\tsid,<br>\tscore <span class=\"hljs-keyword\">AS</span> class1 <br><span class=\"hljs-keyword\">FROM</span><br>\tsc <br><span class=\"hljs-keyword\">WHERE</span><br>\tsc.cid <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;01&#x27;</span>;<br><span class=\"hljs-comment\">-- 课程2的成绩</span><br><span class=\"hljs-keyword\">SELECT</span><br>\tsid,<br>\tscore <span class=\"hljs-keyword\">AS</span> class2 <br><span class=\"hljs-keyword\">FROM</span><br>\tsc <br><span class=\"hljs-keyword\">WHERE</span><br>\tsc.cid <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;02&#x27;</span>;<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230716203023122-475467406.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>两个子查询结束了以后，下一步就是使用 join 把这两个查询的结果连接起来：</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">SELECT</span><br>\t<span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span><br>\tStudent<br>\t<span class=\"hljs-keyword\">RIGHT</span> <span class=\"hljs-keyword\">JOIN</span> (<br>\t<span class=\"hljs-keyword\">SELECT</span><br>\t\tt1.sid,<br>\t\tclass1,<br>\t\tclass2 <br>\t<span class=\"hljs-keyword\">FROM</span><br>\t\t( <span class=\"hljs-keyword\">SELECT</span> sid, score <span class=\"hljs-keyword\">AS</span> class1 <span class=\"hljs-keyword\">FROM</span> sc <span class=\"hljs-keyword\">WHERE</span> sc.cid <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;01&#x27;</span> ) t1,<br>\t\t( <span class=\"hljs-keyword\">SELECT</span> sid, score <span class=\"hljs-keyword\">AS</span> class2 <span class=\"hljs-keyword\">FROM</span> sc <span class=\"hljs-keyword\">WHERE</span> sc.cid <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;02&#x27;</span> ) t2 <br>\t<span class=\"hljs-keyword\">WHERE</span><br>\t\tt1.sid <span class=\"hljs-operator\">=</span> t2.sid <br>\t<span class=\"hljs-keyword\">AND</span> t1.class1 <span class=\"hljs-operator\">&gt;</span> t2.class2 <br>\t) r <span class=\"hljs-keyword\">ON</span> Student.sid <span class=\"hljs-operator\">=</span> r.sid;<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230716203049450-1567056809.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<h1 id=\"二.-查询存在-&quot;01&quot;-课程但可能不存在-&quot;02&quot;-课程的情况(不存在时显示为-null)\">二. 查询存在 “01” 课程但可能不存在 “02” 课程的情况(不存在时显示为 null)<a title=\"#二.-查询存在-&quot;01&quot;-课程但可能不存在-&quot;02&quot;-课程的情况(不存在时显示为-null)\" href=\"#二.-查询存在-&quot;01&quot;-课程但可能不存在-&quot;02&quot;-课程的情况(不存在时显示为-null)\"></a></h1>\n<p>思路：首先要查询所有的学生的选课情况，然后找到选择课程 01 和选择课程 02 的学生<br>\n解决方法：使用 join<br>\n选择两个分别选择课程 01 和课程 02 的学员表，然后把这两个表 join 起来</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">SELECT</span><br>\t<span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span><br>\t( <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> sc <span class=\"hljs-keyword\">WHERE</span> sc.cid <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;01&#x27;</span> ) t1<br>\t<span class=\"hljs-keyword\">LEFT</span> <span class=\"hljs-keyword\">JOIN</span> ( <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> sc <span class=\"hljs-keyword\">WHERE</span> sc.cid <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;02&#x27;</span> ) t2 <span class=\"hljs-keyword\">ON</span> t1.sid <span class=\"hljs-operator\">=</span> t2.sid;<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230716203106817-485233412.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<h1 id=\"三.-查询同时存在-01-和-02-课程的情况\">三. 查询同时存在 01 和 02 课程的情况<a title=\"#三.-查询同时存在-01-和-02-课程的情况\" href=\"#三.-查询同时存在-01-和-02-课程的情况\"></a></h1>\n<p>思路：要求同时选择了 01 和 02 课程的情况，则需要使用 where 链接起来，这一题和上一题相比就是多了一个去除选了 01 但是没有选择 02 课程的这一部分<br>\n知识点：子查询，where语句</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">SELECT</span><br>\t<span class=\"hljs-operator\">*</span> <br><span class=\"hljs-keyword\">FROM</span><br>\t( <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> sc <span class=\"hljs-keyword\">WHERE</span> sc.cid <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;01&#x27;</span> ) t1,<br>\t( <span class=\"hljs-keyword\">SELECT</span> <span class=\"hljs-operator\">*</span> <span class=\"hljs-keyword\">FROM</span> sc <span class=\"hljs-keyword\">WHERE</span> sc.cid <span class=\"hljs-operator\">=</span> <span class=\"hljs-string\">&#x27;02&#x27;</span> ) t2 <br><span class=\"hljs-keyword\">WHERE</span><br>\tt1.sid <span class=\"hljs-operator\">=</span> t2.sid;<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230716203120881-1650539811.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"MySQL 中使用变量实现排名名次","link":"2023/07/16/MySQL/SQL 高级查询/01-MySQL 中使用变量实现排名名次"},"next":{"title":"建表与数据准备","link":"2023/07/15/MySQL/SQL 训练/01-建表与数据准备"},"plink":"http://example.com/2023/07/15/MySQL/SQL 训练/02-SQL 训练题目/","toc":[{"id":"一.-查询-\"01\"-课程比-\"02\"-课程成绩高的学生的信息及课程分数","title":"一. 查询 “01” 课程比 “02” 课程成绩高的学生的信息及课程分数","index":"1"},{"id":"二.-查询存在-\"01\"-课程但可能不存在-\"02\"-课程的情况(不存在时显示为-null)","title":"二. 查询存在 “01” 课程但可能不存在 “02” 课程的情况(不存在时显示为 null)","index":"2"},{"id":"三.-查询同时存在-01-和-02-课程的情况","title":"三. 查询同时存在 01 和 02 课程的情况","index":"3"}],"reading_time":"569 words in 4 min"}