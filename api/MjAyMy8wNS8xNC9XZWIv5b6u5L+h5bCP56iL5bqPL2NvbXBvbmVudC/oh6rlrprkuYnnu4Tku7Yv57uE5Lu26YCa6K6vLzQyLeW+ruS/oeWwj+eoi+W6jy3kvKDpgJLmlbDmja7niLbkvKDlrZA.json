{"title":"微信小程序-传递数据父传子","date":"2023-05-14T04:16:59.000Z","date_formatted":{"ll":"May 14, 2023","L":"05/14/2023","MM-DD":"05-14"},"link":"2023/05/14/Web/微信小程序/component/自定义组件/组件通讯/42-微信小程序-传递数据父传子","tags":["微信小程序"],"updated":"2023-05-14T07:29:30.706Z","content":"<p>在我们自定义组件当中，有时候组件的内容也许的通过 JS 文件里面的 data 数据进行展示的，我们先简单的来搭建一下这个结构：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs wxml\">&lt;!-- <br>c-example.wxml<br> --&gt;<br>&lt;view class=&quot;container&quot;&gt;<br>  &lt;view&gt;&#123;&#123;title&#125;&#125;&lt;/view&gt;<br>  &lt;view&gt;&#123;&#123;msg&#125;&#125;&lt;/view&gt;<br>&lt;/view&gt;<br></code></pre></td></tr></table></figure>\n<p>然后是我们的 JS 文件：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-comment\">// c-example.js</span><br><span class=\"hljs-title class_\">Component</span>(&#123;<br>  <span class=\"hljs-attr\">data</span>: &#123;<br>    <span class=\"hljs-attr\">title</span>: <span class=\"hljs-string\">&#x27;BNTang&#x27;</span>,<br>    <span class=\"hljs-attr\">msg</span>: <span class=\"hljs-string\">&#x27;hello world&#x27;</span><br>  &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure>\n<p>这个时候我们去首页页面，多复制几个出来：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs wxml\">&lt;!-- <br>index.wxml<br> --&gt;<br>&lt;myExample/&gt;<br>&lt;myExample/&gt;<br>&lt;myExample/&gt;<br>&lt;myExample/&gt;<br>&lt;myExample/&gt;<br></code></pre></td></tr></table></figure>\n<p>总共是 5 个，这个时候我有个需求，想让 title 和 msg 分别展示不同的内容，就是说每一个的 myExample 组件的 title 与 msg 内容都是不一样的，这个时候该如何进行实现呢，可能大家也有点思路了，我们将我们不一样的 title 与 msg 的内容告诉 myExample 不就行了吗，雀实是这样子的，那么该如何告诉它呢，这个时候就有了我们的组件传递数据这么个知识点的介绍了，这里介绍的是<code>父传子</code>：</p>\n<p>官方文档：<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/\" target=\"_blank\">https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/</a></p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230514152139662-1740874724.png\" alt=\"image-20230514152138664\" loading=\"lazy\" class=\"φbp\"></p>\n<p>好，看了官方文档的介绍之后我们直接改造下我们的自定义组件的JS文件定义两个属性用于外部传入：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-comment\">// c-example.js</span><br><span class=\"hljs-title class_\">Component</span>(&#123;<br>  <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">   * 组件的属性列表</span><br><span class=\"hljs-comment\">   */</span><br>  <span class=\"hljs-attr\">properties</span>: &#123;<br>    <span class=\"hljs-attr\">headTitle</span>: &#123;<br>      <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">String</span>,<br>      <span class=\"hljs-attr\">value</span>: <span class=\"hljs-string\">&#x27;default headTitle value&#x27;</span>,<br>    &#125;,<br>    <span class=\"hljs-attr\">context</span>: &#123;<br>      <span class=\"hljs-attr\">type</span>: <span class=\"hljs-title class_\">String</span>,<br>      <span class=\"hljs-attr\">value</span>: <span class=\"hljs-string\">&#x27;default context value&#x27;</span>,<br>    &#125;,<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>\n<p>在更改我们页面的显示代码：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs wxml\">&lt;!-- <br>c-example.wxml<br> --&gt;<br>&lt;view class=&quot;container&quot;&gt;<br>  &lt;view&gt;&#123;&#123;headTitle&#125;&#125;&lt;/view&gt;<br>  &lt;view&gt;&#123;&#123;context&#125;&#125;&lt;/view&gt;<br>&lt;/view&gt;<br></code></pre></td></tr></table></figure>\n<p>更改我们首页使用 c-example 的代码传入需要显示的数据：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs wxml\">&lt;!-- <br>index.wxml<br> --&gt;<br>&lt;myExample headTitle=&quot;BNTang1&quot; context=&quot;BNTnag 1 context&quot;/&gt;<br>&lt;myExample headTitle=&quot;BNTang2&quot; context=&quot;BNTnag 2 context&quot;/&gt;<br>&lt;myExample headTitle=&quot;BNTang3&quot; context=&quot;BNTnag 3 context&quot;/&gt;<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230514152644820-410607261.png\" alt=\"image-20230514152644110\" loading=\"lazy\" class=\"φbp\"></p>\n<p>过程分析：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230514152726505-299916933.png\" alt=\"image-20230514152725774\" loading=\"lazy\" class=\"φbp\"></p>\n<h1 id=\"总结\">总结<a title=\"#总结\" href=\"#总结\"></a></h1>\n<ul>\n<li>如何给组件传递数据：通过组件的 <code>properties</code> 属性</li>\n<li>properties 支持的数据类型，String/Number/Boolean/Object/Array/null(不限制类型)</li>\n</ul>\n","prev":{"title":"微信小程序-传递数据子传父","link":"2023/05/14/Web/微信小程序/component/自定义组件/组件通讯/43-微信小程序-传递数据子传父"},"next":{"title":"微信小程序-自定义组件外部样式","link":"2023/05/14/Web/微信小程序/component/自定义组件/41-微信小程序-自定义组件外部样式"},"plink":"http://example.com/2023/05/14/Web/微信小程序/component/自定义组件/组件通讯/42-微信小程序-传递数据父传子/","toc":[{"id":"总结","title":"总结","index":"1"}],"reading_time":"540 words in 4 min"}