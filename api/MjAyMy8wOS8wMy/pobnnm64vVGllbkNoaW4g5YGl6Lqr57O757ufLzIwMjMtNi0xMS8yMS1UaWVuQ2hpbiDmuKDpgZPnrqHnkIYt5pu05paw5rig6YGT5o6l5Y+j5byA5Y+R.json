{"title":"TienChin 渠道管理-更新渠道接口开发","date":"2023-09-03T14:19:24.000Z","date_formatted":{"ll":"Sep 3, 2023","L":"09/03/2023","MM-DD":"09-03"},"link":"2023/09/03/项目/TienChin 健身系统/2023-6-11/21-TienChin 渠道管理-更新渠道接口开发","tags":["项目"],"updated":"2023-09-17T15:14:14.402Z","content":"<h1 id=\"channelcontroller\">ChannelController<a title=\"#channelcontroller\" href=\"#channelcontroller\"></a></h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 修改渠道</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@PreAuthorize(&quot;hasPermission(&#x27;tienchin:channel:edit&#x27;)&quot;)</span><br><span class=\"hljs-meta\">@Log(title = &quot;渠道管理&quot;, businessType = BusinessType.UPDATE)</span><br><span class=\"hljs-meta\">@PutMapping</span><br>AjaxResult <span class=\"hljs-title function_\">edit</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Validated</span> <span class=\"hljs-meta\">@RequestBody</span> ChannelVO channelVO)</span> &#123;<br>    <span class=\"hljs-keyword\">return</span> AjaxResult.success(iChannelService.updateChannel(channelVO) &gt; <span class=\"hljs-number\">0</span> ? <span class=\"hljs-string\">&quot;更新成功&quot;</span> : <span class=\"hljs-string\">&quot;更新失败&quot;</span>);<br>&#125;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 根据渠道ID查询一个具体的渠道信息</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> channelId 渠道ID</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@return</span> &#123;<span class=\"hljs-doctag\">@link</span> AjaxResult&#125;</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@PreAuthorize(&quot;hasPermission(&#x27;tienchin:channel:list&#x27;)&quot;)</span><br><span class=\"hljs-meta\">@GetMapping(&quot;/&#123;channelId&#125;&quot;)</span><br>AjaxResult <span class=\"hljs-title function_\">selectChannelList</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@PathVariable</span> Long channelId)</span> &#123;<br>    <span class=\"hljs-keyword\">return</span> AjaxResult.success(iChannelService.getById(channelId));<br>&#125;<br></code></pre></td></tr></table></figure>\n<h1 id=\"ichannelservice\">IChannelService<a title=\"#ichannelservice\" href=\"#ichannelservice\"></a></h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 修改渠道</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> channelVO 渠道信息</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@return</span> int &#123;<span class=\"hljs-doctag\">@code</span> 0&#125; 失败 &#123;<span class=\"hljs-doctag\">@code</span> 1&#125; 成功</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023/09/02 12:11:42</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">updateChannel</span><span class=\"hljs-params\">(ChannelVO channelVO)</span>;<br></code></pre></td></tr></table></figure>\n<h1 id=\"channelserviceimpl\">ChannelServiceImpl<a title=\"#channelserviceimpl\" href=\"#channelserviceimpl\"></a></h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">updateChannel</span><span class=\"hljs-params\">(ChannelVO channelVO)</span> &#123;<br>    <span class=\"hljs-type\">Channel</span> <span class=\"hljs-variable\">channel</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Channel</span>();<br>    BeanUtils.copyProperties(channelVO, channel);<br>    channel.setUpdateBy(SecurityUtils.getUsername());<br>    channel.setUpdateTime(LocalDateTime.now());<br><br>    <span class=\"hljs-comment\">// 防止前端修改的属性</span><br>    channel.setCreateTime(<span class=\"hljs-literal\">null</span>);<br>    channel.setCreateBy(<span class=\"hljs-literal\">null</span>);<br>    channel.setDelFlag(<span class=\"hljs-literal\">null</span>);<br><br>    <span class=\"hljs-keyword\">return</span> updateById(channel) ? <span class=\"hljs-number\">1</span> : <span class=\"hljs-number\">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>","prev":{"title":"TienChin 渠道管理-更新渠道","link":"2023/09/03/项目/TienChin 健身系统/2023-6-11/22-TienChin 渠道管理-更新渠道"},"next":{"title":"TienChin 渠道管理-添加渠道页面开发","link":"2023/09/03/项目/TienChin 健身系统/2023-6-11/20-TienChin 渠道管理-添加渠道页面开发"},"plink":"http://example.com/2023/09/03/项目/TienChin 健身系统/2023-6-11/21-TienChin 渠道管理-更新渠道接口开发/","toc":[{"id":"channelcontroller","title":"ChannelController","index":"1"},{"id":"ichannelservice","title":"IChannelService","index":"2"},{"id":"channelserviceimpl","title":"ChannelServiceImpl","index":"3"}],"reading_time":"207 words in 1 min"}