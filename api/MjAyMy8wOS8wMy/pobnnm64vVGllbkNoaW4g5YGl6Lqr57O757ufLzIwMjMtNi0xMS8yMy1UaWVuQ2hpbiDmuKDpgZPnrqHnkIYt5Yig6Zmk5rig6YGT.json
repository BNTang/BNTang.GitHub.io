{"title":"TienChin 渠道管理-删除渠道","date":"2023-09-03T14:59:50.000Z","date_formatted":{"ll":"Sep 3, 2023","L":"09/03/2023","MM-DD":"09-03"},"link":"2023/09/03/项目/TienChin 健身系统/2023-6-11/23-TienChin 渠道管理-删除渠道","tags":["项目"],"updated":"2023-09-17T15:22:35.368Z","content":"<p>更改一下菜单权限，将删除渠道的 delete 改为 remove：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202309/2105804-20230903230246921-2086157489.png\" alt=\"image-20230903230246511\" loading=\"lazy\" class=\"φbp\"></p>\n<h1 id=\"channelcontroller.java\">ChannelController.java<a title=\"#channelcontroller.java\" href=\"#channelcontroller.java\"></a></h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@PreAuthorize(&quot;hasPermission(&#x27;tienchin:channel:remove&#x27;)&quot;)</span><br><span class=\"hljs-meta\">@Log(title = &quot;渠道管理&quot;, businessType = BusinessType.DELETE)</span><br><span class=\"hljs-meta\">@DeleteMapping(&quot;/&#123;channelIds&#125;&quot;)</span><br>AjaxResult <span class=\"hljs-title function_\">remove</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@PathVariable</span> Object[] channelIds)</span> &#123;<br>    <span class=\"hljs-keyword\">return</span> toAjax(iChannelService.deleteChannelByIds(channelIds));<br>&#125;<br></code></pre></td></tr></table></figure>\n<h1 id=\"ichannelservice.java\">IChannelService.java<a title=\"#ichannelservice.java\" href=\"#ichannelservice.java\"></a></h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 删除渠道</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> channelIds 渠道ID</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@return</span> int &#123;<span class=\"hljs-doctag\">@code</span> 0&#125; 失败 &#123;<span class=\"hljs-doctag\">@code</span> 1&#125; 成功</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023/09/03 10:48:51</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">deleteChannelByIds</span><span class=\"hljs-params\">(Object[] channelIds)</span>;<br></code></pre></td></tr></table></figure>\n<h1 id=\"channelserviceimpl.java\">ChannelServiceImpl.java<a title=\"#channelserviceimpl.java\" href=\"#channelserviceimpl.java\"></a></h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">deleteChannelByIds</span><span class=\"hljs-params\">(Object[] channelIds)</span> &#123;<br>    UpdateWrapper&lt;Channel&gt; channelQueryWrapper = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">UpdateWrapper</span>&lt;&gt;();<br>    channelQueryWrapper.lambda()<br>            .set(Channel::getDelFlag, <span class=\"hljs-string\">&quot;2&quot;</span>)<br>            .in(Channel::getChannelId, channelIds);<br><br>    <span class=\"hljs-keyword\">return</span> update(channelQueryWrapper) ? <span class=\"hljs-number\">1</span> : <span class=\"hljs-number\">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>","prev":{"title":"TienChin 渠道管理-渠道搜索","link":"2023/09/03/项目/TienChin 健身系统/2023-6-11/24-TienChin 渠道管理-渠道搜索"},"next":{"title":"TienChin 渠道管理-更新渠道","link":"2023/09/03/项目/TienChin 健身系统/2023-6-11/22-TienChin 渠道管理-更新渠道"},"plink":"http://example.com/2023/09/03/项目/TienChin 健身系统/2023-6-11/23-TienChin 渠道管理-删除渠道/","toc":[{"id":"channelcontroller.java","title":"ChannelController.java","index":"1"},{"id":"ichannelservice.java","title":"IChannelService.java","index":"2"},{"id":"channelserviceimpl.java","title":"ChannelServiceImpl.java","index":"3"}],"reading_time":"145 words in 1 min"}