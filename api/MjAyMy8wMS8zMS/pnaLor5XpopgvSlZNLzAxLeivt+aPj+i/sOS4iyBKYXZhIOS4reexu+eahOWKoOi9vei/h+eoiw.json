{"title":"请描述下 Java 中类的加载过程","date":"2023-01-31T02:10:43.000Z","date_formatted":{"ll":"Jan 31, 2023","L":"01/31/2023","MM-DD":"01-31"},"link":"2023/01/31/面试题/JVM/01-请描述下 Java 中类的加载过程","tags":["面试题"],"updated":"2023-02-12T14:40:22.650Z","content":"<p>调用 Java.exe 时, 需要把类给加载到 JVM 中，使用类加载器进行加载</p>\n<h1 id=\"编译到加载整体流程\">编译到加载整体流程<a title=\"#编译到加载整体流程\" href=\"#编译到加载整体流程\"></a></h1>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202301/2105804-20230131101200058-1174514852.png\" alt=\"image-20230131101158160\" loading=\"lazy\" class=\"φbp\"></p>\n<h1 id=\"类加载过程\">类加载过程<a title=\"#类加载过程\" href=\"#类加载过程\"></a></h1>\n<p>在硬盘上查找并通过 IO 读入字节码文件, 加载到 JVM 内存的方法区当中</p>\n<p>?&gt; 方法区中存放的哪些信息</p>\n<ul>\n<li>方法区中的内容: 类被加载到方法区中后主要包含, 运行时常量池、类型信息、字段信息、方法信息、类加载器的引用、对应 class 实例的引用等信息</li>\n<li>类加载器的引用: 类加载器属于是一个实例对象, 存放在堆中, 在方法区中指向类加载器的地址</li>\n<li>class 实例的引用: 类加载器在加载类信息放到方法区中后，这些字节码信息加在一起, 有共同的特征和行为,  会创建一个对应的 Class 类型的实例对象存放到堆中</li>\n</ul>\n<h1 id=\"验证\">验证<a title=\"#验证\" href=\"#验证\"></a></h1>\n<ul>\n<li>校验字节码文件的正确性</li>\n<li>编译的字节码, 有可能被修改, 在加载之前要验证字节码的正确性</li>\n</ul>\n<h1 id=\"准备\">准备<a title=\"#准备\" href=\"#准备\"></a></h1>\n<ul>\n<li>给类的静态变量分配内存，并赋予默认值</li>\n<li>静态变量是在类加载的时候就被执行的</li>\n</ul>\n<h1 id=\"解析\">解析<a title=\"#解析\" href=\"#解析\"></a></h1>\n<ul>\n<li>将符号引用替换为直接引用，该阶段会把一些静态方法替换为指向数据所存内存的指针或句柄等(直接引用)，这个过程也称为是静态链接</li>\n<li>静态链接过程(类加载期间完成)</li>\n<li>动态链接是在程序运行期间完成的将符号引用替换为直接引用</li>\n</ul>\n<h1 id=\"初始化\">初始化<a title=\"#初始化\" href=\"#初始化\"></a></h1>\n<ul>\n<li>对类的静态变量初始化为指定的值，执行静态代码块</li>\n</ul>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202301/2105804-20230131102625273-1851307425.png\" alt=\"image-20230131102623591\" loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"JVM当中有哪些类加载器, 他们分别加载哪些内容","link":"2023/01/31/面试题/JVM/02-JVM当中有哪些类加载器, 他们分别加载哪些内容"},"next":{"title":"关于关闭自动装配","link":"2023/01/06/Java/框架/Spring/01-关于关闭自动装配"},"plink":"http://example.com/2023/01/31/面试题/JVM/01-请描述下 Java 中类的加载过程/","toc":[{"id":"编译到加载整体流程","title":"编译到加载整体流程","index":"1"},{"id":"类加载过程","title":"类加载过程","index":"2"},{"id":"验证","title":"验证","index":"3"},{"id":"准备","title":"准备","index":"4"},{"id":"解析","title":"解析","index":"5"},{"id":"初始化","title":"初始化","index":"6"}],"reading_time":"465 words in 3 min"}