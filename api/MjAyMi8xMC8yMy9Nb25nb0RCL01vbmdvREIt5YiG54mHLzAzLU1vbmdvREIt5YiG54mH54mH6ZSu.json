{"title":"MongoDB-分片片键","date":"2022-10-23T03:19:48.000Z","date_formatted":{"ll":"Oct 23, 2022","L":"10/23/2022","MM-DD":"10-23"},"link":"2022/10/23/MongoDB/MongoDB-分片/03-MongoDB-分片片键","tags":["MongoDB"],"updated":"2022-10-23T03:24:49.851Z","content":"<p>?&gt; 那么紧接着上一篇的文章内容，如何将数据存储到不同的分片服务器上的? 答：通过分片片键</p>\n<h1 id=\"什么是分片片键\">什么是分片片键<a title=\"#什么是分片片键\" href=\"#什么是分片片键\"></a></h1>\n<ul>\n<li>可以将文档的一个或多个字设置成分片片键</li>\n<li>设置完分片片键后, MongoDB 会自动对字段可能的取值进行划分, 划分出一个个的数据段</li>\n<li>划分完数据段之后, MongoDB 会自动决定哪些分片服务器保存哪些数据段对应的数据</li>\n</ul>\n<p>例如：<code>&#123;name:'BNTang', age: 33&#125;</code></p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs text\">  age:min    20     40     60     80    age:max<br>     |-------|------|------|------|------|<br><br> 分片服务器1      分片服务器2       分片服务器3<br>|-----------|    |-----------|     |-----------|<br>|   min-20  |    |   80-max  |     |   40-60   |<br>|   20-40   |    |   60-80   |     |           |<br>|-----------|    |-----------|     |-----------|<br></code></pre></td></tr></table></figure>\n<p>!&gt; 注意点：</p>\n<ul>\n<li>片键可以是一个字段也可以是多个字段</li>\n<li>只有索引字段才能设置为片键</li>\n<li>分片服务器保存哪些数据段的值是随机的, 并不是连续的</li>\n<li>数据段的划分可以使用片键的取值, 也可以使用片键取值的哈希值</li>\n</ul>\n","prev":{"title":"MongoDB-片键选择技巧","link":"2022/10/23/MongoDB/MongoDB-分片/04-MongoDB-片键选择技巧"},"next":{"title":"MongoDB-分片结构","link":"2022/10/23/MongoDB/MongoDB-分片/02-MongoDB-分片结构"},"plink":"http://example.com/2022/10/23/MongoDB/MongoDB-分片/03-MongoDB-分片片键/","toc":[{"id":"什么是分片片键","title":"什么是分片片键","index":"1"}],"reading_time":"266 words in 2 min"}