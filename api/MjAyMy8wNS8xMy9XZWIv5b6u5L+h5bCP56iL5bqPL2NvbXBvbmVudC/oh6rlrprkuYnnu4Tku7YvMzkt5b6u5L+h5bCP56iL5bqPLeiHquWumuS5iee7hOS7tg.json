{"title":"微信小程序-自定义组件","date":"2023-05-13T03:18:56.000Z","date_formatted":{"ll":"May 13, 2023","L":"05/13/2023","MM-DD":"05-13"},"link":"2023/05/13/Web/微信小程序/component/自定义组件/39-微信小程序-自定义组件","tags":["微信小程序"],"updated":"2023-05-13T05:22:42.068Z","content":"<h1 id=\"什么是自定义组件\">什么是自定义组件<a title=\"#什么是自定义组件\" href=\"#什么是自定义组件\"></a></h1>\n<p>我们自己写的组件称之为自定义组件</p>\n<h1 id=\"为什么需要自定义组件\">为什么需要自定义组件<a title=\"#为什么需要自定义组件\" href=\"#为什么需要自定义组件\"></a></h1>\n<p>?&gt; 自定义组件可以方便我们后续代码的一个复用，提高代码的可维护性。</p>\n<p>首先我说一下为什么，然后我在利用一个栗子来演示一下我们如果不使用自定义组件带来的麻烦。</p>\n<p>我们去网易新闻官方网站进行查看，仔细观察一下，可以发现有的内容布局是不是有点类似呢如下图：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230513112512613-226229610.png\" alt=\"image-20230513112511831\" loading=\"lazy\" class=\"φbp\"></p>\n<p>好，这个时候我们去微信开发者工具当中编写一下这个简单的案例，先布局编写 wxml:</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs wxml\">&lt;view class=&quot;container&quot;&gt;<br>       &lt;view class=&quot;title&quot;&gt;我是标题&lt;/view&gt;<br>       &lt;view class=&quot;content&quot;&gt;我是内容&lt;/view&gt;<br>&lt;/view&gt;<br></code></pre></td></tr></table></figure>\n<p>在编写样式：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs wxss\">.container &#123;<br>  background: skyblue;<br>  padding: 20rpx;<br>  margin-bottom: 20rpx;<br>&#125;<br><br>.container .title &#123;<br>  color: #666;<br>&#125;<br><br>.container .content &#123;<br>  color: #f00;<br>  font-size: 12px;<br>&#125;<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230513112819072-994464122.png\" alt=\"image-20230513112818855\" loading=\"lazy\" class=\"φbp\"></p>\n<p>得到了如上图的效果，我们在 C+V 复制多个，发现我们已经实现了。好，这个时候呢，我是产品经理，我要加需求，我的要求，在原本的基础之上加一个发布时间，然后我接收到了需求之后，发现一个问题，我们的代码重复的太多了，如果要加的话，我们 C+V 了多少个那么就需要改多少个，发现不利于我们维护，代码的重复比较多，不利于复用。</p>\n<p>那么该如何自定义组件呢？</p>\n<h1 id=\"自定义组件\">自定义组件<a title=\"#自定义组件\" href=\"#自定义组件\"></a></h1>\n<p>新建 components 目录，在该目录下新建对应组件目录，右键 <code>新建 Component</code></p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230513115539875-158367527.png\" alt=\"image-20230513115539584\" loading=\"lazy\" class=\"φbp\"></p>\n<p>将我们之前的布局和样式代码移动到 c-test 当中，关于自定义组件我前面的文章已经介绍过，不懂的可以去翻阅一下：<a href=\"https://www.cnblogs.com/BNTang/p/17280237.html\" target=\"_blank\">https://www.cnblogs.com/BNTang/p/17280237.html</a></p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230513115639155-475540771.png\" alt=\"image-20230513115638968\" loading=\"lazy\" class=\"φbp\"></p>\n<p>我们在 index 当中引用 c-test, 好，这个时候我们产品经理又来了个需求，需要添加一个发布日期，我们这个时候再去应对这个需求就显得非常的简单，我们去更改 c-test 添加一个 view 来存放发布日期：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs wxml\">&lt;view class=&quot;container&quot;&gt;<br>       &lt;view class=&quot;title&quot;&gt;我是标题&lt;/view&gt;<br>       &lt;view class=&quot;content&quot;&gt;我是内容&lt;/view&gt;<br>       &lt;view class=&quot;time&quot;&gt;2023-05-13&lt;/view&gt;<br>&lt;/view&gt;<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230513115829611-398208224.png\" alt=\"image-20230513115829292\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"自定义组件注意点\">自定义组件注意点<a title=\"#自定义组件注意点\" href=\"#自定义组件注意点\"></a></h2>\n<p>!&gt; 组件配置文件中，<code>&quot;component&quot;: true,</code> 必须为 true</p>\n<p>!&gt; 组件中也可以使用其他组件</p>\n<p>!&gt; 组件名称不能为 wx-开头</p>\n<p>!&gt; 很多地方都要用到某个组件，我们可以在 app.json 中将它注册为全局组件</p>\n<p>注意点我演示一个挂载到全局即可，我们将 c-test 挂载到 app.json，然后在日志页面当中就也可以进行使用了，我这里不以其它页面举例，挂载到全局的组件名称叫做 <code>myCTest</code>，我们在原来的 index 页面使用下挂载到这个全局的组件：</p>\n<p>app.json:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\"><span class=\"hljs-punctuation\">&#123;</span><br>  <span class=\"hljs-attr\">&quot;usingComponents&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">&#123;</span><br>    <span class=\"hljs-attr\">&quot;myCTest&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;/components/c-test/c-test&quot;</span><br>  <span class=\"hljs-punctuation\">&#125;</span><br><span class=\"hljs-punctuation\">&#125;</span><br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230513132216715-1028958857.png\" alt=\"image-20230513132216235\" loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"HTML5","link":"2023/05/13/HTML5"},"next":{"title":"微信小程序-scrollview","link":"2023/05/07/Web/微信小程序/component/常用组件/38-微信小程序-scrollview"},"plink":"http://example.com/2023/05/13/Web/微信小程序/component/自定义组件/39-微信小程序-自定义组件/","toc":[{"id":"什么是自定义组件","title":"什么是自定义组件","index":"1"},{"id":"为什么需要自定义组件","title":"为什么需要自定义组件","index":"2"},{"id":"自定义组件","title":"自定义组件","index":"3","children":[{"id":"自定义组件注意点","title":"自定义组件注意点","index":"3.1"}]}],"reading_time":"836 words in 6 min"}