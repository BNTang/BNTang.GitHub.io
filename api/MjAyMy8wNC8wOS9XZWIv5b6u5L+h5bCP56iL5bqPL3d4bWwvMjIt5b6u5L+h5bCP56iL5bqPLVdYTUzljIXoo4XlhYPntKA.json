{"title":"微信小程序-WXML包装元素","date":"2023-04-09T04:15:48.000Z","date_formatted":{"ll":"Apr 9, 2023","L":"04/09/2023","MM-DD":"04-09"},"link":"2023/04/09/Web/微信小程序/wxml/22-微信小程序-WXML包装元素","tags":["微信小程序"],"updated":"2023-04-09T04:59:27.948Z","content":"<p>!&gt; <code>&lt;block/&gt;</code> 并不是一个组件，它仅仅是一个包装元素，不会在页面中做任何渲染，只接受控制属性，条件渲染默认只能控制被添加条件属性的那个组件，如果多个组件需要同时被控制，我们就可以使用 block，普通的组件上可能需要添加很多属性，如果再把条件渲染或者列表渲染同时添加到上面会导致我们代码的可读性很差。</p>\n<p>好了接下来先看一个示例，往 index.js 添加一个person属性数据：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-attr\">person</span>: &#123;<br>  <span class=\"hljs-attr\">name</span>: <span class=\"hljs-string\">&#x27;BNTang&#x27;</span>,<br>  <span class=\"hljs-attr\">age</span>: <span class=\"hljs-number\">21</span>,<br>  <span class=\"hljs-attr\">gender</span>: <span class=\"hljs-string\">&#x27;male&#x27;</span>,<br>  <span class=\"hljs-attr\">score</span>: <span class=\"hljs-number\">100</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<p>index.wxml:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span>&gt;</span>&#123;&#123;person.name&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span>&gt;</span>&#123;&#123;person.age&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span>&gt;</span>&#123;&#123;person.gender&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span>&gt;</span>&#123;&#123;person.score&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br></code></pre></td></tr></table></figure>\n<p>根据我如上提供的代码，我想要这些信息在分数为100分的时候我才显示这些数据，这个时候呢，我们的代码就改进为了如下:</p>\n<p>index.wxml:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">wx:if</span>=<span class=\"hljs-string\">&quot;&#123;&#123;person.score===100&#125;&#125;&quot;</span>&gt;</span>&#123;&#123;person.name&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">wx:if</span>=<span class=\"hljs-string\">&quot;&#123;&#123;person.score===100&#125;&#125;&quot;</span>&gt;</span>&#123;&#123;person.age&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">wx:if</span>=<span class=\"hljs-string\">&quot;&#123;&#123;person.score===100&#125;&#125;&quot;</span>&gt;</span>&#123;&#123;person.gender&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">wx:if</span>=<span class=\"hljs-string\">&quot;&#123;&#123;person.score===100&#125;&#125;&quot;</span>&gt;</span>&#123;&#123;person.score&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br></code></pre></td></tr></table></figure>\n<p>发现冗余代码太多了，我又进行改造，可以在最外层添加一个view来包裹一下，把条件渲染判断添加到包裹的view上即可，然后代码又进行了改造：</p>\n<p>index.wxml:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">wx:if</span>=<span class=\"hljs-string\">&quot;&#123;&#123;person.score===100&#125;&#125;&quot;</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span>&gt;</span>&#123;&#123;person.name&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span>&gt;</span>&#123;&#123;person.age&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span>&gt;</span>&#123;&#123;person.gender&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span>&gt;</span>&#123;&#123;person.score&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br></code></pre></td></tr></table></figure>\n<p>好了经过我们如上这么多的改造，我们先来看看渲染之后的结构代码，发现我们多渲染了一个包裹的view组件:</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202304/2105804-20230409123106121-1622121963.png\" alt=\"image-20230409123105771\" loading=\"lazy\" class=\"φbp\"></p>\n<p>那么我们来使用block来看看效果：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202304/2105804-20230409123017513-1397402.png\" alt=\"image-20230409123016887\" loading=\"lazy\" class=\"φbp\"></p>\n<p>block 就是一个包装元素，是不会进行实际的渲染组件内容的，然后我们将控制属性编写到block，关于元素的样式等类名属性编写到视图组件，这样就有利于我们的代码阅读性，例如如下代码：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;test&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;demo&quot;</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">block</span> <span class=\"hljs-attr\">wx:if</span>=<span class=\"hljs-string\">&quot;&#123;&#123;person.score===100&#125;&#125;&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span>&gt;</span>&#123;&#123;person.name&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span>&gt;</span>&#123;&#123;person.age&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span>&gt;</span>&#123;&#123;person.gender&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span>&gt;</span>&#123;&#123;person.score&#125;&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">block</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br></code></pre></td></tr></table></figure>","prev":{"title":"微信小程序-WXS的作用和使用","link":"2023/04/09/Web/微信小程序/wxs/23-微信小程序-WXS的作用和使用"},"next":{"title":"微信小程序-WXML列表渲染Key","link":"2023/04/09/Web/微信小程序/wxml/21-微信小程序-WXML列表渲染Key"},"plink":"http://example.com/2023/04/09/Web/微信小程序/wxml/22-微信小程序-WXML包装元素/","reading_time":"568 words in 4 min"}