{"title":"TienChin-课程管理-课程导出","date":"2023-09-24T15:17:14.000Z","date_formatted":{"ll":"Sep 24, 2023","L":"09/24/2023","MM-DD":"09-24"},"link":"2023/09/24/项目/TienChin 健身系统/2023-6-11/课程管理/52-TienChin-课程管理-课程导出","tags":["项目"],"updated":"2023-09-24T16:38:20.921Z","content":"<p>更改 Course.java:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 课程ID</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@TableId(value = &quot;course_id&quot;, type = IdType.AUTO)</span><br><span class=\"hljs-meta\">@NotNull(message = &quot;&#123;course.id.notnull&#125;&quot;)</span><br><span class=\"hljs-meta\">@Excel(name = &quot;课程编号&quot;)</span><br><span class=\"hljs-keyword\">private</span> Integer courseId;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 课程类型 1.舞蹈类 2.游泳类 3.拳击类</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotNull(message = &quot;&#123;course.type.notnull&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-meta\">@Excel(name = &quot;课程类型&quot;, readConverterExp = &quot;1=舞蹈类,2=游泳类,3=拳击类&quot;)</span><br><span class=\"hljs-keyword\">private</span> Integer type;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 课程名称</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotBlank(message = &quot;&#123;course.name.notnull&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-meta\">@Excel(name = &quot;课程名称&quot;)</span><br><span class=\"hljs-keyword\">private</span> String name;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 课程价格</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotNull(message = &quot;&#123;course.price.notnull&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-meta\">@Min(value = 0, message = &quot;&#123;course.price.invalid&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-meta\">@Excel(name = &quot;课程价格&quot;)</span><br><span class=\"hljs-keyword\">private</span> Double price;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 课程适用人群</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotNull(message = &quot;&#123;course.applyTo.notnull&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-meta\">@Excel(name = &quot;课程适用人群&quot;, readConverterExp = &quot;1=中小学生,2=上班族,3=小白用户,4=健身达人&quot;)</span><br><span class=\"hljs-keyword\">private</span> Integer applyTo;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 课程简介</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotBlank(message = &quot;&#123;course.info.notnull&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-meta\">@Excel(name = &quot;课程简介&quot;)</span><br><span class=\"hljs-keyword\">private</span> String info;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 创建时间</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@Excel(name = &quot;创建时间&quot;, dateFormat = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span><br><span class=\"hljs-keyword\">private</span> LocalDateTime createTime;<br></code></pre></td></tr></table></figure>\n<h1 id=\"coursecontroller.java\">CourseController.java<a title=\"#coursecontroller.java\" href=\"#coursecontroller.java\"></a></h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@PreAuthorize(&quot;hasPermission(&#x27;tienchin:course:export&#x27;)&quot;)</span><br><span class=\"hljs-meta\">@Log(title = &quot;课程管理&quot;, businessType = BusinessType.EXPORT)</span><br><span class=\"hljs-meta\">@PostMapping(&quot;/export&quot;)</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">export</span><span class=\"hljs-params\">(HttpServletResponse response, CourseVO courseVO)</span> &#123;<br>    List&lt;Course&gt; courseList = iCourseService.selectCourseList(courseVO);<br>    ExcelUtil&lt;Course&gt; util = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">ExcelUtil</span>&lt;&gt;(Course.class);<br>    util.exportExcel(response, courseList, <span class=\"hljs-string\">&quot;课程数据&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>\n<h1 id=\"前端\">前端<a title=\"#前端\" href=\"#前端\"></a></h1>\n<p>最后我附上，最后版本的 index.vue：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs vue\">&lt;template&gt;<br>  &lt;div class=&quot;app-container&quot;&gt;<br>    &lt;el-form :model=&quot;queryParams&quot; ref=&quot;queryRef&quot; :inline=&quot;true&quot; v-show=&quot;showSearch&quot; label-width=&quot;70px&quot;&gt;<br>      &lt;el-form-item label=&quot;课程名称&quot; prop=&quot;name&quot;&gt;<br>        &lt;el-input<br>            v-model=&quot;queryParams.name&quot;<br>            placeholder=&quot;请输入课程名称&quot;<br>            clearable<br>            @keyup.enter=&quot;handleQuery&quot;<br>        /&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;el-form-item label=&quot;课程类型&quot; prop=&quot;type&quot;&gt;<br>        &lt;el-select<br>            v-model=&quot;queryParams.type&quot;<br>            placeholder=&quot;请选择课程类型&quot;<br>            clearable<br>        &gt;<br>          &lt;el-option<br>              v-for=&quot;ct in course_type&quot;<br>              :key=&quot;ct.value&quot;<br>              :label=&quot;ct.label&quot;<br>              :value=&quot;ct.value&quot;<br>          /&gt;<br>        &lt;/el-select&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;el-form-item label=&quot;适用人群&quot; prop=&quot;applyTo&quot;&gt;<br>        &lt;el-select<br>            v-model=&quot;queryParams.applyTo&quot;<br>            placeholder=&quot;请选择适用人群&quot;<br>            clearable<br>        &gt;<br>          &lt;el-option<br>              v-for=&quot;cat in course_apply_to&quot;<br>              :key=&quot;cat.value&quot;<br>              :label=&quot;cat.label&quot;<br>              :value=&quot;cat.value&quot;<br>          /&gt;<br>        &lt;/el-select&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;el-form-item label=&quot;最低价格&quot; prop=&quot;minPrice&quot;&gt;<br>        &lt;el-input-number<br>            v-model=&quot;queryParams.minPrice&quot;<br>            placeholder=&quot;最低价格&quot;<br>            clearable<br>            @keyup.enter=&quot;handleQuery&quot;<br>            :precision=&quot;2&quot;<br>            :step=&quot;100&quot;<br>            :min=&quot;0&quot;<br>        /&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;el-form-item label=&quot;最高价格&quot; prop=&quot;maxPrice&quot;&gt;<br>        &lt;el-input-number<br>            v-model=&quot;queryParams.maxPrice&quot;<br>            placeholder=&quot;最高价格&quot;<br>            clearable<br>            @keyup.enter=&quot;handleQuery&quot;<br>            :precision=&quot;2&quot;<br>            :step=&quot;100&quot;<br>            :min=&quot;0&quot;<br>        /&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;el-form-item&gt;<br>        &lt;el-button type=&quot;primary&quot; icon=&quot;Search&quot; @click=&quot;handleQuery&quot;&gt;搜索&lt;/el-button&gt;<br>        &lt;el-button icon=&quot;Refresh&quot; @click=&quot;resetQuery&quot;&gt;重置&lt;/el-button&gt;<br>      &lt;/el-form-item&gt;<br>    &lt;/el-form&gt;<br><br>    &lt;el-row :gutter=&quot;10&quot; class=&quot;mb8&quot;&gt;<br>      &lt;el-col :span=&quot;1.5&quot;&gt;<br>        &lt;el-button<br>            type=&quot;primary&quot;<br>            plain<br>            icon=&quot;Plus&quot;<br>            @click=&quot;handleAdd&quot;<br>            v-hasPermi=&quot;[&#x27;tienchin:course:create&#x27;]&quot;<br>        &gt;新增<br>        &lt;/el-button&gt;<br>      &lt;/el-col&gt;<br>      &lt;el-col :span=&quot;1.5&quot;&gt;<br>        &lt;el-button<br>            type=&quot;success&quot;<br>            plain<br>            icon=&quot;Edit&quot;<br>            :disabled=&quot;single&quot;<br>            @click=&quot;handleUpdate&quot;<br>            v-hasPermi=&quot;[&#x27;tienchin:course:edit&#x27;]&quot;<br>        &gt;修改<br>        &lt;/el-button&gt;<br>      &lt;/el-col&gt;<br>      &lt;el-col :span=&quot;1.5&quot;&gt;<br>        &lt;el-button<br>            type=&quot;danger&quot;<br>            plain<br>            icon=&quot;Delete&quot;<br>            :disabled=&quot;multiple&quot;<br>            @click=&quot;handleDelete&quot;<br>            v-hasPermi=&quot;[&#x27;tienchin:course:remove&#x27;]&quot;<br>        &gt;删除<br>        &lt;/el-button&gt;<br>      &lt;/el-col&gt;<br>      &lt;el-col :span=&quot;1.5&quot;&gt;<br>        &lt;el-button<br>            type=&quot;warning&quot;<br>            plain<br>            icon=&quot;Download&quot;<br>            @click=&quot;handleExport&quot;<br>            v-hasPermi=&quot;[&#x27;tienchin:course:export&#x27;]&quot;<br>        &gt;导出<br>        &lt;/el-button&gt;<br>      &lt;/el-col&gt;<br>      &lt;right-toolbar v-model:showSearch=&quot;showSearch&quot; @queryTable=&quot;getList&quot;&gt;&lt;/right-toolbar&gt;<br>    &lt;/el-row&gt;<br><br>    &lt;el-table v-loading=&quot;loading&quot; :data=&quot;courseList&quot; @selection-change=&quot;handleSelectionChange&quot;&gt;<br>      &lt;el-table-column type=&quot;selection&quot; width=&quot;55&quot; align=&quot;center&quot;/&gt;<br>      &lt;el-table-column label=&quot;课程编号&quot; align=&quot;center&quot; prop=&quot;courseId&quot; :show-overflow-tooltip=&quot;true&quot;/&gt;<br>      &lt;el-table-column label=&quot;课程类型&quot; align=&quot;center&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;dict-tag :options=&quot;course_type&quot; :value=&quot;scope.row.type&quot;/&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>      &lt;el-table-column label=&quot;课程名称&quot; align=&quot;center&quot; :show-overflow-tooltip=&quot;true&quot; prop=&quot;name&quot;/&gt;<br>      &lt;el-table-column label=&quot;课程价格&quot; align=&quot;center&quot; :show-overflow-tooltip=&quot;true&quot; prop=&quot;price&quot;/&gt;<br>      &lt;el-table-column label=&quot;课程适用人群&quot; align=&quot;center&quot; width=&quot;120&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;dict-tag :options=&quot;course_apply_to&quot; :value=&quot;scope.row.applyTo&quot;/&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>      &lt;el-table-column label=&quot;课程简介&quot; :show-overflow-tooltip=&quot;true&quot; width=&quot;180&quot; align=&quot;center&quot; prop=&quot;info&quot;/&gt;<br>      &lt;el-table-column label=&quot;创建时间&quot; align=&quot;center&quot; prop=&quot;createTime&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;span&gt;&#123;&#123; parseTime(scope.row.createTime) &#125;&#125;&lt;/span&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>      &lt;el-table-column label=&quot;操作&quot; align=&quot;center&quot; class-name=&quot;small-padding fixed-width&quot; width=&quot;150&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;el-button<br>              type=&quot;text&quot;<br>              icon=&quot;Edit&quot;<br>              @click=&quot;handleUpdate(scope.row)&quot;<br>              v-hasPermi=&quot;[&#x27;tienchin:course:edit&#x27;]&quot;<br>          &gt;修改<br>          &lt;/el-button&gt;<br>          &lt;el-button<br>              type=&quot;text&quot;<br>              icon=&quot;Delete&quot;<br>              @click=&quot;handleDelete(scope.row)&quot;<br>              v-hasPermi=&quot;[&#x27;tienchin:course:remove&#x27;]&quot;<br>          &gt;删除<br>          &lt;/el-button&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>    &lt;/el-table&gt;<br><br>    &lt;pagination<br>        v-show=&quot;total &gt; 0&quot;<br>        :total=&quot;total&quot;<br>        v-model:page=&quot;queryParams.pageNum&quot;<br>        v-model:limit=&quot;queryParams.pageSize&quot;<br>        @pagination=&quot;getList&quot;<br>    /&gt;<br><br>    &lt;!-- 添加或修改课程对话框 --&gt;<br>    &lt;el-dialog :title=&quot;title&quot; v-model=&quot;open&quot; width=&quot;600px&quot; append-to-body&gt;<br>      &lt;el-form ref=&quot;courseRef&quot; :model=&quot;form&quot; :rules=&quot;rules&quot; label-width=&quot;100px&quot;&gt;<br>        &lt;el-row&gt;<br>          &lt;el-col :span=&quot;12&quot;&gt;<br>            &lt;el-form-item label=&quot;课程分类&quot; prop=&quot;type&quot;&gt;<br>              &lt;el-select<br>                  v-model=&quot;form.type&quot;<br>                  placeholder=&quot;请选择课程分类&quot;<br>                  clearable<br>                  style=&quot;width: 240px;&quot;<br>              &gt;<br>                &lt;el-option<br>                    v-for=&quot;ct in course_type&quot;<br>                    :key=&quot;ct.value&quot;<br>                    :label=&quot;ct.label&quot;<br>                    :value=&quot;parseInt(ct.value)&quot;<br>                /&gt;<br>              &lt;/el-select&gt;<br>            &lt;/el-form-item&gt;<br>          &lt;/el-col&gt;<br>          &lt;el-col :span=&quot;12&quot;&gt;<br>            &lt;el-form-item label=&quot;课程名称&quot; prop=&quot;name&quot;&gt;<br>              &lt;el-input v-model=&quot;form.name&quot; placeholder=&quot;请输入课程名称&quot;/&gt;<br>            &lt;/el-form-item&gt;<br>          &lt;/el-col&gt;<br>        &lt;/el-row&gt;<br>        &lt;el-row&gt;<br>          &lt;el-col :span=&quot;12&quot;&gt;<br>            &lt;el-form-item label=&quot;适用人群&quot; prop=&quot;applyTo&quot;&gt;<br>              &lt;el-select<br>                  v-model=&quot;form.applyTo&quot;<br>                  placeholder=&quot;请选择适用人群&quot;<br>                  clearable<br>                  style=&quot;width: 240px;&quot;<br>              &gt;<br>                &lt;el-option<br>                    v-for=&quot;cat in course_apply_to&quot;<br>                    :key=&quot;cat.value&quot;<br>                    :label=&quot;cat.label&quot;<br>                    :value=&quot;parseInt(cat.value)&quot;<br>                /&gt;<br>              &lt;/el-select&gt;<br>            &lt;/el-form-item&gt;<br>          &lt;/el-col&gt;<br>          &lt;el-col :span=&quot;12&quot;&gt;<br>            &lt;el-form-item label=&quot;课程价格&quot; prop=&quot;price&quot;&gt;<br>              &lt;el-input-number<br>                  v-model=&quot;form.price&quot;<br>                  placeholder=&quot;课程价格&quot;<br>                  :precision=&quot;2&quot;<br>                  :step=&quot;100&quot;<br>                  :min=&quot;0&quot;<br>                  style=&quot;width: 100%;&quot;<br>              /&gt;<br>            &lt;/el-form-item&gt;<br>          &lt;/el-col&gt;<br>        &lt;/el-row&gt;<br>        &lt;el-form-item label=&quot;课程简介&quot; prop=&quot;info&quot;&gt;<br>          &lt;el-input v-model=&quot;form.info&quot; type=&quot;textarea&quot; placeholder=&quot;请输入课程简介&quot;/&gt;<br>        &lt;/el-form-item&gt;<br>      &lt;/el-form&gt;<br>      &lt;template #footer&gt;<br>        &lt;div class=&quot;dialog-footer&quot;&gt;<br>          &lt;el-button type=&quot;primary&quot; @click=&quot;submitForm&quot;&gt;确 定&lt;/el-button&gt;<br>          &lt;el-button @click=&quot;cancel&quot;&gt;取 消&lt;/el-button&gt;<br>        &lt;/div&gt;<br>      &lt;/template&gt;<br>    &lt;/el-dialog&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup name=&quot;Course&quot;&gt;<br>import &#123;<br>  addCourse,<br>  listCourse,<br>  getInfo,<br>  updateCourse,<br>  delCourse<br>&#125; from &quot;@/api/tienchin/course&quot;;<br><br>const &#123;proxy&#125; = getCurrentInstance();<br>const &#123;<br>  course_type,<br>  course_apply_to,<br>&#125; = proxy.useDict(&#x27;course_type&#x27;, &#x27;course_apply_to&#x27;);<br><br>const courseList = ref([]);<br>const open = ref(false);<br>const loading = ref(true);<br>const showSearch = ref(true);<br>const ids = ref([]);<br>const single = ref(true);<br>const multiple = ref(true);<br>const total = ref(0);<br>const title = ref(&quot;&quot;);<br><br>const data = reactive(&#123;<br>  form: &#123;&#125;,<br>  queryParams: &#123;<br>    pageNum: 1,<br>    pageSize: 10<br>  &#125;,<br>  rules: &#123;<br>    price: [&#123;required: true, message: &quot;课程价格不能为空&quot;, trigger: &quot;blur&quot;&#125;],<br>    name: [&#123;required: true, message: &quot;课程名称不能为空&quot;, trigger: &quot;blur&quot;&#125;],<br>    info: [&#123;required: true, message: &quot;课程简介不能为空&quot;, trigger: &quot;blur&quot;&#125;],<br>    applyTo: [&#123;required: true, message: &quot;适用人群不能为空&quot;, trigger: &quot;blur&quot;&#125;],<br>    type: [&#123;required: true, message: &quot;课程类型不能为空&quot;, trigger: &quot;blur&quot;&#125;]<br>  &#125;<br>&#125;);<br><br>const &#123;queryParams, form, rules&#125; = toRefs(data);<br><br>/** 查询课程列表 */<br>function getList() &#123;<br>  loading.value = true;<br>  listCourse(queryParams.value).then(response =&gt; &#123;<br>    courseList.value = response.rows;<br>    total.value = response.total;<br>    loading.value = false;<br>  &#125;);<br>&#125;<br><br>/** 取消按钮 */<br>function cancel() &#123;<br>  open.value = false;<br>  reset();<br>&#125;<br><br>/** 表单重置 */<br>function reset() &#123;<br>  form.value = &#123;<br>    applyTo: undefined,<br>    name: undefined,<br>    type: undefined,<br>    price: undefined,<br>    info: undefined<br>  &#125;;<br>  proxy.resetForm(&quot;courseRef&quot;);<br>&#125;<br><br>/** 搜索按钮操作 */<br>function handleQuery() &#123;<br>  queryParams.value.pageNum = 1;<br>  getList();<br>&#125;<br><br>/** 重置按钮操作 */<br>function resetQuery() &#123;<br>  proxy.resetForm(&quot;queryRef&quot;);<br>  handleQuery();<br>&#125;<br><br>/** 多选框选中数据 */<br>function handleSelectionChange(selection) &#123;<br>  ids.value = selection.map(item =&gt; item.courseId);<br>  single.value = selection.length !== 1;<br>  multiple.value = !selection.length;<br>&#125;<br><br>/** 新增按钮操作 */<br>function handleAdd() &#123;<br>  reset();<br>  open.value = true;<br>  title.value = &quot;添加课程&quot;;<br>&#125;<br><br>/** 修改按钮操作 */<br>function handleUpdate(row) &#123;<br>  reset();<br><br>  const courseId = row.courseId || ids.value;<br>  getInfo(courseId).then(response =&gt; &#123;<br>    form.value = response.data;<br><br>    open.value = true;<br>    title.value = &quot;修改课程&quot;;<br>  &#125;);<br>&#125;<br><br>/** 提交按钮 */<br>function submitForm() &#123;<br>  proxy.$refs[&quot;courseRef&quot;].validate(valid =&gt; &#123;<br>    if (valid) &#123;<br>      if (form.value.courseId !== undefined) &#123;<br>        updateCourse(form.value).then(response =&gt; &#123;<br>          proxy.$modal.msgSuccess(&quot;修改成功&quot;);<br>          open.value = false;<br>          getList();<br>        &#125;);<br>      &#125; else &#123;<br>        addCourse(form.value).then(response =&gt; &#123;<br>          proxy.$modal.msgSuccess(&quot;新增成功&quot;);<br>          open.value = false;<br>          getList();<br>        &#125;);<br>      &#125;<br>    &#125;<br>  &#125;);<br>&#125;<br><br>/** 删除按钮操作 */<br>function handleDelete(row) &#123;<br>  const courseIds = row.courseId || ids.value;<br>  proxy.$modal.confirm(&#x27;是否确认删除课程编号为&quot;&#x27; + courseIds + &#x27;&quot;的数据项？&#x27;).then(function () &#123;<br>    return delCourse(courseIds);<br>  &#125;).then(() =&gt; &#123;<br>    getList();<br>    proxy.$modal.msgSuccess(&quot;删除成功&quot;);<br>  &#125;).catch(() =&gt; &#123;<br>  &#125;);<br>&#125;<br><br>/** 导出按钮操作 */<br>function handleExport() &#123;<br>  proxy.download(&quot;tienchin/course/export&quot;, &#123;<br>    ...queryParams.value<br>  &#125;, `course_$&#123;new Date().getTime()&#125;.xlsx`);<br>&#125;<br><br>getList();<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>\n<p>删除了无用的代码。</p>\n","prev":{"title":"Vue双向数据绑定原理-上","link":"2023/09/27/手写Vue全家桶/01-Vue双向数据绑定原理-上"},"next":{"title":"TienChin-课程管理-课程搜索","link":"2023/09/24/项目/TienChin 健身系统/2023-6-11/课程管理/51-TienChin-课程管理-课程搜索"},"plink":"http://example.com/2023/09/24/项目/TienChin 健身系统/2023-6-11/课程管理/52-TienChin-课程管理-课程导出/","toc":[{"id":"coursecontroller.java","title":"CourseController.java","index":"1"},{"id":"前端","title":"前端","index":"2"}],"reading_time":"2055 words in 14 min"}