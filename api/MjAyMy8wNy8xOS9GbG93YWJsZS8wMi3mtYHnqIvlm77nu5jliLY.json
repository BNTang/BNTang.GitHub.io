{"title":"流程图绘制","date":"2023-07-19T15:08:37.000Z","date_formatted":{"ll":"Jul 19, 2023","L":"07/19/2023","MM-DD":"07-19"},"link":"2023/07/19/Flowable/02-流程图绘制","tags":["Flowable"],"updated":"2023-07-23T04:19:55.530Z","content":"<p>经典工具：Flowable Eclipse Designer</p>\n<p>但是，这是一个 Eclipse 插件。</p>\n<p>IDEA：</p>\n<ul>\n<li>IDEA 默认就有一个流程图绘制工具，当在 IDEA 中打开一个流程图的 XML 文件的时候，可以选择 Designer，就可以通过可视化的方式去查看这个流程图，默认的不推荐。</li>\n<li>IDEA 中也有一个流程绘制插件 <code>flowable-bpmn-visualizer</code>，但是这个插件也不好用，不过勉强能用。</li>\n</ul>\n<p>这是 IDEA 里的两个插件。</p>\n<p>其他的绘制工具：</p>\n<ol>\n<li>flowable-ui 这是官方提供的一个 flowable 的工具，里边有很多功能，包括画流程图。</li>\n<li>bpmn.js 这个工具是 Camunda 提供的，可以嵌入到我们当前的项目中，利用这个 bpmn.js 可以开发一个流程绘制工具。原生的 bpmn.js 画出来的流程图只能在 Camunda 中使用，但是经过改造之后，就可以在 flowable 中使用了。</li>\n</ol>\n<h1 id=\"flowable-bpmn-visualizer\">flowable-bpmn-visualizer<a title=\"#flowable-bpmn-visualizer\" href=\"#flowable-bpmn-visualizer\"></a></h1>\n<p>插件安装：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230719231329289-1163376690.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>装好之后重启 IDEA 即可。</p>\n<p>在 IDEA 中，当我们安装了这个插件之后，新建文件的时候，就有相应的选项，如下图：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230719231710277-763948896.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>选择这个就可以新建一个流程图了。</p>\n<p>如下图是官方提供的一个流程图：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230719231738910-1878370926.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>我们使用这个插件来绘制一下这个流程图先上个手：</p>\n<p>创建项目略过，在 resources 文件夹当中鼠标右键新建一个 BPMN 文件，然后就可以绘制流程图了。</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723000049399-659194665.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>在 BPMN 文件中，鼠标右键，选择 <code>View BPMN(Flowble) Diagram</code>，然后就可以绘制流程图了：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723000450275-1962897324.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>点击画布中间，会出现一些全局的属性，如下图：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723000718830-1666135700.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>这个就是描述一下我们的流程图是干嘛的，给一个 ID, Name。</p>\n<p>绘制开始节点，鼠标在插件当中右键：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723102857898-157294657.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>点击添加的开始节点，主要是属性：</p>\n<ul>\n<li>id: 给这个开始节点起一个名字，也代表着唯一标识</li>\n<li>Name：描述一下这个节点是干嘛的</li>\n</ul>\n<p>然后继续绘制我们的下一个节点，User Task，鼠标右键 <code>Activities</code>：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723103652952-307365886.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723103919827-287370091.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>!&gt; 注意，这里如果是传递变量需要用 <code>$&#123;&#125;</code> 表达式，如果是字符串，直接写即可，例如，这个节点由一个名为 BNTang 的用户来处理，那么写法如下：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723104022195-1378494374.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>绘制一个网关，排它网关，鼠标右键 <code>Gateways</code>：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723104212139-705048100.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>绘制一个 Service Task，鼠标右键 <code>Activities</code>：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723104258449-1517359067.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>注意，从排他性网关出来的线条中，有一个 Condition expression，这个表示这个线条执行的条件。以下图为例，具体来说，就是当用户在审批的时候，本质上其实就是传递一个变量，变量值为 true 或者 false。下图中的 <code>$&#123;approve&#125;</code> 表示这个变量的名字为 approve。</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723104443762-1129470449.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>下图表示的是从网关出来之后，approve 变量如果为 false，那么就进入到请求被拒绝的服务中。</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723104812248-1771699170.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>然后再将我们的流程图完善一下：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723104954355-1264661760.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>总结一下比较关键的几个属性：</p>\n<ul>\n<li>id: 唯一标识</li>\n<li>Name: 描述</li>\n<li>Assignee: 任务的执行者</li>\n<li>Condition expression: 条件表达式，用于判断流程的走向</li>\n<li>Service Task: 服务任务，用于执行一些业务逻辑，例如，发送邮件，发送短信等等</li>\n</ul>\n<p>修正一下之前的流程图当中的问题，并解析一下这个流程图的XML，解析XML我会对流程的各个部分编写注释，然后我会将最终的XML贴在下方。</p>\n<p>首先是我们的结束节点有两个的情况，按道理只有一个结束节点，所以我们需要将这个结束节点删除一个，然后将线条连接到另一个结束节点上。</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723111104403-1738470416.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>Service Task 节点给 Class 属性赋值，意思是这个节点执行的时候，会执行这个类中的方法，这个类需要实现 JavaDelegate 接口，然后重写 execute 方法，这个方法就是这个节点执行的时候会执行的方法。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@version</span> 1.0</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@description</span> 发送请假审批邮箱拒绝或者同意</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023-11-23</span><br><span class=\"hljs-comment\"> **/</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Approve</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">JavaDelegate</span> &#123;<br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title function_\">execute</span><span class=\"hljs-params\">(DelegateExecution delegateExecution)</span> &#123;<br>        System.out.println(<span class=\"hljs-string\">&quot;发送请假审批邮箱拒绝或者同意&quot;</span> + delegateExecution.getVariables());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230723111318542-1050695684.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<h1 id=\"分析流程图的xml文件\">分析流程图的XML文件<a title=\"#分析流程图的xml文件\" href=\"#分析流程图的xml文件\"></a></h1>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">&quot;1.0&quot;</span> encoding=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">definitions</span> <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">&quot;http://www.omg.org/spec/BPMN/20100524/MODEL&quot;</span> <span class=\"hljs-attr\">xmlns:xsi</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> <span class=\"hljs-attr\">xmlns:xsd</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"hljs-attr\">xmlns:flowable</span>=<span class=\"hljs-string\">&quot;http://flowable.org/bpmn&quot;</span> <span class=\"hljs-attr\">xmlns:bpmndi</span>=<span class=\"hljs-string\">&quot;http://www.omg.org/spec/BPMN/20100524/DI&quot;</span> <span class=\"hljs-attr\">xmlns:omgdc</span>=<span class=\"hljs-string\">&quot;http://www.omg.org/spec/DD/20100524/DC&quot;</span> <span class=\"hljs-attr\">xmlns:omgdi</span>=<span class=\"hljs-string\">&quot;http://www.omg.org/spec/DD/20100524/DI&quot;</span> <span class=\"hljs-attr\">typeLanguage</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class=\"hljs-attr\">expressionLanguage</span>=<span class=\"hljs-string\">&quot;http://www.w3.org/1999/XPath&quot;</span> <span class=\"hljs-attr\">targetNamespace</span>=<span class=\"hljs-string\">&quot;http://www.flowable.org/processdef&quot;</span>&gt;</span><br>  <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">  process：流程定义的根元素，一个BPMN 2.0文档中可以包含多个process元素，每个process元素都是一个独立的流程定义。</span><br><span class=\"hljs-comment\">  --&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">process</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;hoildayRequestDemo&quot;</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;hoildayRequestDemo&quot;</span> <span class=\"hljs-attr\">isExecutable</span>=<span class=\"hljs-string\">&quot;true&quot;</span>&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    startEvent：开始事件，流程定义中必须包含一个开始事件，用于标识流程定义的启动点。</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">startEvent</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;startEvent&quot;</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;开始一个请假流程&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    userTask：用户任务，流程定义中可以包含多个用户任务，用于标识流程中的一个任务。</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">userTask</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;approveRequest&quot;</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;批准或者拒绝请假请求&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    sequenceFlow：顺序流，用于标识流程中的执行顺序。</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">sequenceFlow</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;startEvent_to_approveRequest&quot;</span> <span class=\"hljs-attr\">sourceRef</span>=<span class=\"hljs-string\">&quot;startEvent&quot;</span> <span class=\"hljs-attr\">targetRef</span>=<span class=\"hljs-string\">&quot;approveRequest&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    exclusiveGateway：排他网关，用于标识流程中的分支和合并。</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">exclusiveGateway</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;approveOrRejectGateway&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    sequenceFlow：顺序流，用于标识流程中的执行顺序。</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">sequenceFlow</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;approveRequest_to_approveOrRejectGateway&quot;</span> <span class=\"hljs-attr\">sourceRef</span>=<span class=\"hljs-string\">&quot;approveRequest&quot;</span></span><br><span class=\"hljs-tag\">                  <span class=\"hljs-attr\">targetRef</span>=<span class=\"hljs-string\">&quot;approveOrRejectGateway&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    serviceTask：服务任务，用于标识流程中的一个服务任务。</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">serviceTask</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;sendApproveEmail&quot;</span> <span class=\"hljs-attr\">flowable:exclusive</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;发送请假审批通过的邮箱&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    sequenceFlow：顺序流，用于标识流程中的执行顺序。</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">sequenceFlow</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;gateway_to_approve&quot;</span> <span class=\"hljs-attr\">sourceRef</span>=<span class=\"hljs-string\">&quot;approveOrRejectGateway&quot;</span> <span class=\"hljs-attr\">targetRef</span>=<span class=\"hljs-string\">&quot;sendApproveEmail&quot;</span>&gt;</span><br>      <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">      conditionExpression：条件表达式，用于标识顺序流的条件。</span><br><span class=\"hljs-comment\">      --&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">conditionExpression</span> <span class=\"hljs-attr\">xsi:type</span>=<span class=\"hljs-string\">&quot;tFormalExpression&quot;</span>&gt;</span>$&#123;approve&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">conditionExpression</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">sequenceFlow</span>&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    serviceTask：服务任务，用于标识流程中的一个服务任务。</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">serviceTask</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;sendRejectEmail&quot;</span> <span class=\"hljs-attr\">flowable:exclusive</span>=<span class=\"hljs-string\">&quot;true&quot;</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;发送请假被拒绝的邮箱&quot;</span></span><br><span class=\"hljs-tag\">                 <span class=\"hljs-attr\">flowable:class</span>=<span class=\"hljs-string\">&quot;top.it6666.flowable.Approve&quot;</span>/&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    sequenceFlow：顺序流，用于标识流程中的执行顺序。</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">sequenceFlow</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;gateway_to_reject&quot;</span> <span class=\"hljs-attr\">sourceRef</span>=<span class=\"hljs-string\">&quot;approveOrRejectGateway&quot;</span> <span class=\"hljs-attr\">targetRef</span>=<span class=\"hljs-string\">&quot;sendRejectEmail&quot;</span></span><br><span class=\"hljs-tag\">                  <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;从网关到请求被拒绝&quot;</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">conditionExpression</span> <span class=\"hljs-attr\">xsi:type</span>=<span class=\"hljs-string\">&quot;tFormalExpression&quot;</span>&gt;</span>$&#123;!approve&#125;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">conditionExpression</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">sequenceFlow</span>&gt;</span><br>    <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">    sequenceFlow：顺序流，用于标识流程中的执行顺序。</span><br><span class=\"hljs-comment\">    --&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">sequenceFlow</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;sendApproveEmail_to_endEvent&quot;</span> <span class=\"hljs-attr\">sourceRef</span>=<span class=\"hljs-string\">&quot;sendApproveEmail&quot;</span> <span class=\"hljs-attr\">targetRef</span>=<span class=\"hljs-string\">&quot;endEvent&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">sequenceFlow</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;sendRejectEmail_to_endEvent&quot;</span> <span class=\"hljs-attr\">sourceRef</span>=<span class=\"hljs-string\">&quot;sendRejectEmail&quot;</span> <span class=\"hljs-attr\">targetRef</span>=<span class=\"hljs-string\">&quot;endEvent&quot;</span>/&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">endEvent</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;endEvent&quot;</span>/&gt;</span><br>  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">process</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNDiagram</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;BPMNDiagram_hoildayRequestDemo&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNPlane</span> <span class=\"hljs-attr\">bpmnElement</span>=<span class=\"hljs-string\">&quot;hoildayRequestDemo&quot;</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;BPMNPlane_hoildayRequestDemo&quot;</span>&gt;</span><br>      <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">      开始节点</span><br><span class=\"hljs-comment\">      --&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNShape</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;shape-720716bb-7992-4c79-9289-7697c965a250&quot;</span> <span class=\"hljs-attr\">bpmnElement</span>=<span class=\"hljs-string\">&quot;startEvent&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdc:Bounds</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-550.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;65.0&quot;</span> <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;30.0&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;30.0&quot;</span>/&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNShape</span>&gt;</span><br>      <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">      用户任务</span><br><span class=\"hljs-comment\">      --&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNShape</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;shape-4bbbd282-b4b4-4ebc-a979-f148f400e7d2&quot;</span> <span class=\"hljs-attr\">bpmnElement</span>=<span class=\"hljs-string\">&quot;approveRequest&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdc:Bounds</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-425.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;40.0&quot;</span> <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;100.0&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;80.0&quot;</span>/&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNShape</span>&gt;</span><br>      <span class=\"hljs-comment\">&lt;!--</span><br><span class=\"hljs-comment\">      sequenceFlow：顺序流，用于标识流程中的执行顺序。</span><br><span class=\"hljs-comment\">      --&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNEdge</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;edge-c9de96ec-da86-43c6-b84f-c185782ac4ff&quot;</span> <span class=\"hljs-attr\">bpmnElement</span>=<span class=\"hljs-string\">&quot;startEvent_to_approveRequest&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-520.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;80.0&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-425.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;80.0&quot;</span>/&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNEdge</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNShape</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;shape-7d5f411f-f2e2-4c4a-ac43-368ef7489c11&quot;</span> <span class=\"hljs-attr\">bpmnElement</span>=<span class=\"hljs-string\">&quot;approveOrRejectGateway&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdc:Bounds</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-230.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;60.0&quot;</span> <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;40.0&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;40.0&quot;</span>/&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNShape</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNEdge</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;edge-20bcfcad-f8b8-4a3c-8f2b-1540b0903b10&quot;</span></span><br><span class=\"hljs-tag\">                       <span class=\"hljs-attr\">bpmnElement</span>=<span class=\"hljs-string\">&quot;approveRequest_to_approveOrRejectGateway&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-325.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;80.0&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-230.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;80.0&quot;</span>/&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNEdge</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNShape</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;shape-c1f0d7a5-355f-4cc7-857e-ec50ad44e5f9&quot;</span> <span class=\"hljs-attr\">bpmnElement</span>=<span class=\"hljs-string\">&quot;sendApproveEmail&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdc:Bounds</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-110.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;40.0&quot;</span> <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;100.0&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;80.0&quot;</span>/&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNShape</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNEdge</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;edge-7388f00b-1867-4b52-87e2-1c8dbcac5588&quot;</span> <span class=\"hljs-attr\">bpmnElement</span>=<span class=\"hljs-string\">&quot;gateway_to_approve&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-190.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;80.0&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-110.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;80.0&quot;</span>/&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNEdge</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNShape</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;shape-28a27ae4-28cf-4257-8858-7fd1222f9b58&quot;</span> <span class=\"hljs-attr\">bpmnElement</span>=<span class=\"hljs-string\">&quot;sendRejectEmail&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdc:Bounds</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-110.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;165.0&quot;</span> <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;100.0&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;80.0&quot;</span>/&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNShape</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNEdge</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;edge-c687124b-5335-44b3-9e84-4c08c759e566&quot;</span> <span class=\"hljs-attr\">bpmnElement</span>=<span class=\"hljs-string\">&quot;gateway_to_reject&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-210.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;100.0&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-210.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;185.0&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-110.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;185.0&quot;</span>/&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNEdge</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNEdge</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;edge-cbdabd5a-0320-4beb-8746-8a0b2c3d982b&quot;</span> <span class=\"hljs-attr\">bpmnElement</span>=<span class=\"hljs-string\">&quot;sendApproveEmail_to_endEvent&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-10.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;80.0&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;125.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;80.0&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;125.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;169.99998&quot;</span>/&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNEdge</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNEdge</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;edge-7ac3bda4-a111-4f1b-a1cd-0e673c8d3ed9&quot;</span> <span class=\"hljs-attr\">bpmnElement</span>=<span class=\"hljs-string\">&quot;sendRejectEmail_to_endEvent&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;-10.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;185.0&quot;</span>/&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdi:waypoint</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;110.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;185.0&quot;</span>/&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNEdge</span>&gt;</span><br>      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">bpmndi:BPMNShape</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;shape-b5991b38-6b94-478d-968a-d137717678f6&quot;</span> <span class=\"hljs-attr\">bpmnElement</span>=<span class=\"hljs-string\">&quot;endEvent&quot;</span>&gt;</span><br>        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">omgdc:Bounds</span> <span class=\"hljs-attr\">x</span>=<span class=\"hljs-string\">&quot;110.0&quot;</span> <span class=\"hljs-attr\">y</span>=<span class=\"hljs-string\">&quot;170.0&quot;</span> <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;30.0&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;30.0&quot;</span>/&gt;</span><br>      <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNShape</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNPlane</span>&gt;</span><br>  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">bpmndi:BPMNDiagram</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">definitions</span>&gt;</span><br></code></pre></td></tr></table></figure>","prev":{"title":"Flowable-UI","link":"2023/07/23/Flowable/03-Flowable-UI"},"next":{"title":"工作流 workflow","link":"2023/07/19/Flowable/01-工作流 workflow"},"plink":"http://example.com/2023/07/19/Flowable/02-流程图绘制/","toc":[{"id":"flowable-bpmn-visualizer","title":"flowable-bpmn-visualizer","index":"1"},{"id":"分析流程图的xml文件","title":"分析流程图的XML文件","index":"2"}],"reading_time":"2278 words in 15 min"}