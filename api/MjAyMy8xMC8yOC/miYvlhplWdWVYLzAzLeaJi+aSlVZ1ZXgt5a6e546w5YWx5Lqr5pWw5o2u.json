{"title":"手撕Vuex-实现共享数据","date":"2023-10-28T06:53:59.000Z","date_formatted":{"ll":"Oct 28, 2023","L":"10/28/2023","MM-DD":"10-28"},"link":"2023/10/28/手写VueX/03-手撕Vuex-实现共享数据","tags":["手写Vuex"],"updated":"2023-11-13T13:23:00.664Z","content":"<p>经过上一篇章介绍，完成了添加全局 $store，接下来就是实现共享数据的功能。</p>\n<p>在 Vuex 中，共享数据是通过 state 来实现的，所以我们需要在 Nuex.js 文件中实现 state 的功能。</p>\n<p>在 Vuex 中，state 是一个对象，这个对象中存放的就是我们的共享数据，所以我们需要在 Nuex.js 文件中定义一个 state 对象。</p>\n<p>在 store 目录中，我们给 Vue 注册 Nuex 时创建了 store 对象，并且定义了共享属性，在根组件中，使用了 store，那么我们在 install 方法中就可以通过 Vue 实例访问到 store 对象注册全局的 $store。</p>\n<p>基于这些信息，我们就可以在 Nuex.js 文件中实现 state 的功能了。</p>\n<p>只需要在 Store 构造函数中将创建Store时需要共享的数据添加到Store上面，这样将来我们就能通过this.$store拿到这个Store，既然能拿到这个Store,我们就可以通过 <code>.state</code> 拿到需要共享的属性。</p>\n<p>最终的代码如下：</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Store</span> &#123;<br>    <span class=\"hljs-title function_\">constructor</span>(<span class=\"hljs-params\">options</span>) &#123;<br>        <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">state</span> = options.<span class=\"hljs-property\">state</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<p>将访问共享数据的代码放开，打开浏览器查看效果：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202310/2105804-20231028153243060-1541034234.png\" alt=\"image-20231028153242085\" loading=\"lazy\" class=\"φbp\"></p>\n<h1 id=\"总结\">总结<a title=\"#总结\" href=\"#总结\"></a></h1>\n<p>到这里我们就完成了共享数据的功能，实现共享数据主要是通过 state 属性来实现的，state 属性是在 Store 构造函数中定义的，所以我们需要在 Store 构造函数中将创建 Store 时将需要共享的数据添加到 Store 上面，这样将来我们就能通过 this.$store 拿到这个 Store，既然能拿到这个 Store，我们就可以通过 <code>.state</code> 拿到需要共享的属性。</p>\n","prev":{"title":"手撕Vuex-实现getters方法","link":"2023/10/28/手写VueX/04-手撕Vuex-实现getters方法"},"next":{"title":"手撕Vuex-添加全局$store","link":"2023/10/28/手写VueX/02-手撕Vuex-添加全局$store"},"plink":"http://example.com/2023/10/28/手写VueX/03-手撕Vuex-实现共享数据/","toc":[{"id":"总结","title":"总结","index":"1"}],"reading_time":"446 words in 3 min"}