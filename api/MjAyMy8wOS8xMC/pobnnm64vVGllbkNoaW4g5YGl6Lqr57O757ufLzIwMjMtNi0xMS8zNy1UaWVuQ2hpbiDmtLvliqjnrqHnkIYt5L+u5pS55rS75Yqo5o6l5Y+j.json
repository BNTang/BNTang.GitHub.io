{"title":"TienChin 活动管理-修改活动接口","date":"2023-09-10T02:29:20.000Z","date_formatted":{"ll":"Sep 10, 2023","L":"09/10/2023","MM-DD":"09-10"},"link":"2023/09/10/项目/TienChin 健身系统/2023-6-11/37-TienChin 活动管理-修改活动接口","tags":["项目"],"updated":"2023-09-21T17:29:08.258Z","content":"<h1 id=\"前端\">前端<a title=\"#前端\" href=\"#前端\"></a></h1>\n<h2 id=\"activity.js\">activity.js<a title=\"#activity.js\" href=\"#activity.js\"></a></h2>\n<p>直接替换现有的，最求速度了，后面在详细一个个记录，不在过多解释了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-keyword\">import</span> request <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@/utils/request&#x27;</span><br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 查询活动列表</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> query 查询条件参数</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@returns</span> &#123;<span class=\"hljs-type\">*</span>&#125; 查询结果</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">listActivity</span>(<span class=\"hljs-params\">query</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity/list&#x27;</span>,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;get&#x27;</span>,<br>        <span class=\"hljs-attr\">params</span>: query<br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 查询渠道列表</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@returns</span> &#123;<span class=\"hljs-type\">*</span>&#125; 查询结果</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">listChannel</span>(<span class=\"hljs-params\"></span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity/channel/list&#x27;</span>,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;get&#x27;</span><br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 查询活动详细</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> activityId 活动ID</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@returns</span> &#123;<span class=\"hljs-type\">*</span>&#125; 查询结果</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getInfo</span>(<span class=\"hljs-params\">activityId</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity/&#x27;</span> + activityId,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;get&#x27;</span><br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">// 查询活动详细</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getActivity</span>(<span class=\"hljs-params\">activityId</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity/&#x27;</span> + activityId,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;get&#x27;</span><br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">// 新增活动</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">addActivity</span>(<span class=\"hljs-params\">data</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity&#x27;</span>,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;post&#x27;</span>,<br>        <span class=\"hljs-attr\">data</span>: data<br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">// 修改活动</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">updateActivity</span>(<span class=\"hljs-params\">data</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity&#x27;</span>,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;put&#x27;</span>,<br>        <span class=\"hljs-attr\">data</span>: data<br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">// 删除活动</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">delActivity</span>(<span class=\"hljs-params\">activityIds</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity/&#x27;</span> + activityIds,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;delete&#x27;</span><br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>\n<h1 id=\"后端\">后端<a title=\"#后端\" href=\"#后端\"></a></h1>\n<p>我们在进行数据修改的时候，有的数据在新增的时候是需要校验必填项的，但是在编辑的时候却不需要，这个时候可以使用校验分组的方式进行区分实现方式如下。</p>\n<p>新建一个 <code>validator</code> 包，在当中分别创建，CreateGroup，EditGroup：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@version</span> 1.0</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@description</span> 添加活动校验分组</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023-09-10</span><br><span class=\"hljs-comment\"> **/</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">CreateGroup</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@version</span> 1.0</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@description</span> 编辑活动校验分组</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023-09-10</span><br><span class=\"hljs-comment\"> **/</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">EditGroup</span> &#123;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"activitycontroller.java\">ActivityController.java<a title=\"#activitycontroller.java\" href=\"#activitycontroller.java\"></a></h2>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202309/2105804-20230922012224176-1717810897.png\" alt=\"image-20230922012223431\" loading=\"lazy\" class=\"φbp\"></p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@PreAuthorize(&quot;hasPermission(&#x27;tienchin:activity:create&#x27;)&quot;)</span><br><span class=\"hljs-meta\">@Log(title = &quot;活动管理&quot;, businessType = BusinessType.INSERT)</span><br><span class=\"hljs-meta\">@PostMapping</span><br><span class=\"hljs-keyword\">public</span> AjaxResult <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Validated(CreateGroup.class)</span> <span class=\"hljs-meta\">@RequestBody</span> ActivityVO activityVO)</span> &#123;<br>    <span class=\"hljs-keyword\">return</span> AjaxResult.success(iActivityService.addActivity(activityVO) &gt; <span class=\"hljs-number\">0</span> ? <span class=\"hljs-string\">&quot;添加成功&quot;</span> : <span class=\"hljs-string\">&quot;添加失败&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 修改活动</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@PreAuthorize(&quot;hasPermission(&#x27;tienchin:activity:edit&#x27;)&quot;)</span><br><span class=\"hljs-meta\">@Log(title = &quot;活动管理&quot;, businessType = BusinessType.UPDATE)</span><br><span class=\"hljs-meta\">@PutMapping</span><br>AjaxResult <span class=\"hljs-title function_\">edit</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Validated(EditGroup.class)</span> <span class=\"hljs-meta\">@RequestBody</span> ActivityVO activityVO)</span> &#123;<br>    <span class=\"hljs-keyword\">return</span> AjaxResult.success(iActivityService.updateActivity(activityVO) &gt; <span class=\"hljs-number\">0</span> ? <span class=\"hljs-string\">&quot;更新成功&quot;</span> : <span class=\"hljs-string\">&quot;更新失败&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"validationmessages.properties\">ValidationMessages.properties<a title=\"#validationmessages.properties\" href=\"#validationmessages.properties\"></a></h2>\n<p>添加一个活动id不能为空的校验信息：</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs properties\"><span class=\"hljs-attr\">activity.id.notnull</span>=<span class=\"hljs-string\">活动ID不能为空</span><br></code></pre></td></tr></table></figure>\n<h2 id=\"activityvo\">ActivityVO<a title=\"#activityvo\" href=\"#activityvo\"></a></h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动ID</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotNull(message = &quot;&#123;activity.id.notnull&#125;&quot;, groups = &#123;EditGroup.class&#125;)</span><br><span class=\"hljs-keyword\">private</span> Integer activityId;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动名称</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotBlank(message = &quot;&#123;activity.name.notBlank&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-meta\">@Size(max = 20, message = &quot;&#123;activity.name.size&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-keyword\">private</span> String activityName;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 渠道ID</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotNull(message = &quot;&#123;activity.channelId.notnull&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-keyword\">private</span> Integer channelId;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动简介</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotBlank(message = &quot;&#123;activity.info.notBlank&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-meta\">@Size(max = 255, message = &quot;&#123;activity.info.size&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-keyword\">private</span> String activityInfo;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动类型，1.折扣券、2.代金券</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotNull(message = &quot;&#123;activity.type.notnull&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-keyword\">private</span> Integer activityType;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动状态，0.表示禁用、1.表示正常</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@Max(value = 1, message = &quot;&#123;activity.status.max&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-meta\">@Min(value = 0, message = &quot;&#123;activity.status.min&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-keyword\">private</span> Integer activityStatus;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 折扣券</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@Max(value = 10, message = &quot;&#123;activity.discount.max&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-meta\">@Min(value = 0, message = &quot;&#123;activity.discount.min&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-keyword\">private</span> Double discount;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 代金券</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@Min(value = 0, message = &quot;&#123;activity.voucher.min&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-keyword\">private</span> Double voucher;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动开始时间</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotNull(message = &quot;&#123;activity.beginTime.notnull&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-meta\">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;, timezone = &quot;Asia/Shanghai&quot;)</span><br><span class=\"hljs-keyword\">private</span> LocalDateTime beginTime;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动结束时间</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotNull(message = &quot;&#123;activity.endTime.notnull&#125;&quot;, groups = &#123;EditGroup.class, CreateGroup.class&#125;)</span><br><span class=\"hljs-meta\">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;, timezone = &quot;Asia/Shanghai&quot;)</span><br><span class=\"hljs-keyword\">private</span> LocalDateTime endTime;<br></code></pre></td></tr></table></figure>\n<h2 id=\"iactivityservice\">IActivityService<a title=\"#iactivityservice\" href=\"#iactivityservice\"></a></h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 修改活动</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> activityVO 活动信息</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@return</span> 结果</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">updateActivity</span><span class=\"hljs-params\">(ActivityVO activityVO)</span>;<br></code></pre></td></tr></table></figure>\n<h2 id=\"activityserviceimpl\">ActivityServiceImpl<a title=\"#activityserviceimpl\" href=\"#activityserviceimpl\"></a></h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">updateActivity</span><span class=\"hljs-params\">(ActivityVO activityVO)</span> &#123;<br>    <span class=\"hljs-type\">Activity</span> <span class=\"hljs-variable\">activity</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Activity</span>();<br><br>    BeanUtils.copyProperties(activityVO, activity);<br><br>    activity.setUpdateBy(SecurityUtils.getUsername());<br>    activity.setUpdateTime(LocalDateTime.now());<br><br>    <span class=\"hljs-comment\">// 将来更新的时候，不修改为 null 的字段</span><br>    activity.setCreateBy(<span class=\"hljs-literal\">null</span>);<br>    activity.setCreateTime(<span class=\"hljs-literal\">null</span>);<br>    activity.setDelFlag(<span class=\"hljs-literal\">null</span>);<br><br>    <span class=\"hljs-keyword\">return</span> updateById(activity) ? <span class=\"hljs-number\">1</span> : <span class=\"hljs-number\">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>\n<p>!&gt; 将实体类都统一放入到 domain 包当中自己改下</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202309/2105804-20230922012526497-2005041175.png\" alt=\"image-20230922012525594\" loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"TienChin 活动管理-修改活动","link":"2023/09/10/项目/TienChin 健身系统/2023-6-11/38-TienChin 活动管理-修改活动"},"next":{"title":"TienChin 活动管理-完成添加活动","link":"2023/09/10/项目/TienChin 健身系统/2023-6-11/36-TienChin 活动管理-完成添加活动"},"plink":"http://example.com/2023/09/10/项目/TienChin 健身系统/2023-6-11/37-TienChin 活动管理-修改活动接口/","toc":[{"id":"前端","title":"前端","index":"1","children":[{"id":"activity.js","title":"activity.js","index":"1.1"}]},{"id":"后端","title":"后端","index":"2","children":[{"id":"activitycontroller.java","title":"ActivityController.java","index":"2.1"},{"id":"validationmessages.properties","title":"ValidationMessages.properties","index":"2.2"},{"id":"activityvo","title":"ActivityVO","index":"2.3"},{"id":"iactivityservice","title":"IActivityService","index":"2.4"},{"id":"activityserviceimpl","title":"ActivityServiceImpl","index":"2.5"}]}],"reading_time":"996 words in 7 min"}