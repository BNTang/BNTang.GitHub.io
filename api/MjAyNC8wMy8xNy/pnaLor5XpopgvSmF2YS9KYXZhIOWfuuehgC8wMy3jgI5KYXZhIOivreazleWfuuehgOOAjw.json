{"title":"『Java 语法基础』3 * 0.1 == 0.3 将会返回什么？true 还是 false？","date":"2024-03-17T04:28:59.000Z","date_formatted":{"ll":"Mar 17, 2024","L":"03/17/2024","MM-DD":"03-17"},"link":"2024/03/17/面试题/Java/Java 基础/03-『Java 语法基础』","tags":["Java"],"updated":"2024-03-17T10:52:37.963Z","content":"<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202403/2105804-20240317123050891-1401467678.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>false，因为有些浮点数不能完全精确的表示出来。</p>\n<p>由于浮点数在计算机中的表示通常是近似值，<code>3 * 0.1</code> 实际上可能不会精确等于 <code>0.3</code>。这是因为二进制浮点数最为常用的表示格式（IEEE 754）通常无法精确表示一些十进制数。执行 <code>3 * 0.1 == 0.3</code> 在 Java 中很可能会返回 <code>false</code>，因为两边计算得到的二进制表示有细微的差异。为了准确的比较浮点数，通常应该使用一个非常小的误差值来确定两个浮点数是否 “相等”。例如：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">a</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">3</span> * <span class=\"hljs-number\">0.1</span>;<br><span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">b</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0.3</span>;<br><span class=\"hljs-type\">double</span> <span class=\"hljs-variable\">epsilon</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-number\">0.0001</span>; <span class=\"hljs-comment\">// 定义一个很小的误差范围</span><br><span class=\"hljs-type\">boolean</span> <span class=\"hljs-variable\">areEqual</span> <span class=\"hljs-operator\">=</span> Math.abs(a - b) &lt; epsilon; <span class=\"hljs-comment\">// 比较是否在误差范围内相等</span><br></code></pre></td></tr></table></figure>\n<p>输出结果：</p>\n<figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs tex\">true<br></code></pre></td></tr></table></figure>\n<p>在操作金融计算等对精度要求非常高的场合，应避免使用 <code>float</code> 和 <code>double</code> 类型，而是使用 <code>BigDecimal</code> 类。</p>\n<p>完整代码可在此查阅：<a href=\"https://github.com/BNTang/Java-All/tree/main/java-infrastructural/src/main/java/top/it6666/example\" target=\"_blank\">GitHub</a></p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202312/2105804-20231211215004818-977875224.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"『Java 语法基础』能在 Switch 中使用 String 吗？","link":"2024/03/17/面试题/Java/Java 基础/04-『Java 语法基础』能在 Switch 中使用 String 吗"},"next":{"title":"『Java 语法基础』a = a + b 与 a += b 的区别","link":"2024/03/11/面试题/Java/Java 基础/02-『Java 语法基础』"},"plink":"http://example.com/2024/03/17/面试题/Java/Java 基础/03-『Java 语法基础』/","reading_time":"285 words in 2 min"}