{"title":"微信小程序-behaviors","date":"2023-05-16T15:48:50.000Z","date_formatted":{"ll":"May 16, 2023","L":"05/16/2023","MM-DD":"05-16"},"link":"2023/05/16/Web/微信小程序/behaviors/48-微信小程序-behaviors","tags":["微信小程序"],"updated":"2023-05-16T16:09:48.396Z","content":"<h1 id=\"什么是-behaviors\">什么是 behaviors<a title=\"#什么是-behaviors\" href=\"#什么是-behaviors\"></a></h1>\n<ul>\n<li>behaviors 是用于组件间代码共享的特性，类似于一些编程语言中的 “mixins”</li>\n<li>每个 behavior 可以包含一组属性，数据，生命周期函数和方法，组件引用它时，它的属性，数据和方法会被合并到组件中，生命周期函数也会在对应时机被调用。每个组件可以引用多个 behavior，behavior 也可以引用其它 behavior。</li>\n</ul>\n<p>?&gt; 大白话：用来封装多个组件中相同的冗余代码</p>\n<p>新建两个组件，一个叫 c-test，一个为 c-demo，两个组件的内容大致就是有一个 <code>counter</code> 变量，每一个组件中有两个按钮，一个按钮点击对 counter 进行增加，一个对 counter 进行减少，然后我们可以将这种冗余的代码进行使用 behavior 进行封装复用，我这里就没有用案例去引出 behavior 的方式进行讲解了，我只是体现这一下 behavior 这个知识点的运用。</p>\n<p>?&gt; myBehaviors.js</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-comment\">// myBehavior.js</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> counterBehavior = <span class=\"hljs-title class_\">Behavior</span>(&#123;<br>  <span class=\"hljs-attr\">data</span>: &#123;<br>    <span class=\"hljs-attr\">counter</span>: <span class=\"hljs-number\">0</span><br>  &#125;,<br>  <span class=\"hljs-attr\">methods</span>: &#123;<br>    <span class=\"hljs-title function_\">increase</span>(<span class=\"hljs-params\"></span>) &#123;<br>      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">setData</span>(&#123;<span class=\"hljs-attr\">counter</span>: <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">data</span>.<span class=\"hljs-property\">counter</span> + <span class=\"hljs-number\">1</span>&#125;);<br>    &#125;,<br>    <span class=\"hljs-title function_\">decrease</span>(<span class=\"hljs-params\"></span>) &#123;<br>      <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">setData</span>(&#123;<span class=\"hljs-attr\">counter</span>: <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">data</span>.<span class=\"hljs-property\">counter</span> - <span class=\"hljs-number\">1</span>&#125;);<br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>\n<p>?&gt; c-test</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-comment\">// components/c-test/c-test.js</span><br><span class=\"hljs-keyword\">import</span> &#123;counterBehavior&#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;../../behaviors/myBehaviors&quot;</span>;<br><span class=\"hljs-title class_\">Component</span>(&#123;<br>  <span class=\"hljs-attr\">behaviors</span>: [counterBehavior]<br>&#125;)<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs wxml\">&lt;!--components/c-test/c-test.wxml--&gt;<br>&lt;text&gt;&#123;&#123;counter&#125;&#125;&lt;/text&gt;<br>&lt;button bindtap=&quot;increase&quot;&gt;我是c-test按钮 increase&lt;/button&gt;<br>&lt;button bindtap=&quot;decrease&quot;&gt;我是c-test按钮 decrease&lt;/button&gt;<br></code></pre></td></tr></table></figure>\n<p>?&gt; c-demo</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-comment\">// components/c-demo/c-demo.js</span><br><span class=\"hljs-keyword\">import</span> &#123;counterBehavior&#125; <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&quot;../../behaviors/myBehaviors&quot;</span>;<br><br><span class=\"hljs-title class_\">Component</span>(&#123;<br>  <span class=\"hljs-attr\">behaviors</span>: [counterBehavior]<br>&#125;)<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs wxml\">&lt;!--components/c-demo/c-demo.wxml--&gt;<br>&lt;text&gt;&#123;&#123;counter&#125;&#125;&lt;/text&gt;<br>&lt;button bindtap=&quot;increase&quot;&gt;我是c-demo按钮 increase&lt;/button&gt;<br>&lt;button bindtap=&quot;decrease&quot;&gt;我是c-demo按钮 decrease&lt;/button&gt;<br></code></pre></td></tr></table></figure>\n<p>?&gt; index</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs wxml\">&lt;!--index.wxml--&gt;<br>&lt;myTest /&gt;<br>&lt;view/&gt;<br>&lt;myDemo /&gt;<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\"><span class=\"hljs-punctuation\">&#123;</span><br>  <span class=\"hljs-attr\">&quot;usingComponents&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">&#123;</span><br>    <span class=\"hljs-attr\">&quot;myTest&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;/components/c-test/c-test&quot;</span><span class=\"hljs-punctuation\">,</span><br>    <span class=\"hljs-attr\">&quot;myDemo&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;/components/c-demo/c-demo&quot;</span><br>  <span class=\"hljs-punctuation\">&#125;</span><br><span class=\"hljs-punctuation\">&#125;</span><br></code></pre></td></tr></table></figure>\n<h1 id=\"参考文章\">参考文章<a title=\"#参考文章\" href=\"#参考文章\"></a></h1>\n<p>官方文档：<a href=\"https://developers.weixin.qq.com/miniprogram/dev/reference/api/Behavior.html\" target=\"_blank\">https://developers.weixin.qq.com/miniprogram/dev/reference/api/Behavior.html</a></p>\n<p>!&gt; 最终 behavior 是将中的内容分别复制了一份放到了对应使用的组件当中</p>\n","prev":{"title":"微信小程序-双线程渲染模型","link":"2023/05/17/Web/微信小程序/双线程渲染模型/49-微信小程序-双线程渲染模型"},"next":{"title":"微信小程序-多个插槽-具名插槽","link":"2023/05/16/Web/微信小程序/插槽/47-微信小程序-多个插槽-具名插槽"},"plink":"http://example.com/2023/05/16/Web/微信小程序/behaviors/48-微信小程序-behaviors/","toc":[{"id":"什么是-behaviors","title":"什么是 behaviors","index":"1"},{"id":"参考文章","title":"参考文章","index":"2"}],"reading_time":"488 words in 3 min"}