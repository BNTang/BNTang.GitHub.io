{"title":"TienChin-课程管理-展示课程列表","date":"2023-09-23T15:18:18.000Z","date_formatted":{"ll":"Sep 23, 2023","L":"09/23/2023","MM-DD":"09-23"},"link":"2023/09/23/项目/TienChin 健身系统/2023-6-11/课程管理/45-TienChin-课程管理-展示课程列表","tags":["项目"],"updated":"2023-09-24T02:56:43.314Z","content":"<h1 id=\"配置按钮权限\">配置按钮权限<a title=\"#配置按钮权限\" href=\"#配置按钮权限\"></a></h1>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202309/2105804-20230923232747555-441334510.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>博主这里就不贴SQL了，自行手动添加一下吧。</p>\n<h1 id=\"更改表结构\">更改表结构<a title=\"#更改表结构\" href=\"#更改表结构\"></a></h1>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">ALTER</span> <span class=\"hljs-keyword\">TABLE</span> `tienchin_course` <br>MODIFY <span class=\"hljs-keyword\">COLUMN</span> `info` <span class=\"hljs-type\">varchar</span>(<span class=\"hljs-number\">255</span>) <span class=\"hljs-keyword\">NULL</span> <span class=\"hljs-keyword\">DEFAULT</span> <span class=\"hljs-keyword\">NULL</span> COMMENT <span class=\"hljs-string\">&#x27;课程简介&#x27;</span> AFTER `apply_to`;<br></code></pre></td></tr></table></figure>\n<h1 id=\"后端\">后端<a title=\"#后端\" href=\"#后端\"></a></h1>\n<h2 id=\"更改实体类数据类型\">更改实体类数据类型<a title=\"#更改实体类数据类型\" href=\"#更改实体类数据类型\"></a></h2>\n<p>Course.java：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 课程简介</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">private</span> String info;<br><br><span class=\"hljs-comment\">// get set 略过</span><br></code></pre></td></tr></table></figure>\n<h2 id=\"插入测试数据\">插入测试数据<a title=\"#插入测试数据\" href=\"#插入测试数据\"></a></h2>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> `TienChin`.`tienchin_course` (`course_id`, `type`, `name`, `price`, `apply_to`, `info`, `remark`, `create_by`, `update_by`, `create_time`, `update_time`, `del_flag`) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&#x27;爵士舞&#x27;</span>, <span class=\"hljs-number\">2999</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&#x27;爵士舞入门&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-string\">&#x27;2023-09-24 02:11:21&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>);<br></code></pre></td></tr></table></figure>\n<h2 id=\"coursecontroller.java\">CourseController.java<a title=\"#coursecontroller.java\" href=\"#coursecontroller.java\"></a></h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * &lt;p&gt;</span><br><span class=\"hljs-comment\"> *  前端控制器</span><br><span class=\"hljs-comment\"> * &lt;/p&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023-09-23</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@RestController</span><br><span class=\"hljs-meta\">@RequestMapping(&quot;/tienchin/course&quot;)</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CourseController</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">BaseController</span> &#123;<br><br>    <span class=\"hljs-meta\">@Resource</span><br>    <span class=\"hljs-keyword\">private</span> ICourseService iCourseService;<br><br>    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasPermission(&#x27;tienchin:course:list&#x27;)&quot;)</span><br>    <span class=\"hljs-meta\">@GetMapping(&quot;/list&quot;)</span><br>    TableDataInfo <span class=\"hljs-title function_\">list</span><span class=\"hljs-params\">()</span> &#123;<br>        startPage();<br>        <span class=\"hljs-keyword\">return</span> getDataTable(iCourseService.selectCourseList());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"icourseservice.java\">ICourseService.java<a title=\"#icourseservice.java\" href=\"#icourseservice.java\"></a></h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * &lt;p&gt;</span><br><span class=\"hljs-comment\"> * 服务类</span><br><span class=\"hljs-comment\"> * &lt;/p&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023-09-23</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">ICourseService</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">IService</span>&lt;Course&gt; &#123;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 查询课程列表</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 课程列表</span><br><span class=\"hljs-comment\">     */</span><br>    List&lt;Course&gt; <span class=\"hljs-title function_\">selectCourseList</span><span class=\"hljs-params\">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"courseserviceimpl.java\">CourseServiceImpl.java<a title=\"#courseserviceimpl.java\" href=\"#courseserviceimpl.java\"></a></h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * &lt;p&gt;</span><br><span class=\"hljs-comment\"> * 服务实现类</span><br><span class=\"hljs-comment\"> * &lt;/p&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023-09-23</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@Service</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CourseServiceImpl</span><br>        <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">ServiceImpl</span>&lt;CourseMapper, Course&gt;<br>        <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">ICourseService</span> &#123;<br><br>    <span class=\"hljs-meta\">@Resource</span><br>    <span class=\"hljs-keyword\">private</span> CourseMapper courseMapper;<br><br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> List&lt;Course&gt; <span class=\"hljs-title function_\">selectCourseList</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> courseMapper.selectCourseList();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"coursemapper.java\">CourseMapper.java<a title=\"#coursemapper.java\" href=\"#coursemapper.java\"></a></h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * &lt;p&gt;</span><br><span class=\"hljs-comment\"> *  Mapper 接口</span><br><span class=\"hljs-comment\"> * &lt;/p&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023-09-23</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">CourseMapper</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">BaseMapper</span>&lt;Course&gt; &#123;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 查询课程列表</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 课程列表</span><br><span class=\"hljs-comment\">     */</span><br>    List&lt;Course&gt; <span class=\"hljs-title function_\">selectCourseList</span><span class=\"hljs-params\">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"coursemapper.xml\">CourseMapper.xml<a title=\"#coursemapper.xml\" href=\"#coursemapper.xml\"></a></h2>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">&quot;1.0&quot;</span> encoding=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">mapper</span> <span class=\"hljs-keyword\">PUBLIC</span> <span class=\"hljs-string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class=\"hljs-string\">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">mapper</span> <span class=\"hljs-attr\">namespace</span>=<span class=\"hljs-string\">&quot;top.it6666.course.mapper.CourseMapper&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">select</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;selectCourseList&quot;</span> <span class=\"hljs-attr\">resultType</span>=<span class=\"hljs-string\">&quot;top.it6666.course.entity.Course&quot;</span>&gt;</span><br>        SELECT *<br>        FROM tienchin_course<br>        WHERE del_flag = 0<br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">select</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure>\n<h1 id=\"前端\">前端<a title=\"#前端\" href=\"#前端\"></a></h1>\n<h2 id=\"course.js\">course.js<a title=\"#course.js\" href=\"#course.js\"></a></h2>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs js\"><span class=\"hljs-keyword\">import</span> request <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@/utils/request&#x27;</span><br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 查询课程列表</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> query 查询条件参数</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@returns</span> &#123;<span class=\"hljs-type\">*</span>&#125; 查询结果</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">listCourse</span>(<span class=\"hljs-params\">query</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/course/list&#x27;</span>,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;get&#x27;</span>,<br>        <span class=\"hljs-attr\">params</span>: query<br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 查询渠道列表</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@returns</span> &#123;<span class=\"hljs-type\">*</span>&#125; 查询结果</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">listChannel</span>(<span class=\"hljs-params\"></span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity/channel/list&#x27;</span>,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;get&#x27;</span><br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 查询课程详细</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> activityId 课程ID</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@returns</span> &#123;<span class=\"hljs-type\">*</span>&#125; 查询结果</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getInfo</span>(<span class=\"hljs-params\">activityId</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity/&#x27;</span> + activityId,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;get&#x27;</span><br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">// 查询课程详细</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getCourse</span>(<span class=\"hljs-params\">activityId</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity/&#x27;</span> + activityId,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;get&#x27;</span><br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">// 新增课程</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">addCourse</span>(<span class=\"hljs-params\">data</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity&#x27;</span>,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;post&#x27;</span>,<br>        <span class=\"hljs-attr\">data</span>: data<br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">// 修改课程</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">updateCourse</span>(<span class=\"hljs-params\">data</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity&#x27;</span>,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;put&#x27;</span>,<br>        <span class=\"hljs-attr\">data</span>: data<br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">// 删除课程</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">delCourse</span>(<span class=\"hljs-params\">activityIds</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity/&#x27;</span> + activityIds,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;delete&#x27;</span><br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"index.vue\">index.vue<a title=\"#index.vue\" href=\"#index.vue\"></a></h2>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br><span class=\"line\">329</span><br><span class=\"line\">330</span><br><span class=\"line\">331</span><br><span class=\"line\">332</span><br><span class=\"line\">333</span><br><span class=\"line\">334</span><br><span class=\"line\">335</span><br><span class=\"line\">336</span><br><span class=\"line\">337</span><br><span class=\"line\">338</span><br><span class=\"line\">339</span><br><span class=\"line\">340</span><br><span class=\"line\">341</span><br><span class=\"line\">342</span><br><span class=\"line\">343</span><br><span class=\"line\">344</span><br><span class=\"line\">345</span><br><span class=\"line\">346</span><br><span class=\"line\">347</span><br><span class=\"line\">348</span><br><span class=\"line\">349</span><br><span class=\"line\">350</span><br><span class=\"line\">351</span><br><span class=\"line\">352</span><br><span class=\"line\">353</span><br><span class=\"line\">354</span><br><span class=\"line\">355</span><br><span class=\"line\">356</span><br><span class=\"line\">357</span><br><span class=\"line\">358</span><br><span class=\"line\">359</span><br><span class=\"line\">360</span><br><span class=\"line\">361</span><br><span class=\"line\">362</span><br><span class=\"line\">363</span><br><span class=\"line\">364</span><br><span class=\"line\">365</span><br><span class=\"line\">366</span><br><span class=\"line\">367</span><br><span class=\"line\">368</span><br><span class=\"line\">369</span><br><span class=\"line\">370</span><br><span class=\"line\">371</span><br><span class=\"line\">372</span><br><span class=\"line\">373</span><br><span class=\"line\">374</span><br><span class=\"line\">375</span><br><span class=\"line\">376</span><br><span class=\"line\">377</span><br><span class=\"line\">378</span><br><span class=\"line\">379</span><br><span class=\"line\">380</span><br><span class=\"line\">381</span><br><span class=\"line\">382</span><br><span class=\"line\">383</span><br><span class=\"line\">384</span><br><span class=\"line\">385</span><br><span class=\"line\">386</span><br><span class=\"line\">387</span><br><span class=\"line\">388</span><br><span class=\"line\">389</span><br><span class=\"line\">390</span><br><span class=\"line\">391</span><br><span class=\"line\">392</span><br><span class=\"line\">393</span><br><span class=\"line\">394</span><br><span class=\"line\">395</span><br><span class=\"line\">396</span><br><span class=\"line\">397</span><br><span class=\"line\">398</span><br><span class=\"line\">399</span><br><span class=\"line\">400</span><br><span class=\"line\">401</span><br><span class=\"line\">402</span><br><span class=\"line\">403</span><br><span class=\"line\">404</span><br><span class=\"line\">405</span><br><span class=\"line\">406</span><br><span class=\"line\">407</span><br><span class=\"line\">408</span><br><span class=\"line\">409</span><br><span class=\"line\">410</span><br><span class=\"line\">411</span><br><span class=\"line\">412</span><br><span class=\"line\">413</span><br><span class=\"line\">414</span><br><span class=\"line\">415</span><br><span class=\"line\">416</span><br><span class=\"line\">417</span><br><span class=\"line\">418</span><br><span class=\"line\">419</span><br><span class=\"line\">420</span><br><span class=\"line\">421</span><br><span class=\"line\">422</span><br><span class=\"line\">423</span><br><span class=\"line\">424</span><br><span class=\"line\">425</span><br><span class=\"line\">426</span><br><span class=\"line\">427</span><br><span class=\"line\">428</span><br><span class=\"line\">429</span><br><span class=\"line\">430</span><br><span class=\"line\">431</span><br><span class=\"line\">432</span><br><span class=\"line\">433</span><br><span class=\"line\">434</span><br><span class=\"line\">435</span><br><span class=\"line\">436</span><br><span class=\"line\">437</span><br><span class=\"line\">438</span><br><span class=\"line\">439</span><br><span class=\"line\">440</span><br><span class=\"line\">441</span><br><span class=\"line\">442</span><br><span class=\"line\">443</span><br><span class=\"line\">444</span><br><span class=\"line\">445</span><br><span class=\"line\">446</span><br><span class=\"line\">447</span><br><span class=\"line\">448</span><br><span class=\"line\">449</span><br><span class=\"line\">450</span><br><span class=\"line\">451</span><br><span class=\"line\">452</span><br><span class=\"line\">453</span><br><span class=\"line\">454</span><br><span class=\"line\">455</span><br><span class=\"line\">456</span><br><span class=\"line\">457</span><br><span class=\"line\">458</span><br><span class=\"line\">459</span><br><span class=\"line\">460</span><br><span class=\"line\">461</span><br><span class=\"line\">462</span><br><span class=\"line\">463</span><br><span class=\"line\">464</span><br><span class=\"line\">465</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs vue\">&lt;template&gt;<br>  &lt;div class=&quot;app-container&quot;&gt;<br>    &lt;el-form :model=&quot;queryParams&quot; ref=&quot;queryRef&quot; :inline=&quot;true&quot; v-show=&quot;showSearch&quot; label-width=&quot;68px&quot;&gt;<br>      &lt;el-form-item label=&quot;课程名称&quot; prop=&quot;courseName&quot;&gt;<br>        &lt;el-input<br>            v-model=&quot;queryParams.courseName&quot;<br>            placeholder=&quot;请输入课程名称&quot;<br>            clearable<br>            @keyup.enter=&quot;handleQuery&quot;<br>        /&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;el-form-item label=&quot;渠道名称&quot; prop=&quot;channelId&quot;&gt;<br>        &lt;el-select<br>            v-model=&quot;queryParams.channelId&quot;<br>            placeholder=&quot;请选择渠道名称&quot;<br>            clearable<br>        &gt;<br>          &lt;el-option<br>              v-for=&quot;channel in channelList&quot;<br>              :key=&quot;channel.channelId&quot;<br>              :label=&quot;channel.channelName&quot;<br>              :value=&quot;channel.channelId&quot;<br>          /&gt;<br>        &lt;/el-select&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;el-form-item label=&quot;课程状态&quot; prop=&quot;courseStatus&quot;&gt;<br>        &lt;el-select<br>            v-model=&quot;queryParams.courseStatus&quot;<br>            placeholder=&quot;请选择课程状态&quot;<br>            clearable<br>        &gt;<br>          &lt;el-option<br>              v-for=&quot;dict in course_status&quot;<br>              :key=&quot;dict.value&quot;<br>              :label=&quot;dict.label&quot;<br>              :value=&quot;dict.value&quot;<br>          /&gt;<br>        &lt;/el-select&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;el-form-item label=&quot;课程类型&quot; prop=&quot;courseType&quot;&gt;<br>        &lt;el-select<br>            v-model=&quot;queryParams.courseType&quot;<br>            placeholder=&quot;请选择课程类型&quot;<br>            clearable<br>        &gt;<br>          &lt;el-option<br>              v-for=&quot;dict in course_type&quot;<br>              :key=&quot;dict.value&quot;<br>              :label=&quot;dict.label&quot;<br>              :value=&quot;dict.value&quot;<br>          /&gt;<br>        &lt;/el-select&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;el-form-item&gt;<br>        &lt;el-button type=&quot;primary&quot; icon=&quot;Search&quot; @click=&quot;handleQuery&quot;&gt;搜索&lt;/el-button&gt;<br>        &lt;el-button icon=&quot;Refresh&quot; @click=&quot;resetQuery&quot;&gt;重置&lt;/el-button&gt;<br>      &lt;/el-form-item&gt;<br>    &lt;/el-form&gt;<br><br>    &lt;el-row :gutter=&quot;10&quot; class=&quot;mb8&quot;&gt;<br>      &lt;el-col :span=&quot;1.5&quot;&gt;<br>        &lt;el-button<br>            type=&quot;primary&quot;<br>            plain<br>            icon=&quot;Plus&quot;<br>            @click=&quot;handleAdd&quot;<br>            v-hasPermi=&quot;[&#x27;tienchin:course:create&#x27;]&quot;<br>        &gt;新增<br>        &lt;/el-button&gt;<br>      &lt;/el-col&gt;<br>      &lt;el-col :span=&quot;1.5&quot;&gt;<br>        &lt;el-button<br>            type=&quot;success&quot;<br>            plain<br>            icon=&quot;Edit&quot;<br>            :disabled=&quot;single&quot;<br>            @click=&quot;handleUpdate&quot;<br>            v-hasPermi=&quot;[&#x27;tienchin:course:edit&#x27;]&quot;<br>        &gt;修改<br>        &lt;/el-button&gt;<br>      &lt;/el-col&gt;<br>      &lt;el-col :span=&quot;1.5&quot;&gt;<br>        &lt;el-button<br>            type=&quot;danger&quot;<br>            plain<br>            icon=&quot;Delete&quot;<br>            :disabled=&quot;multiple&quot;<br>            @click=&quot;handleDelete&quot;<br>            v-hasPermi=&quot;[&#x27;tienchin:course:remove&#x27;]&quot;<br>        &gt;删除<br>        &lt;/el-button&gt;<br>      &lt;/el-col&gt;<br>      &lt;el-col :span=&quot;1.5&quot;&gt;<br>        &lt;el-button<br>            type=&quot;warning&quot;<br>            plain<br>            icon=&quot;Download&quot;<br>            @click=&quot;handleExport&quot;<br>            v-hasPermi=&quot;[&#x27;tienchin:course:export&#x27;]&quot;<br>        &gt;导出<br>        &lt;/el-button&gt;<br>      &lt;/el-col&gt;<br>      &lt;right-toolbar v-model:showSearch=&quot;showSearch&quot; @queryTable=&quot;getList&quot;&gt;&lt;/right-toolbar&gt;<br>    &lt;/el-row&gt;<br><br>    &lt;el-table v-loading=&quot;loading&quot; :data=&quot;courseList&quot; @selection-change=&quot;handleSelectionChange&quot;&gt;<br>      &lt;el-table-column type=&quot;selection&quot; width=&quot;55&quot; align=&quot;center&quot;/&gt;<br>      &lt;el-table-column label=&quot;课程编号&quot; align=&quot;center&quot; prop=&quot;courseId&quot; :show-overflow-tooltip=&quot;true&quot;/&gt;<br>      &lt;el-table-column label=&quot;课程类型&quot; align=&quot;center&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;dict-tag :options=&quot;course_type&quot; :value=&quot;scope.row.type&quot;/&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>      &lt;el-table-column label=&quot;课程名称&quot; align=&quot;center&quot; :show-overflow-tooltip=&quot;true&quot; prop=&quot;name&quot;/&gt;<br>      &lt;el-table-column label=&quot;课程价格&quot; align=&quot;center&quot; :show-overflow-tooltip=&quot;true&quot; prop=&quot;price&quot;/&gt;<br>      &lt;el-table-column label=&quot;课程适用人群&quot; align=&quot;center&quot; width=&quot;120&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;dict-tag :options=&quot;course_apply_to&quot; :value=&quot;scope.row.applyTo&quot;/&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>      &lt;el-table-column label=&quot;课程简介&quot; :show-overflow-tooltip=&quot;true&quot; width=&quot;180&quot; align=&quot;center&quot; prop=&quot;info&quot;/&gt;<br>      &lt;el-table-column label=&quot;课程备注&quot; :show-overflow-tooltip=&quot;true&quot; width=&quot;180&quot; align=&quot;center&quot; prop=&quot;remark&quot;/&gt;<br>      &lt;el-table-column label=&quot;创建时间&quot; align=&quot;center&quot; prop=&quot;createTime&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;span&gt;&#123;&#123; parseTime(scope.row.createTime) &#125;&#125;&lt;/span&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>      &lt;el-table-column label=&quot;操作&quot; align=&quot;center&quot; class-name=&quot;small-padding fixed-width&quot; width=&quot;150&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;el-button<br>              type=&quot;text&quot;<br>              icon=&quot;Edit&quot;<br>              @click=&quot;handleUpdate(scope.row)&quot;<br>              v-hasPermi=&quot;[&#x27;tienchin:course:edit&#x27;]&quot;<br>          &gt;修改<br>          &lt;/el-button&gt;<br>          &lt;el-button<br>              type=&quot;text&quot;<br>              icon=&quot;Delete&quot;<br>              @click=&quot;handleDelete(scope.row)&quot;<br>              v-hasPermi=&quot;[&#x27;tienchin:course:remove&#x27;]&quot;<br>          &gt;删除<br>          &lt;/el-button&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>    &lt;/el-table&gt;<br><br>    &lt;pagination<br>        v-show=&quot;total &gt; 0&quot;<br>        :total=&quot;total&quot;<br>        v-model:page=&quot;queryParams.pageNum&quot;<br>        v-model:limit=&quot;queryParams.pageSize&quot;<br>        @pagination=&quot;getList&quot;<br>    /&gt;<br><br>    &lt;!-- 添加或修改课程对话框 --&gt;<br>    &lt;el-dialog :title=&quot;title&quot; v-model=&quot;open&quot; width=&quot;500px&quot; append-to-body&gt;<br>      &lt;el-form ref=&quot;courseRef&quot; :model=&quot;form&quot; :rules=&quot;rules&quot; label-width=&quot;80px&quot;&gt;<br>        &lt;el-row&gt;<br>          &lt;el-col :span=&quot;12&quot;&gt;<br>            &lt;el-form-item label=&quot;渠道来源&quot; prop=&quot;channelId&quot;&gt;<br>              &lt;el-select<br>                  v-model=&quot;form.channelId&quot;<br>                  placeholder=&quot;请选择渠道来源&quot;<br>                  clearable<br>                  style=&quot;width: 240px;&quot;<br>              &gt;<br>                &lt;el-option<br>                    v-for=&quot;channel in channelList&quot;<br>                    :key=&quot;channel.channelId&quot;<br>                    :label=&quot;channel.channelName&quot;<br>                    :value=&quot;channel.channelId&quot;<br>                /&gt;<br>              &lt;/el-select&gt;<br>            &lt;/el-form-item&gt;<br>          &lt;/el-col&gt;<br>          &lt;el-col :span=&quot;12&quot;&gt;<br>            &lt;el-form-item label=&quot;课程名称&quot; prop=&quot;courseName&quot;&gt;<br>              &lt;el-input v-model=&quot;form.courseName&quot; placeholder=&quot;请输入课程名称&quot;/&gt;<br>            &lt;/el-form-item&gt;<br>          &lt;/el-col&gt;<br>        &lt;/el-row&gt;<br>        &lt;el-row&gt;<br>          &lt;el-col :span=&quot;24&quot;&gt;<br>            &lt;el-form-item label=&quot;课程时间&quot; style=&quot;width: 100%;&quot; prop=&quot;courseTime&quot;&gt;<br>              &lt;el-date-picker<br>                  style=&quot;width: 100%;&quot;<br>                  v-model=&quot;form.courseTime&quot;<br>                  format=&quot;YYYY-MM-DD HH:mm:ss&quot;<br>                  type=&quot;datetimerange&quot;<br>                  range-separator=&quot;-&quot;<br>                  start-placeholder=&quot;开始日期&quot;<br>                  end-placeholder=&quot;结束日期&quot;<br>              /&gt;<br>            &lt;/el-form-item&gt;<br>          &lt;/el-col&gt;<br>        &lt;/el-row&gt;<br>        &lt;el-row&gt;<br>          &lt;el-col :span=&quot;12&quot;&gt;<br>            &lt;el-form-item label=&quot;课程简介&quot; prop=&quot;courseInfo&quot;&gt;<br>              &lt;el-input v-model=&quot;form.courseInfo&quot; placeholder=&quot;请输入课程简介&quot;/&gt;<br>            &lt;/el-form-item&gt;<br>          &lt;/el-col&gt;<br>          &lt;el-col :span=&quot;12&quot;&gt;<br>            &lt;el-form-item label=&quot;课程类型&quot; prop=&quot;courseType&quot;&gt;<br>              &lt;el-select<br>                  v-model=&quot;form.courseType&quot;<br>                  placeholder=&quot;请选择课程类型&quot;<br>                  clearable<br>                  style=&quot;width: 240px;&quot;<br>              &gt;<br>                &lt;el-option<br>                    v-for=&quot;dict in course_type&quot;<br>                    :key=&quot;dict.value&quot;<br>                    :label=&quot;dict.label&quot;<br>                    :value=&quot;parseInt(dict.value)&quot;<br>                /&gt;<br>              &lt;/el-select&gt;<br>            &lt;/el-form-item&gt;<br>          &lt;/el-col&gt;<br>        &lt;/el-row&gt;<br>        &lt;el-row&gt;<br>          &lt;el-col :span=&quot;15&quot;&gt;<br>            &lt;el-form-item label=&quot;折扣券&quot; prop=&quot;discount&quot; v-if=&quot;parseInt(form.courseType) === 1&quot;&gt;<br>              &lt;el-input-number<br>                  v-model=&quot;form.discount&quot;<br>                  placeholder=&quot;请输入折扣值&quot;<br>                  :precision=&quot;2&quot;<br>                  :step=&quot;0.1&quot;<br>                  :max=&quot;10&quot;<br>                  :min=&quot;0&quot;<br>                  style=&quot;width: 100%;&quot;<br>              /&gt;<br>            &lt;/el-form-item&gt;<br>            &lt;el-form-item label=&quot;代金券&quot; prop=&quot;voucher&quot; v-if=&quot;parseInt(form.courseType) === 2&quot;&gt;<br>              &lt;el-input-number<br>                  v-model=&quot;form.voucher&quot;<br>                  placeholder=&quot;请输入代金券面值&quot;<br>                  :precision=&quot;2&quot;<br>                  :step=&quot;100&quot;<br>                  :min=&quot;0&quot;<br>                  style=&quot;width: 100%;&quot;<br>              /&gt;<br>            &lt;/el-form-item&gt;<br>          &lt;/el-col&gt;<br>        &lt;/el-row&gt;<br>        &lt;el-form-item label=&quot;备注&quot; prop=&quot;remark&quot;&gt;<br>          &lt;el-input v-model=&quot;form.remark&quot; type=&quot;textarea&quot; placeholder=&quot;请输入内容&quot;/&gt;<br>        &lt;/el-form-item&gt;<br>      &lt;/el-form&gt;<br>      &lt;template #footer&gt;<br>        &lt;div class=&quot;dialog-footer&quot;&gt;<br>          &lt;el-button type=&quot;primary&quot; @click=&quot;submitForm&quot;&gt;确 定&lt;/el-button&gt;<br>          &lt;el-button @click=&quot;cancel&quot;&gt;取 消&lt;/el-button&gt;<br>        &lt;/div&gt;<br>      &lt;/template&gt;<br>    &lt;/el-dialog&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup name=&quot;Course&quot;&gt;<br>import &#123;<br>  addCourse,<br>  listCourse,<br>  listChannel,<br>  getInfo,<br>  updateCourse,<br>  delCourse<br>&#125; from &quot;@/api/tienchin/course&quot;;<br><br>const &#123;proxy&#125; = getCurrentInstance();<br>const &#123;<br>  course_type,<br>  course_apply_to,<br>&#125; = proxy.useDict(&#x27;course_type&#x27;, &#x27;course_apply_to&#x27;);<br><br>const courseList = ref([]);<br>const channelList = ref([]);<br>const open = ref(false);<br>const loading = ref(true);<br>const showSearch = ref(true);<br>const ids = ref([]);<br>const single = ref(true);<br>const multiple = ref(true);<br>const total = ref(0);<br>const title = ref(&quot;&quot;);<br><br>const data = reactive(&#123;<br>  form: &#123;&#125;,<br>  queryParams: &#123;<br>    pageNum: 1,<br>    pageSize: 10,<br>    courseName: undefined,<br>    channelId: undefined,<br>    courseStatus: undefined,<br>    courseType: undefined<br>  &#125;,<br>  rules: &#123;<br>    channelId: [&#123;required: true, message: &quot;渠道来源不能为空&quot;, trigger: &quot;blur&quot;&#125;],<br>    courseName: [&#123;required: true, message: &quot;课程名称不能为空&quot;, trigger: &quot;blur&quot;&#125;],<br>    courseTime: [&#123;required: true, message: &quot;课程时间不能为空&quot;, trigger: &quot;blur&quot;&#125;],<br>    courseInfo: [&#123;required: true, message: &quot;课程简介不能为空&quot;, trigger: &quot;blur&quot;&#125;],<br>    courseType: [&#123;required: true, message: &quot;课程类型不能为空&quot;, trigger: &quot;blur&quot;&#125;],<br>    discount: [&#123;required: true, message: &quot;折扣值不能为空&quot;, trigger: &quot;blur&quot;&#125;],<br>    voucher: [&#123;required: true, message: &quot;代金券面值不能为空&quot;, trigger: &quot;blur&quot;&#125;]<br>  &#125;<br>&#125;);<br><br>const &#123;queryParams, form, rules&#125; = toRefs(data);<br><br>/** 查询课程列表 */<br>function getList() &#123;<br>  loading.value = true;<br>  listCourse(queryParams.value).then(response =&gt; &#123;<br>    courseList.value = response.rows;<br>    total.value = response.total;<br>    loading.value = false;<br>  &#125;);<br>&#125;<br><br>/** 取消按钮 */<br>function cancel() &#123;<br>  open.value = false;<br>  reset();<br>&#125;<br><br>/** 表单重置 */<br>function reset() &#123;<br>  form.value = &#123;<br>    channelId: undefined,<br>    courseName: undefined,<br>    courseTime: undefined,<br>    courseInfo: undefined,<br>    courseType: undefined,<br>    discount: undefined,<br>    voucher: undefined,<br>    remark: undefined<br>  &#125;;<br>  proxy.resetForm(&quot;courseRef&quot;);<br>&#125;<br><br>/** 搜索按钮操作 */<br>function handleQuery() &#123;<br>  queryParams.value.pageNum = 1;<br>  getList();<br>&#125;<br><br>/** 重置按钮操作 */<br>function resetQuery() &#123;<br>  proxy.resetForm(&quot;queryRef&quot;);<br>  handleQuery();<br>&#125;<br><br>/** 多选框选中数据 */<br>function handleSelectionChange(selection) &#123;<br>  ids.value = selection.map(item =&gt; item.courseId);<br>  single.value = selection.length !== 1;<br>  multiple.value = !selection.length;<br>&#125;<br><br>/** 新增按钮操作 */<br>function handleAdd() &#123;<br>  reset();<br>  // handelChannelList();<br>  open.value = true;<br>  title.value = &quot;添加课程&quot;;<br>&#125;<br><br>/** 修改按钮操作 */<br>function handleUpdate(row) &#123;<br>  reset();<br>  // 加载渠道列表<br>  // handelChannelList();<br><br>  const courseId = row.courseId || ids.value;<br>  getInfo(courseId).then(response =&gt; &#123;<br>    form.value = response.data;<br>    form.value.courseTime = [form.value.beginTime, form.value.endTime];<br><br>    open.value = true;<br>    title.value = &quot;修改课程&quot;;<br>  &#125;);<br>&#125;<br><br>/** 提交按钮 */<br>function submitForm() &#123;<br>  proxy.$refs[&quot;courseRef&quot;].validate(valid =&gt; &#123;<br>    if (valid) &#123;<br>      if (form.value.courseId !== undefined) &#123;<br>        form.value.beginTime = formatDate(form.value.courseTime[0]);<br>        form.value.endTime = formatDate(form.value.courseTime[1]);<br><br>        // 删除掉，form 中的 updateTime 字段<br>        // 删除掉，form 中的 createTime 字段<br>        delete form.value.updateTime;<br>        delete form.value.createTime;<br><br>        updateCourse(form.value).then(response =&gt; &#123;<br>          proxy.$modal.msgSuccess(&quot;修改成功&quot;);<br>          open.value = false;<br>          getList();<br>        &#125;);<br>      &#125; else &#123;<br>        form.value.beginTime = formatDate(form.value.courseTime[0]);<br>        form.value.endTime = formatDate(form.value.courseTime[1]);<br>        addCourse(form.value).then(response =&gt; &#123;<br>          proxy.$modal.msgSuccess(&quot;新增成功&quot;);<br>          open.value = false;<br>          getList();<br>        &#125;);<br>      &#125;<br>    &#125;<br>  &#125;);<br>&#125;<br><br>/** 删除按钮操作 */<br>function handleDelete(row) &#123;<br>  const courseIds = row.courseId || ids.value;<br>  proxy.$modal.confirm(&#x27;是否确认删除课程编号为&quot;&#x27; + courseIds + &#x27;&quot;的数据项？&#x27;).then(function () &#123;<br>    return delCourse(courseIds);<br>  &#125;).then(() =&gt; &#123;<br>    getList();<br>    proxy.$modal.msgSuccess(&quot;删除成功&quot;);<br>  &#125;).catch(() =&gt; &#123;<br>  &#125;);<br>&#125;<br><br>/** 导出按钮操作 */<br>function handleExport() &#123;<br>  proxy.download(&quot;tienchin/course/export&quot;, &#123;<br>    ...queryParams.value<br>  &#125;, `course_$&#123;new Date().getTime()&#125;.xlsx`);<br>&#125;<br><br>/**<br> * 获取渠道列表<br> */<br>function handelChannelList() &#123;<br>  listChannel().then(response =&gt; &#123;<br>    channelList.value = response.data;<br>  &#125;);<br>&#125;<br><br>function formatDate(isoDateString) &#123;<br>  // 创建一个新的日期对象<br>  var date = new Date(isoDateString);<br><br>  // 提取年、月、日、小时、分钟和秒<br>  var year = date.getFullYear();<br>  var month = (date.getMonth() + 1).toString().padStart(2, &quot;0&quot;);<br>  var day = date.getDate().toString().padStart(2, &quot;0&quot;);<br>  var hours = date.getHours().toString().padStart(2, &quot;0&quot;);<br>  var minutes = date.getMinutes().toString().padStart(2, &quot;0&quot;);<br>  var seconds = date.getSeconds().toString().padStart(2, &quot;0&quot;);<br><br>  // 构建格式化后的日期时间字符串<br>  var formattedDate = year + &quot;-&quot; + month + &quot;-&quot; + day + &quot; &quot; + hours + &quot;:&quot; + minutes + &quot;:&quot; + seconds;<br><br>  // 返回格式化后的日期时间字符串<br>  return formattedDate;<br>&#125;<br><br>handelChannelList();<br>getList();<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>","prev":{"title":"TienChin-课程管理-添加课程接口","link":"2023/09/24/项目/TienChin 健身系统/2023-6-11/课程管理/46-TienChin-课程管理-添加课程接口"},"next":{"title":"TienChin-课程管理-配置课程字典","link":"2023/09/23/项目/TienChin 健身系统/2023-6-11/课程管理/44-TienChin-课程管理-配置课程字典"},"plink":"http://example.com/2023/09/23/项目/TienChin 健身系统/2023-6-11/课程管理/45-TienChin-课程管理-展示课程列表/","toc":[{"id":"配置按钮权限","title":"配置按钮权限","index":"1"},{"id":"更改表结构","title":"更改表结构","index":"2"},{"id":"后端","title":"后端","index":"3","children":[{"id":"更改实体类数据类型","title":"更改实体类数据类型","index":"3.1"},{"id":"插入测试数据","title":"插入测试数据","index":"3.2"},{"id":"coursecontroller.java","title":"CourseController.java","index":"3.3"},{"id":"icourseservice.java","title":"ICourseService.java","index":"3.4"},{"id":"courseserviceimpl.java","title":"CourseServiceImpl.java","index":"3.5"},{"id":"coursemapper.java","title":"CourseMapper.java","index":"3.6"},{"id":"coursemapper.xml","title":"CourseMapper.xml","index":"3.7"}]},{"id":"前端","title":"前端","index":"4","children":[{"id":"course.js","title":"course.js","index":"4.1"},{"id":"index.vue","title":"index.vue","index":"4.2"}]}],"reading_time":"2828 words in 19 min"}