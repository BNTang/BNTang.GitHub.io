{"title":"微信小程序-小程序事件绑定","date":"2023-04-14T13:28:29.000Z","date_formatted":{"ll":"Apr 14, 2023","L":"04/14/2023","MM-DD":"04-14"},"link":"2023/04/14/Web/微信小程序/event/26-微信小程序-小程序事件绑定","tags":["微信小程序"],"updated":"2023-04-16T03:58:54.505Z","content":"<h1 id=\"什么是事件\">什么是事件<a title=\"#什么是事件\" href=\"#什么是事件\"></a></h1>\n<ul>\n<li>事件是视图层到逻辑层的通讯方式。</li>\n<li>事件可以将用户的行为反馈到逻辑层进行处理。</li>\n<li>事件可以绑定在组件上，当达到触发事件，就会执行逻辑层中对应的事件处理函数。</li>\n<li>事件对象可以携带额外信息，如 id, dataset, touches。</li>\n</ul>\n<h1 id=\"常见事件\">常见事件<a title=\"#常见事件\" href=\"#常见事件\"></a></h1>\n<ul>\n<li>tap：手指触摸后马上离开</li>\n<li>longpress：手指触摸后，超过350ms再离开，如果指定了事件回调函数并触发了这个事件，tap事件将不被触发</li>\n<li>touchstart：手指触摸动作开始</li>\n<li>touchmove：手指触摸后移动</li>\n<li>touchcancel：手指触摸动作被打断，如来电提醒，弹窗</li>\n<li>touchend：手指触摸动作结束</li>\n</ul>\n<h1 id=\"如何绑定事件\">如何绑定事件<a title=\"#如何绑定事件\" href=\"#如何绑定事件\"></a></h1>\n<p>bind：绑定冒泡事件<br>\ncapture-bind：绑定捕获事件<br>\ncatch：阻止冒泡事件<br>\ncapture-catch：阻止捕获事件</p>\n<blockquote>\n<p>绑定事件示例:</p>\n</blockquote>\n<p>index.wxml:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">bind:tap</span>=<span class=\"hljs-string\">&quot;onTap&quot;</span>&gt;</span>我是bind<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">capture-bind:tap</span>=<span class=\"hljs-string\">&quot;onCaptureBind&quot;</span>&gt;</span>我是capture-bind<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">catch:tap</span>=<span class=\"hljs-string\">&quot;onCatch&quot;</span>&gt;</span>我是catch<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">capture-catch:tap</span>=<span class=\"hljs-string\">&quot;onCaptureCatch&quot;</span>&gt;</span>我是capture-catch<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br></code></pre></td></tr></table></figure>\n<p>index.js:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-attr\">onTap</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)&#123;<br>  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;onTap call&#x27;</span>);<br>&#125;,<br><span class=\"hljs-attr\">onCaptureBind</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)&#123;<br>  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;onCaptureBind call&#x27;</span>);<br>&#125;,<br><span class=\"hljs-attr\">onCatch</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)&#123;<br>  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;onCatch call&#x27;</span>);<br>&#125;,<br><span class=\"hljs-attr\">onCaptureCatch</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)&#123;<br>  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;onCaptureCatch call&#x27;</span>);<br>&#125;,<br></code></pre></td></tr></table></figure>\n<blockquote>\n<p>常见事件示例:</p>\n</blockquote>\n<p>index.wxml:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">bind:tap</span>=<span class=\"hljs-string\">&quot;onTap&quot;</span>&gt;</span>手指触摸后马上离开<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">bind:longpress</span>=<span class=\"hljs-string\">&quot;onLongpress&quot;</span>&gt;</span>手指触摸后，超过350ms再离开，如果指定了事件回调函数并触发了这个事件，tap事件将不被触发<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">bind:touchstart</span>=<span class=\"hljs-string\">&quot;onTouchstart&quot;</span>&gt;</span>手指触摸动作开始<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">bind:touchmove</span>=<span class=\"hljs-string\">&quot;onTouchmove&quot;</span>&gt;</span>手指触摸后移动<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">bind:touchend</span>=<span class=\"hljs-string\">&quot;onTouchend&quot;</span>&gt;</span>手指触摸动作结束<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br></code></pre></td></tr></table></figure>\n<p>index.js:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-attr\">onTap</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)&#123;<br>  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;onTap call&#x27;</span>);<br>&#125;,<br><span class=\"hljs-attr\">onLongpress</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)&#123;<br>  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;onLongpress call&#x27;</span>);<br>&#125;,<br><span class=\"hljs-attr\">onTouchstart</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)&#123;<br>  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;onTouchstart call&#x27;</span>);<br>&#125;,<br><span class=\"hljs-attr\">onTouchmove</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)&#123;<br>  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;onTouchmove call&#x27;</span>);<br>&#125;,<br><span class=\"hljs-attr\">onTouchend</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)&#123;<br>  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;onTouchend call&#x27;</span>);<br>&#125;,<br></code></pre></td></tr></table></figure>\n<p>!&gt; touchcancel：手指触摸动作被打断，如来电提醒，弹窗</p>\n<p>index.wxml:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">view</span> <span class=\"hljs-attr\">bind:touchcancel</span>=<span class=\"hljs-string\">&quot;onTouchcancel&quot;</span>&gt;</span>手指触摸动作被打断，如来电提醒，弹窗<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">view</span>&gt;</span><br></code></pre></td></tr></table></figure>\n<p>index.js:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-attr\">onTouchcancel</span>: <span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)&#123;<br>  <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&#x27;onTouchcancel call&#x27;</span>);<br>&#125;,<br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 生命周期函数--监听页面加载</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-attr\">onLoad</span>: <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">options</span>) &#123;<br>  <span class=\"hljs-built_in\">setTimeout</span>(<span class=\"hljs-function\">()=&gt;</span>&#123;<br>    wx.<span class=\"hljs-title function_\">showModal</span>(&#123;<br>      <span class=\"hljs-attr\">title</span>: <span class=\"hljs-string\">&#x27;我是弹窗&#x27;</span>,<br>      <span class=\"hljs-attr\">content</span>: <span class=\"hljs-string\">&#x27;我是弹窗内容&#x27;</span><br>    &#125;);<br>  &#125;, <span class=\"hljs-number\">3000</span>);<br>&#125;,<br></code></pre></td></tr></table></figure>\n<p>我这里使用了弹窗来进行模拟触摸被打断，编译好了代码点击页面的view，然后等待定时器3s，会发现弹窗出来了，我们的打断方法回调就被执行了。</p>\n","prev":{"title":"微信小程序-小程序事件冒泡和事件捕获","link":"2023/04/16/Web/微信小程序/event/27-微信小程序-小程序事件冒泡和事件捕获"},"next":{"title":"微信小程序-WXS支持的语法","link":"2023/04/14/Web/微信小程序/wxs/25-微信小程序-WXS支持的语法"},"plink":"http://example.com/2023/04/14/Web/微信小程序/event/26-微信小程序-小程序事件绑定/","toc":[{"id":"什么是事件","title":"什么是事件","index":"1"},{"id":"常见事件","title":"常见事件","index":"2"},{"id":"如何绑定事件","title":"如何绑定事件","index":"3"}],"reading_time":"617 words in 4 min"}