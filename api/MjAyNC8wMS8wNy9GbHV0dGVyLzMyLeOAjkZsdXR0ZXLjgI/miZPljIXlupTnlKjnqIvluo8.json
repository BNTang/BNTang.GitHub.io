{"title":"『Flutter』打包应用程序","date":"2024-01-07T14:41:12.000Z","date_formatted":{"ll":"Jan 7, 2024","L":"01/07/2024","MM-DD":"01-07"},"link":"2024/01/07/Flutter/32-『Flutter』打包应用程序","tags":["Flutter"],"updated":"2024-01-19T03:14:11.068Z","content":"<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240107224144919-1607380898.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<h1 id=\"1.前言\">1.前言<a title=\"#1.前言\" href=\"#1.前言\"></a></h1>\n<p>经过上一篇文章, 给大家写了一个计算器的项目，接下来就是打包应用程序了，也就是说我们可以把这个项目打包成一个应用程序，然后安装到手机上使用。</p>\n<h1 id=\"2.打包应用程序\">2.打包应用程序<a title=\"#2.打包应用程序\" href=\"#2.打包应用程序\"></a></h1>\n<p>首先我去官方文档找查找发现了一个打包应用程序的教程，地址：<a href=\"https://flutter.cn/docs/deployment\" target=\"_blank\">https://flutter.cn/docs/deployment</a></p>\n<p>这里面有很多的打包方式，我这里选择 <code>Android</code> 其它的只需要自己去照着文档操作就可以了。</p>\n<p>打包成 <code>Android</code> 应用程序我总结了一下主要步骤如下：</p>\n<h1 id=\"3.步骤\">3.步骤<a title=\"#3.步骤\" href=\"#3.步骤\"></a></h1>\n<h2 id=\"3.1.在-androidmanifest.xml-中设置应用名称\">3.1.在 AndroidManifest.xml 中设置应用名称<a title=\"#3.1.在-androidmanifest.xml-中设置应用名称\" href=\"#3.1.在-androidmanifest.xml-中设置应用名称\"></a></h2>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240107231007738-17074068.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"3.2.在-build.gradle-中设置应用的id\">3.2.在 build.gradle 中设置应用的ID<a title=\"#3.2.在-build.gradle-中设置应用的id\" href=\"#3.2.在-build.gradle-中设置应用的id\"></a></h2>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240107231237741-1697696150.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"3.3.在-res-中添加应用图标\">3.3.在 res 中添加应用图标<a title=\"#3.3.在-res-中添加应用图标\" href=\"#3.3.在-res-中添加应用图标\"></a></h2>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240107231523755-885752716.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>这个应用图标，可以让美工给，也可以自己找一些工具网站可以一键生成，只需要自己给一张图片，工具网站就会自动给你生成其他尺寸的图标文件。</p>\n<p>例如度娘搜索：<code>make application icons</code>，然后自己找一下即可。</p>\n<h2 id=\"3.4.配置签名\">3.4.配置签名<a title=\"#3.4.配置签名\" href=\"#3.4.配置签名\"></a></h2>\n<p>官方文档：<a href=\"https://flutter.cn/docs/deployment/android#%E4%B8%BA-app-%E7%AD%BE%E5%90%8D\" target=\"_blank\">https://flutter.cn/docs/deployment/android#为-app-签名</a></p>\n<p>在 Windows 系统上，在 PoweShell 内执行以下代码：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">keytool -genkey -v -keystore %userprofile%\\upload-keystore.jks ^<br>        -storetype JKS -keyalg RSA -keysize 2048 -validity 10000 ^<br>        -alias upload<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240107231946254-1484493968.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>将生成的秘钥拷贝到项目的 app 目录下：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240107232159415-1225338810.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>从 app 中引用密钥库：</p>\n<p>创建一个名为 <code>[project]/android/key.properties</code> 的文件，它包含了密钥库位置的定义。在替换内容时请去除 <code>&lt; &gt;</code> 括号：</p>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs properties\"><span class=\"hljs-attr\">storePassword</span>=<span class=\"hljs-string\">&lt;password-from-previous-step&gt;</span><br><span class=\"hljs-attr\">keyPassword</span>=<span class=\"hljs-string\">&lt;password-from-previous-step&gt;</span><br><span class=\"hljs-attr\">keyAlias</span>=<span class=\"hljs-string\">upload</span><br><span class=\"hljs-attr\">storeFile</span>=<span class=\"hljs-string\">&lt;keystore-file-location&gt;</span><br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240107232351528-1829302062.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>在 gradle 中配置签名：</p>\n<p>在以 release 模式下构建你的应用时，修改 <code>[project]/android/app/build.gradle</code> 文件，以通过 gradle 配置你的上传密钥。</p>\n<figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs tex\">def keystoreProperties = new Properties()<br>def keystorePropertiesFile = rootProject.file(&#x27;key.properties&#x27;)<br>if (keystorePropertiesFile.exists()) &#123;<br>    keystoreProperties.load(new FileInputStream(keystorePropertiesFile))<br>&#125;<br><br>android &#123;<br>\t...<br>&#125;<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240107232502608-804719760.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>找到 <code>buildTypes</code> 代码块, 将其替换为我们的配置内容：</p>\n<figure class=\"highlight tex\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs tex\">signingConfigs &#123;<br>    release &#123;<br>        keyAlias keystoreProperties[&#x27;keyAlias&#x27;]<br>        keyPassword keystoreProperties[&#x27;keyPassword&#x27;]<br>        storeFile keystoreProperties[&#x27;storeFile&#x27;] ? file(keystoreProperties[&#x27;storeFile&#x27;]) : null<br>        storePassword keystoreProperties[&#x27;storePassword&#x27;]<br>    &#125;<br>&#125;<br><br>buildTypes &#123;<br>    release &#123;<br>        signingConfig signingConfigs.release<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<p>到此我们需要配置的内容就已经完成了，接下来就是打包了。</p>\n<h2 id=\"3.5.打包\">3.5.打包<a title=\"#3.5.打包\" href=\"#3.5.打包\"></a></h2>\n<p>在终端中执行以下命令：</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs shell\">flutter build apk<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240107232943620-1269803317.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>好了，到这里我们的打包就完成了，接下来就是安装到手机上了（略过）。</p>\n<p>博主没有 mac 电脑，所以没有办法打包成 <code>IOS</code> 应用程序，如果有小伙伴有 mac 电脑，可以自己去尝试一下。参考官方文档即可，同一个世界同一个梦想的都是。</p>\n<h1 id=\"end\">End<a title=\"#end\" href=\"#end\"></a></h1>\n<blockquote>\n<ul>\n<li>🐤如果您对本文有任何疑问或想法，请在评论区留言，我将很乐意与您交流。</li>\n<li>🐰您的每一条评论对我都至关重要，我会尽快给予回复。</li>\n<li>🎈如果您觉得这篇文章对您有所启发或帮助，请不吝赞赏、收藏或分享。</li>\n<li>🎁您的每一个动作都是对我创作的最大鼓励和支持。</li>\n<li>👍谢谢您的阅读和陪伴！</li>\n<li>😁如果您觉得本文对您有所帮助，可以关注我的公众号 <code>BNTang</code>，我会不定期分享一些干货文章。</li>\n<li>🍻感谢您的支持，我会继续努力的！</li>\n</ul>\n</blockquote>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202312/2105804-20231211215004818-977875224.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"『prompt』开篇","link":"2024/01/09/AI/Prompt/01-『prompt』开篇"},"next":{"title":"『Flutter』项目实战(苹果计算器)处理计算逻辑","link":"2024/01/07/Flutter/31-『Flutter』项目实战(苹果计算器)处理计算逻辑"},"plink":"http://example.com/2024/01/07/Flutter/32-『Flutter』打包应用程序/","toc":[{"id":"1.前言","title":"1.前言","index":"1"},{"id":"2.打包应用程序","title":"2.打包应用程序","index":"2"},{"id":"3.步骤","title":"3.步骤","index":"3","children":[{"id":"3.1.在-androidmanifest.xml-中设置应用名称","title":"3.1.在 AndroidManifest.xml 中设置应用名称","index":"3.1"},{"id":"3.2.在-build.gradle-中设置应用的id","title":"3.2.在 build.gradle 中设置应用的ID","index":"3.2"},{"id":"3.3.在-res-中添加应用图标","title":"3.3.在 res 中添加应用图标","index":"3.3"},{"id":"3.4.配置签名","title":"3.4.配置签名","index":"3.4"},{"id":"3.5.打包","title":"3.5.打包","index":"3.5"}]},{"id":"end","title":"End","index":"4"}]}