{"title":"MongoDB-聚合操作额外配置","date":"2022-08-13T10:52:37.000Z","date_formatted":{"ll":"Aug 13, 2022","L":"08/13/2022","MM-DD":"08-13"},"link":"2022/08/13/MongoDB/03-MongoDB-聚合操作额外配置","tags":["MongoDB"],"updated":"2022-08-14T08:31:56.732Z","content":"<h1 id=\"聚合操作额外配置\">聚合操作额外配置<a title=\"#聚合操作额外配置\" href=\"#聚合操作额外配置\"></a></h1>\n<ul>\n<li>db.<collection>.aggregate(&lt;pipeline&gt;, <code>&lt;options&gt;</code>)</collection></li>\n</ul>\n<p>格式:</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">db.&lt;collection&gt;.aggregate(&lt;pipeline&gt;<span class=\"hljs-punctuation\">,</span> <span class=\"hljs-punctuation\">&#123;</span>allowDiskUse<span class=\"hljs-punctuation\">:</span> &lt;boolean&gt;<span class=\"hljs-punctuation\">&#125;</span>)<br></code></pre></td></tr></table></figure>\n<blockquote>\n<p><code>allowDiskUse</code> 默认取值是 <code>false</code>, 默认情况下管道阶段占用的内存不能超过 <code>100M</code>,如果超出 <code>100M</code> 就会报错, 如果需要处理的数据比较多, 聚合操作使用的内存可能超过 100M, 那么我们可以将 <code>allowDiskUse</code> 设置为 <code>true</code> 如果 allowDiskUse 设置为 true, 那么一旦 <code>超出</code> 100M 就会将操作的数据写入到临时文件中, 然后再继续操作</p>\n</blockquote>\n","prev":{"title":"MongoDB-聚合操作表达式","link":"2022/08/13/MongoDB/04-MongoDB-聚合操作表达式"},"next":{"title":"MongoDB-聚合操作$out","link":"2022/08/13/MongoDB/02-MongoDB-聚合操作$out"},"plink":"http://example.com/2022/08/13/MongoDB/03-MongoDB-聚合操作额外配置/","toc":[{"id":"聚合操作额外配置","title":"聚合操作额外配置","index":"1"}],"reading_time":"131 words in 1 min"}