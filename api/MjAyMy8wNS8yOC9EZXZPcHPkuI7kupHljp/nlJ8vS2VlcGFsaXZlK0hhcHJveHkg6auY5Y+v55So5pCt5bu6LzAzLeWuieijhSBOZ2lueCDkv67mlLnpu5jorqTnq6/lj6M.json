{"title":"安装 Nginx 修改默认端口","date":"2023-05-28T12:38:22.000Z","date_formatted":{"ll":"May 28, 2023","L":"05/28/2023","MM-DD":"05-28"},"link":"2023/05/28/DevOps与云原生/Keepalive+Haproxy 高可用搭建/03-安装 Nginx 修改默认端口","tags":["Keepalive+Haproxy 高可用搭建"],"updated":"2023-07-09T01:10:26.910Z","content":"<p>用远程工具连接我们上次购买的机器，这里我要介绍一个知识点，博主使用的工具是 MobaXterm，这个工具有一个多操作的功能，在下图的位置可以开启多操作，然后连接你的服务器机子即可：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230528204517594-1004624288.png\" alt=\"image-20230528204517285\" loading=\"lazy\" class=\"φbp\"></p>\n<p>首先我们将机子里面的依赖源都更新一下，在去安装 Nginx，在控制台输入如下命令进行更新：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">apt-get update<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230528205019916-358479717.png\" alt=\"image-20230528205019524\" loading=\"lazy\" class=\"φbp\"></p>\n<h1 id=\"安装-nginx\">安装 Nginx<a title=\"#安装-nginx\" href=\"#安装-nginx\"></a></h1>\n<p>在控制台输入如下命令:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">apt install nginx<br></code></pre></td></tr></table></figure>\n<p>输入完毕之后我们在访问我们的公网 IP 就会出现 Nginx 的欢迎界面的 HTML：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230528205233313-452774131.png\" alt=\"image-20230528205233102\" loading=\"lazy\" class=\"φbp\"></p>\n<p>这里我为了做一下区分我去更改一下这个界面显示的内容就是去更改这个 HTML 文件，因为我们是通过 apt install 的方式进行安装的所以它会放入到一个固定的目录下，我们去这个固定的目录下进行更改即可。</p>\n<p>固定目录地址：<code>cd /var/www/html</code>:</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-built_in\">cd</span> /var/www/html<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230528205513347-424982002.png\" alt=\"image-20230528205513187\" loading=\"lazy\" class=\"φbp\"></p>\n<p>用 VIM 编辑这个文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">vim index.nginx-debian.html<br></code></pre></td></tr></table></figure>\n<p>加入到文件按 i，进入输入模式，第一个我在后面追加了 BNTang-01：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230528205952384-913888121.png\" alt=\"image-20230528205952079\" loading=\"lazy\" class=\"φbp\"></p>\n<p>第二个我在后面追加了 BNTang-02, 更改完毕之后我们在按 ESC 进入命令模式，Shift + zz 就可以直接保存并退出了。</p>\n<h1 id=\"更改-nginx-端口\">更改 Nginx 端口<a title=\"#更改-nginx-端口\" href=\"#更改-nginx-端口\"></a></h1>\n<p>那么上面介绍了我们的 Nginx 页面默认存放的地址，那我们的 Nginx 内容存放到哪里了呢，在 <code>/etc/nginx</code> 当中：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-built_in\">cd</span> /etc/nginx<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230528210312417-1409398477.png\" alt=\"image-20230528210312094\" loading=\"lazy\" class=\"φbp\"></p>\n<p>用 VIM 进行操作，这里就不在追述了。VIM 进入到配置文件之后我们搜索一下 80，用 <code>/80</code>，发现好像没有 80，那我们的 80 在哪呢，其实啊它在我们的 HTTP 的配置当中，我在 HTTP 的配置项当中发现它告诉我们在 <code>/etc/nginx/sites-enabled/*;</code> 这个文件当中。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\"><span class=\"hljs-built_in\">cd</span> /etc/nginx/sites-enabled<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230528210625345-1902256481.png\" alt=\"image-20230528210624976\" loading=\"lazy\" class=\"φbp\"></p>\n<p>我们去到这个目录：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230528210901574-269095656.png\" alt=\"image-20230528210901318\" loading=\"lazy\" class=\"φbp\"></p>\n<p>在用 VIM 编辑这个文件：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">vim /etc/nginx/sites-available/default<br></code></pre></td></tr></table></figure>\n<p>你会发现 80 有了，有个 server，这下好了就都可以看到了，我们改一下端口号 80 -&gt; 8088：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230528211139816-369272985.png\" alt=\"image-20230528211139583\" loading=\"lazy\" class=\"φbp\"></p>\n<p>在按 ESC，在输入 <code>:wq</code> 保存并退出。这次我们配置文件改了，所以我们需要重启一下 Nginx，之前改的是 HTML 静态文件所以不需要重启。</p>\n<p>重启 Nginx 命令：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">systemctl restart nginx<br></code></pre></td></tr></table></figure>\n<p>查看 Nginx 状态：</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs bash\">systemctl status nginx<br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230528211436372-1219483751.png\" alt=\"image-20230528211436205\" loading=\"lazy\" class=\"φbp\"></p>\n<p>!&gt; 记得开放服务器的安全组才可以进行访问</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202307/2105804-20230709091023472-1432760217.png\" alt=\"image-20230709091022173\" loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"华为云虚拟IP申请","link":"2023/05/28/DevOps与云原生/Keepalive+Haproxy 高可用搭建/04-华为云虚拟IP申请"},"next":{"title":"华为云云服务器环境准备","link":"2023/05/28/DevOps与云原生/Keepalive+Haproxy 高可用搭建/02-华为云云服务器环境准备"},"plink":"http://example.com/2023/05/28/DevOps与云原生/Keepalive+Haproxy 高可用搭建/03-安装 Nginx 修改默认端口/","toc":[{"id":"安装-nginx","title":"安装 Nginx","index":"1"},{"id":"更改-nginx-端口","title":"更改 Nginx 端口","index":"2"}],"reading_time":"769 words in 5 min"}