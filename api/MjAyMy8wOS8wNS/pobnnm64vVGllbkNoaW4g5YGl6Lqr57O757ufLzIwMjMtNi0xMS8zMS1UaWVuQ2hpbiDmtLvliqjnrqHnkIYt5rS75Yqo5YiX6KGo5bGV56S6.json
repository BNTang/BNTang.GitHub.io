{"title":"TienChin 活动管理-活动列表展示","date":"2023-09-05T15:54:38.000Z","date_formatted":{"ll":"Sep 5, 2023","L":"09/05/2023","MM-DD":"09-05"},"link":"2023/09/05/项目/TienChin 健身系统/2023-6-11/31-TienChin 活动管理-活动列表展示","tags":["项目"],"updated":"2023-09-21T16:55:58.813Z","content":"<h1 id=\"后端\">后端<a title=\"#后端\" href=\"#后端\"></a></h1>\n<h2 id=\"activityvo\">ActivityVO<a title=\"#activityvo\" href=\"#activityvo\"></a></h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@version</span> 1.0</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@description</span> 活动管理VO</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023-23-05</span><br><span class=\"hljs-comment\"> **/</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ActivityVO</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">BaseEntity</span> &#123;<br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 活动ID</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> Integer activityId;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 活动名称</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> String activityName;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 渠道ID</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> Integer channelId;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 渠道名称</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> String channelName;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 活动简介</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> String activityInfo;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 活动类型，1.折扣券、2.代金券</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> Integer activityType;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 活动状态，0.表示禁用、1.表示正常</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> Integer activityStatus;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 折扣券</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> Double discount;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 代金券</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> Double voucher;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 活动开始时间</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> LocalDateTime beginTime;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 活动结束时间</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> LocalDateTime endTime;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 删除标志（0代表存在 2代表删除）</span><br><span class=\"hljs-comment\">     */</span><br>    <span class=\"hljs-keyword\">private</span> String delFlag;<br><br>    <span class=\"hljs-comment\">// Get Set 方法略</span><br>&#125;<br></code></pre></td></tr></table></figure>\n<p>更改 Activity 折扣券，代金券的数据类型：</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 折扣券</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">private</span> Double discount;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 代金券</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">private</span> Double voucher;<br></code></pre></td></tr></table></figure>\n<h2 id=\"activitycontroller\">ActivityController<a title=\"#activitycontroller\" href=\"#activitycontroller\"></a></h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * &lt;p&gt;</span><br><span class=\"hljs-comment\"> * 活动管理表 前端控制器</span><br><span class=\"hljs-comment\"> * &lt;/p&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023-09-05</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@RestController</span><br><span class=\"hljs-meta\">@RequestMapping(&quot;/tienchin/activity&quot;)</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ActivityController</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">BaseController</span> &#123;<br>    <span class=\"hljs-meta\">@Resource</span><br>    <span class=\"hljs-keyword\">private</span> IActivityService iActivityService;<br><br>    <span class=\"hljs-meta\">@PreAuthorize(&quot;hasPermission(&#x27;tienchin:activity:list&#x27;)&quot;)</span><br>    <span class=\"hljs-meta\">@GetMapping(&quot;/list&quot;)</span><br>    TableDataInfo <span class=\"hljs-title function_\">list</span><span class=\"hljs-params\">()</span> &#123;<br>        startPage();<br>        List&lt;ActivityVO&gt; activityList = iActivityService.selectActivityList();<br>        <span class=\"hljs-keyword\">return</span> getDataTable(activityList);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<p>插入测试数据</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> tienchin_activity (activity_id, activity_name, channel_id, activity_info, activity_type, activity_status, discount, voucher, begin_time, end_time, remark, create_by, update_by, create_time, update_time, del_flag) <span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&#x27;aaa&#x27;</span>, <span class=\"hljs-number\">7</span>, <span class=\"hljs-string\">&#x27;小红书推广&#x27;</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">8</span>, <span class=\"hljs-keyword\">null</span>, <span class=\"hljs-string\">&#x27;2023-09-05 23:53:09&#x27;</span>, <span class=\"hljs-string\">&#x27;2023-11-05 23:53:17&#x27;</span>, <span class=\"hljs-keyword\">null</span>, <span class=\"hljs-keyword\">null</span>, <span class=\"hljs-keyword\">null</span>, <span class=\"hljs-keyword\">null</span>, <span class=\"hljs-string\">&#x27;2023-09-05 23:53:22&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>);<br></code></pre></td></tr></table></figure>\n<h2 id=\"iactivityservice\">IActivityService<a title=\"#iactivityservice\" href=\"#iactivityservice\"></a></h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * &lt;p&gt;</span><br><span class=\"hljs-comment\"> * 活动管理表 服务类</span><br><span class=\"hljs-comment\"> * &lt;/p&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023-09-05</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">IActivityService</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">IService</span>&lt;Activity&gt; &#123;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 查询活动列表</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 活动列表</span><br><span class=\"hljs-comment\">     */</span><br>    List&lt;ActivityVO&gt; <span class=\"hljs-title function_\">selectActivityList</span><span class=\"hljs-params\">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"activityserviceimpl\">ActivityServiceImpl<a title=\"#activityserviceimpl\" href=\"#activityserviceimpl\"></a></h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * &lt;p&gt;</span><br><span class=\"hljs-comment\"> * 活动管理表 服务实现类</span><br><span class=\"hljs-comment\"> * &lt;/p&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023-09-05</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@Service</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">ActivityServiceImpl</span><br>        <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">ServiceImpl</span>&lt;ActivityMapper, Activity&gt;<br>        <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title class_\">IActivityService</span> &#123;<br><br>    <span class=\"hljs-meta\">@Resource</span><br>    <span class=\"hljs-keyword\">private</span> ActivityMapper activityMapper;<br><br>    <span class=\"hljs-meta\">@Override</span><br>    <span class=\"hljs-keyword\">public</span> List&lt;ActivityVO&gt; <span class=\"hljs-title function_\">selectActivityList</span><span class=\"hljs-params\">()</span> &#123;<br>        <span class=\"hljs-keyword\">return</span> activityMapper.selectActivityList();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"activitymapper\">ActivityMapper<a title=\"#activitymapper\" href=\"#activitymapper\"></a></h2>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * &lt;p&gt;</span><br><span class=\"hljs-comment\"> * 活动管理表 Mapper 接口</span><br><span class=\"hljs-comment\"> * &lt;/p&gt;</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@author</span> BNTang</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@since</span> 2023-09-05</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">interface</span> <span class=\"hljs-title class_\">ActivityMapper</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title class_\">BaseMapper</span>&lt;Activity&gt; &#123;<br><br>    <span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\">     * 查询活动列表</span><br><span class=\"hljs-comment\">     *</span><br><span class=\"hljs-comment\">     * <span class=\"hljs-doctag\">@return</span> 活动列表</span><br><span class=\"hljs-comment\">     */</span><br>    List&lt;ActivityVO&gt; <span class=\"hljs-title function_\">selectActivityList</span><span class=\"hljs-params\">()</span>;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"activitymapper.xml\">ActivityMapper.xml<a title=\"#activitymapper.xml\" href=\"#activitymapper.xml\"></a></h2>\n<figure class=\"highlight xml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs xml\"><span class=\"hljs-meta\">&lt;?xml version=<span class=\"hljs-string\">&quot;1.0&quot;</span> encoding=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>?&gt;</span><br><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">mapper</span> <span class=\"hljs-keyword\">PUBLIC</span> <span class=\"hljs-string\">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class=\"hljs-string\">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">mapper</span> <span class=\"hljs-attr\">namespace</span>=<span class=\"hljs-string\">&quot;top.it6666.activity.mapper.ActivityMapper&quot;</span>&gt;</span><br>    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">select</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;selectActivityList&quot;</span> <span class=\"hljs-attr\">resultType</span>=<span class=\"hljs-string\">&quot;top.it6666.activity.entity.vo.ActivityVO&quot;</span>&gt;</span><br>        SELECT ta.*, tc.channel_name<br>        FROM tienchin_activity ta,<br>             tienchin_channel tc<br>        WHERE ta.channel_id = tc.channel_id<br>          AND ta.del_flag = 0<br>    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">select</span>&gt;</span><br><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure>\n<h1 id=\"前端\">前端<a title=\"#前端\" href=\"#前端\"></a></h1>\n<h2 id=\"activity.js\">activity.js<a title=\"#activity.js\" href=\"#activity.js\"></a></h2>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-keyword\">import</span> request <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">&#x27;@/utils/request&#x27;</span><br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 查询活动列表</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> query 查询条件参数</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@returns</span> &#123;<span class=\"hljs-type\">*</span>&#125; 查询结果</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">listActivity</span>(<span class=\"hljs-params\">query</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity/list&#x27;</span>,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;get&#x27;</span>,<br>        <span class=\"hljs-attr\">params</span>: query<br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">// 查询活动详细</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">getActivity</span>(<span class=\"hljs-params\">activityId</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity/&#x27;</span> + activityId,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;get&#x27;</span><br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">// 新增活动</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">addActivity</span>(<span class=\"hljs-params\">data</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity&#x27;</span>,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;post&#x27;</span>,<br>        <span class=\"hljs-attr\">data</span>: data<br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">// 修改活动</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">updateActivity</span>(<span class=\"hljs-params\">data</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity&#x27;</span>,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;put&#x27;</span>,<br>        <span class=\"hljs-attr\">data</span>: data<br>    &#125;)<br>&#125;<br><br><span class=\"hljs-comment\">// 删除活动</span><br><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">delActivity</span>(<span class=\"hljs-params\">activityIds</span>) &#123;<br>    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-title function_\">request</span>(&#123;<br>        <span class=\"hljs-attr\">url</span>: <span class=\"hljs-string\">&#x27;/tienchin/activity/&#x27;</span> + activityIds,<br>        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&#x27;delete&#x27;</span><br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure>\n<h2 id=\"index.vue\">index.vue<a title=\"#index.vue\" href=\"#index.vue\"></a></h2>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202309/2105804-20230922004255014-129062240.png\" alt=\"image-20230922004254269\" loading=\"lazy\" class=\"φbp\"></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br><span class=\"line\">224</span><br><span class=\"line\">225</span><br><span class=\"line\">226</span><br><span class=\"line\">227</span><br><span class=\"line\">228</span><br><span class=\"line\">229</span><br><span class=\"line\">230</span><br><span class=\"line\">231</span><br><span class=\"line\">232</span><br><span class=\"line\">233</span><br><span class=\"line\">234</span><br><span class=\"line\">235</span><br><span class=\"line\">236</span><br><span class=\"line\">237</span><br><span class=\"line\">238</span><br><span class=\"line\">239</span><br><span class=\"line\">240</span><br><span class=\"line\">241</span><br><span class=\"line\">242</span><br><span class=\"line\">243</span><br><span class=\"line\">244</span><br><span class=\"line\">245</span><br><span class=\"line\">246</span><br><span class=\"line\">247</span><br><span class=\"line\">248</span><br><span class=\"line\">249</span><br><span class=\"line\">250</span><br><span class=\"line\">251</span><br><span class=\"line\">252</span><br><span class=\"line\">253</span><br><span class=\"line\">254</span><br><span class=\"line\">255</span><br><span class=\"line\">256</span><br><span class=\"line\">257</span><br><span class=\"line\">258</span><br><span class=\"line\">259</span><br><span class=\"line\">260</span><br><span class=\"line\">261</span><br><span class=\"line\">262</span><br><span class=\"line\">263</span><br><span class=\"line\">264</span><br><span class=\"line\">265</span><br><span class=\"line\">266</span><br><span class=\"line\">267</span><br><span class=\"line\">268</span><br><span class=\"line\">269</span><br><span class=\"line\">270</span><br><span class=\"line\">271</span><br><span class=\"line\">272</span><br><span class=\"line\">273</span><br><span class=\"line\">274</span><br><span class=\"line\">275</span><br><span class=\"line\">276</span><br><span class=\"line\">277</span><br><span class=\"line\">278</span><br><span class=\"line\">279</span><br><span class=\"line\">280</span><br><span class=\"line\">281</span><br><span class=\"line\">282</span><br><span class=\"line\">283</span><br><span class=\"line\">284</span><br><span class=\"line\">285</span><br><span class=\"line\">286</span><br><span class=\"line\">287</span><br><span class=\"line\">288</span><br><span class=\"line\">289</span><br><span class=\"line\">290</span><br><span class=\"line\">291</span><br><span class=\"line\">292</span><br><span class=\"line\">293</span><br><span class=\"line\">294</span><br><span class=\"line\">295</span><br><span class=\"line\">296</span><br><span class=\"line\">297</span><br><span class=\"line\">298</span><br><span class=\"line\">299</span><br><span class=\"line\">300</span><br><span class=\"line\">301</span><br><span class=\"line\">302</span><br><span class=\"line\">303</span><br><span class=\"line\">304</span><br><span class=\"line\">305</span><br><span class=\"line\">306</span><br><span class=\"line\">307</span><br><span class=\"line\">308</span><br><span class=\"line\">309</span><br><span class=\"line\">310</span><br><span class=\"line\">311</span><br><span class=\"line\">312</span><br><span class=\"line\">313</span><br><span class=\"line\">314</span><br><span class=\"line\">315</span><br><span class=\"line\">316</span><br><span class=\"line\">317</span><br><span class=\"line\">318</span><br><span class=\"line\">319</span><br><span class=\"line\">320</span><br><span class=\"line\">321</span><br><span class=\"line\">322</span><br><span class=\"line\">323</span><br><span class=\"line\">324</span><br><span class=\"line\">325</span><br><span class=\"line\">326</span><br><span class=\"line\">327</span><br><span class=\"line\">328</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs vue\">&lt;template&gt;<br>  &lt;div class=&quot;app-container&quot;&gt;<br>    &lt;el-form :model=&quot;queryParams&quot; ref=&quot;queryRef&quot; :inline=&quot;true&quot; v-show=&quot;showSearch&quot; label-width=&quot;68px&quot;&gt;<br>      &lt;el-form-item label=&quot;岗位编码&quot; prop=&quot;postCode&quot;&gt;<br>        &lt;el-input<br>            v-model=&quot;queryParams.postCode&quot;<br>            placeholder=&quot;请输入岗位编码&quot;<br>            clearable<br>            @keyup.enter=&quot;handleQuery&quot;<br>        /&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;el-form-item label=&quot;岗位名称&quot; prop=&quot;postName&quot;&gt;<br>        &lt;el-input<br>            v-model=&quot;queryParams.postName&quot;<br>            placeholder=&quot;请输入岗位名称&quot;<br>            clearable<br>            @keyup.enter=&quot;handleQuery&quot;<br>        /&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;el-form-item label=&quot;状态&quot; prop=&quot;status&quot;&gt;<br>        &lt;el-select v-model=&quot;queryParams.status&quot; placeholder=&quot;岗位状态&quot; clearable&gt;<br>          &lt;el-option<br>              v-for=&quot;dict in sys_normal_disable&quot;<br>              :key=&quot;dict.value&quot;<br>              :label=&quot;dict.label&quot;<br>              :value=&quot;dict.value&quot;<br>          /&gt;<br>        &lt;/el-select&gt;<br>      &lt;/el-form-item&gt;<br>      &lt;el-form-item&gt;<br>        &lt;el-button type=&quot;primary&quot; icon=&quot;Search&quot; @click=&quot;handleQuery&quot;&gt;搜索&lt;/el-button&gt;<br>        &lt;el-button icon=&quot;Refresh&quot; @click=&quot;resetQuery&quot;&gt;重置&lt;/el-button&gt;<br>      &lt;/el-form-item&gt;<br>    &lt;/el-form&gt;<br><br>    &lt;el-row :gutter=&quot;10&quot; class=&quot;mb8&quot;&gt;<br>      &lt;el-col :span=&quot;1.5&quot;&gt;<br>        &lt;el-button<br>            type=&quot;primary&quot;<br>            plain<br>            icon=&quot;Plus&quot;<br>            @click=&quot;handleAdd&quot;<br>            v-hasPermi=&quot;[&#x27;system:post:add&#x27;]&quot;<br>        &gt;新增<br>        &lt;/el-button&gt;<br>      &lt;/el-col&gt;<br>      &lt;el-col :span=&quot;1.5&quot;&gt;<br>        &lt;el-button<br>            type=&quot;success&quot;<br>            plain<br>            icon=&quot;Edit&quot;<br>            :disabled=&quot;single&quot;<br>            @click=&quot;handleUpdate&quot;<br>            v-hasPermi=&quot;[&#x27;system:post:edit&#x27;]&quot;<br>        &gt;修改<br>        &lt;/el-button&gt;<br>      &lt;/el-col&gt;<br>      &lt;el-col :span=&quot;1.5&quot;&gt;<br>        &lt;el-button<br>            type=&quot;danger&quot;<br>            plain<br>            icon=&quot;Delete&quot;<br>            :disabled=&quot;multiple&quot;<br>            @click=&quot;handleDelete&quot;<br>            v-hasPermi=&quot;[&#x27;system:post:remove&#x27;]&quot;<br>        &gt;删除<br>        &lt;/el-button&gt;<br>      &lt;/el-col&gt;<br>      &lt;el-col :span=&quot;1.5&quot;&gt;<br>        &lt;el-button<br>            type=&quot;warning&quot;<br>            plain<br>            icon=&quot;Download&quot;<br>            @click=&quot;handleExport&quot;<br>            v-hasPermi=&quot;[&#x27;system:post:export&#x27;]&quot;<br>        &gt;导出<br>        &lt;/el-button&gt;<br>      &lt;/el-col&gt;<br>      &lt;right-toolbar v-model:showSearch=&quot;showSearch&quot; @queryTable=&quot;getList&quot;&gt;&lt;/right-toolbar&gt;<br>    &lt;/el-row&gt;<br><br>    &lt;el-table v-loading=&quot;loading&quot; :data=&quot;activityList&quot; @selection-change=&quot;handleSelectionChange&quot;&gt;<br>      &lt;el-table-column type=&quot;selection&quot; width=&quot;55&quot; align=&quot;center&quot;/&gt;<br>      &lt;el-table-column label=&quot;活动编号&quot; align=&quot;center&quot; prop=&quot;activityId&quot;/&gt;<br>      &lt;el-table-column label=&quot;活动名称&quot; align=&quot;center&quot; prop=&quot;activityName&quot;/&gt;<br>      &lt;el-table-column label=&quot;渠道名称&quot; align=&quot;center&quot; prop=&quot;channelName&quot;/&gt;<br>      &lt;el-table-column label=&quot;活动简介&quot; :show-overflow-tooltip=&quot;true&quot; align=&quot;center&quot; prop=&quot;activityInfo&quot;/&gt;<br>      &lt;el-table-column label=&quot;活动类型&quot; align=&quot;center&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;dict-tag :options=&quot;activity_type&quot; :value=&quot;scope.row.activityType&quot;/&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>      &lt;el-table-column label=&quot;活动明细&quot; align=&quot;center&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;div v-if=&quot;scope.row.activityType === 1&quot;&gt;<br>            折扣券/&#123;&#123; scope.row.discount &#125;&#125;折<br>          &lt;/div&gt;<br>          &lt;div v-else&gt;<br>            代金券/&#123;&#123; scope.row.voucher &#125;&#125;元<br>          &lt;/div&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>      &lt;el-table-column label=&quot;活动状态&quot; align=&quot;center&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;dict-tag :options=&quot;activity_status&quot; :value=&quot;scope.row.activityStatus&quot;/&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>      &lt;el-table-column label=&quot;活动起始时间&quot; align=&quot;center&quot; prop=&quot;beginTime&quot; width=&quot;180&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;span&gt;&#123;&#123; parseTime(scope.row.beginTime) &#125;&#125;&lt;/span&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>      &lt;el-table-column label=&quot;活动结束时间&quot; align=&quot;center&quot; prop=&quot;endTime&quot; width=&quot;180&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;span&gt;&#123;&#123; parseTime(scope.row.endTime) &#125;&#125;&lt;/span&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>      &lt;el-table-column label=&quot;操作&quot; align=&quot;center&quot; class-name=&quot;small-padding fixed-width&quot; width=&quot;150&quot;&gt;<br>        &lt;template #default=&quot;scope&quot;&gt;<br>          &lt;el-button<br>              type=&quot;text&quot;<br>              icon=&quot;Edit&quot;<br>              @click=&quot;handleUpdate(scope.row)&quot;<br>              v-hasPermi=&quot;[&#x27;system:post:edit&#x27;]&quot;<br>          &gt;修改<br>          &lt;/el-button&gt;<br>          &lt;el-button<br>              type=&quot;text&quot;<br>              icon=&quot;Delete&quot;<br>              @click=&quot;handleDelete(scope.row)&quot;<br>              v-hasPermi=&quot;[&#x27;system:post:remove&#x27;]&quot;<br>          &gt;删除<br>          &lt;/el-button&gt;<br>        &lt;/template&gt;<br>      &lt;/el-table-column&gt;<br>    &lt;/el-table&gt;<br><br>    &lt;pagination<br>        v-show=&quot;total &gt; 0&quot;<br>        :total=&quot;total&quot;<br>        v-model:page=&quot;queryParams.pageNum&quot;<br>        v-model:limit=&quot;queryParams.pageSize&quot;<br>        @pagination=&quot;getList&quot;<br>    /&gt;<br><br>    &lt;!-- 添加或修改岗位对话框 --&gt;<br>    &lt;el-dialog :title=&quot;title&quot; v-model=&quot;open&quot; width=&quot;500px&quot; append-to-body&gt;<br>      &lt;el-form ref=&quot;postRef&quot; :model=&quot;form&quot; :rules=&quot;rules&quot; label-width=&quot;80px&quot;&gt;<br>        &lt;el-form-item label=&quot;岗位名称&quot; prop=&quot;postName&quot;&gt;<br>          &lt;el-input v-model=&quot;form.postName&quot; placeholder=&quot;请输入岗位名称&quot;/&gt;<br>        &lt;/el-form-item&gt;<br>        &lt;el-form-item label=&quot;岗位编码&quot; prop=&quot;postCode&quot;&gt;<br>          &lt;el-input v-model=&quot;form.postCode&quot; placeholder=&quot;请输入编码名称&quot;/&gt;<br>        &lt;/el-form-item&gt;<br>        &lt;el-form-item label=&quot;岗位顺序&quot; prop=&quot;postSort&quot;&gt;<br>          &lt;el-input-number v-model=&quot;form.postSort&quot; controls-position=&quot;right&quot; :min=&quot;0&quot;/&gt;<br>        &lt;/el-form-item&gt;<br>        &lt;el-form-item label=&quot;岗位状态&quot; prop=&quot;status&quot;&gt;<br>          &lt;el-radio-group v-model=&quot;form.status&quot;&gt;<br>            &lt;el-radio<br>                v-for=&quot;dict in sys_normal_disable&quot;<br>                :key=&quot;dict.value&quot;<br>                :label=&quot;dict.value&quot;<br>            &gt;&#123;&#123; dict.label &#125;&#125;<br>            &lt;/el-radio&gt;<br>          &lt;/el-radio-group&gt;<br>        &lt;/el-form-item&gt;<br>        &lt;el-form-item label=&quot;备注&quot; prop=&quot;remark&quot;&gt;<br>          &lt;el-input v-model=&quot;form.remark&quot; type=&quot;textarea&quot; placeholder=&quot;请输入内容&quot;/&gt;<br>        &lt;/el-form-item&gt;<br>      &lt;/el-form&gt;<br>      &lt;template #footer&gt;<br>        &lt;div class=&quot;dialog-footer&quot;&gt;<br>          &lt;el-button type=&quot;primary&quot; @click=&quot;submitForm&quot;&gt;确 定&lt;/el-button&gt;<br>          &lt;el-button @click=&quot;cancel&quot;&gt;取 消&lt;/el-button&gt;<br>        &lt;/div&gt;<br>      &lt;/template&gt;<br>    &lt;/el-dialog&gt;<br>  &lt;/div&gt;<br>&lt;/template&gt;<br><br>&lt;script setup name=&quot;Activity&quot;&gt;<br>import &#123;listPost, addPost, delPost, getPost, updatePost&#125; from &quot;@/api/system/post&quot;;<br>import &#123;listActivity&#125; from &quot;@/api/tienchin/activity&quot;;<br><br>const &#123;proxy&#125; = getCurrentInstance();<br>const &#123;<br>  sys_normal_disable,<br>  activity_type,<br>  activity_status<br>&#125; = proxy.useDict(&quot;sys_normal_disable&quot;, &#x27;activity_type&#x27;, &#x27;activity_status&#x27;);<br><br>const activityList = ref([]);<br>const open = ref(false);<br>const loading = ref(true);<br>const showSearch = ref(true);<br>const ids = ref([]);<br>const single = ref(true);<br>const multiple = ref(true);<br>const total = ref(0);<br>const title = ref(&quot;&quot;);<br><br>const data = reactive(&#123;<br>  form: &#123;&#125;,<br>  queryParams: &#123;<br>    pageNum: 1,<br>    pageSize: 10,<br>    postCode: undefined,<br>    postName: undefined,<br>    status: undefined<br>  &#125;,<br>  rules: &#123;<br>    postName: [&#123;required: true, message: &quot;岗位名称不能为空&quot;, trigger: &quot;blur&quot;&#125;],<br>    postCode: [&#123;required: true, message: &quot;岗位编码不能为空&quot;, trigger: &quot;blur&quot;&#125;],<br>    postSort: [&#123;required: true, message: &quot;岗位顺序不能为空&quot;, trigger: &quot;blur&quot;&#125;],<br>  &#125;<br>&#125;);<br><br>const &#123;queryParams, form, rules&#125; = toRefs(data);<br><br>/** 查询岗位列表 */<br>function getList() &#123;<br>  loading.value = true;<br>  listActivity(queryParams.value).then(response =&gt; &#123;<br>    activityList.value = response.rows;<br>    total.value = response.total;<br>    loading.value = false;<br>  &#125;);<br>&#125;<br><br>/** 取消按钮 */<br>function cancel() &#123;<br>  open.value = false;<br>  reset();<br>&#125;<br><br>/** 表单重置 */<br>function reset() &#123;<br>  form.value = &#123;<br>    postId: undefined,<br>    postCode: undefined,<br>    postName: undefined,<br>    postSort: 0,<br>    status: &quot;0&quot;,<br>    remark: undefined<br>  &#125;;<br>  proxy.resetForm(&quot;postRef&quot;);<br>&#125;<br><br>/** 搜索按钮操作 */<br>function handleQuery() &#123;<br>  queryParams.value.pageNum = 1;<br>  getList();<br>&#125;<br><br>/** 重置按钮操作 */<br>function resetQuery() &#123;<br>  proxy.resetForm(&quot;queryRef&quot;);<br>  handleQuery();<br>&#125;<br><br>/** 多选框选中数据 */<br>function handleSelectionChange(selection) &#123;<br>  ids.value = selection.map(item =&gt; item.postId);<br>  single.value = selection.length != 1;<br>  multiple.value = !selection.length;<br>&#125;<br><br>/** 新增按钮操作 */<br>function handleAdd() &#123;<br>  reset();<br>  open.value = true;<br>  title.value = &quot;添加岗位&quot;;<br>&#125;<br><br>/** 修改按钮操作 */<br>function handleUpdate(row) &#123;<br>  reset();<br>  const postId = row.postId || ids.value;<br>  getPost(postId).then(response =&gt; &#123;<br>    form.value = response.data;<br>    open.value = true;<br>    title.value = &quot;修改岗位&quot;;<br>  &#125;);<br>&#125;<br><br>/** 提交按钮 */<br>function submitForm() &#123;<br>  proxy.$refs[&quot;postRef&quot;].validate(valid =&gt; &#123;<br>    if (valid) &#123;<br>      if (form.value.postId != undefined) &#123;<br>        updatePost(form.value).then(response =&gt; &#123;<br>          proxy.$modal.msgSuccess(&quot;修改成功&quot;);<br>          open.value = false;<br>          getList();<br>        &#125;);<br>      &#125; else &#123;<br>        addPost(form.value).then(response =&gt; &#123;<br>          proxy.$modal.msgSuccess(&quot;新增成功&quot;);<br>          open.value = false;<br>          getList();<br>        &#125;);<br>      &#125;<br>    &#125;<br>  &#125;);<br>&#125;<br><br>/** 删除按钮操作 */<br>function handleDelete(row) &#123;<br>  const postIds = row.postId || ids.value;<br>  proxy.$modal.confirm(&#x27;是否确认删除岗位编号为&quot;&#x27; + postIds + &#x27;&quot;的数据项？&#x27;).then(function () &#123;<br>    return delPost(postIds);<br>  &#125;).then(() =&gt; &#123;<br>    getList();<br>    proxy.$modal.msgSuccess(&quot;删除成功&quot;);<br>  &#125;).catch(() =&gt; &#123;<br>  &#125;);<br>&#125;<br><br>/** 导出按钮操作 */<br>function handleExport() &#123;<br>  proxy.download(&quot;system/post/export&quot;, &#123;<br>    ...queryParams.value<br>  &#125;, `post_$&#123;new Date().getTime()&#125;.xlsx`);<br>&#125;<br><br>getList();<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>","prev":{"title":"TienChin 活动管理-添加活动接口","link":"2023/09/06/项目/TienChin 健身系统/2023-6-11/33-TienChin 活动管理-添加活动接口"},"next":{"title":"TienChin 活动管理-工程创建","link":"2023/09/05/项目/TienChin 健身系统/2023-6-11/30-TienChin 活动管理-工程创建"},"plink":"http://example.com/2023/09/05/项目/TienChin 健身系统/2023-6-11/31-TienChin 活动管理-活动列表展示/","toc":[{"id":"后端","title":"后端","index":"1","children":[{"id":"activityvo","title":"ActivityVO","index":"1.1"},{"id":"activitycontroller","title":"ActivityController","index":"1.2"},{"id":"iactivityservice","title":"IActivityService","index":"1.3"},{"id":"activityserviceimpl","title":"ActivityServiceImpl","index":"1.4"},{"id":"activitymapper","title":"ActivityMapper","index":"1.5"},{"id":"activitymapper.xml","title":"ActivityMapper.xml","index":"1.6"}]},{"id":"前端","title":"前端","index":"2","children":[{"id":"activity.js","title":"activity.js","index":"2.1"},{"id":"index.vue","title":"index.vue","index":"2.2"}]}],"reading_time":"2324 words in 15 min"}