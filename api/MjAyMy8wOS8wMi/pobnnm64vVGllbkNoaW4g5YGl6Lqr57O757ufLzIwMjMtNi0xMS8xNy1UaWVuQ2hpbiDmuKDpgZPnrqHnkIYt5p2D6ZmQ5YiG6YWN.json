{"title":"TienChin 渠道管理-权限分配","date":"2023-09-02T03:11:01.000Z","date_formatted":{"ll":"Sep 2, 2023","L":"09/02/2023","MM-DD":"09-02"},"link":"2023/09/02/项目/TienChin 健身系统/2023-6-11/17-TienChin 渠道管理-权限分配","tags":["项目"],"updated":"2023-09-17T05:22:55.891Z","content":"<h1 id=\"添加权限\">添加权限<a title=\"#添加权限\" href=\"#添加权限\"></a></h1>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202309/2105804-20230902111725771-380509746.png\" alt=\"image-20230902111725267\" loading=\"lazy\" class=\"φbp\"></p>\n<p>如果您不想手动添加可以使用我如下的SQL，但是有一个注意点就是 parent_id 是渠道管理菜单的主键 id 即可一键插入。</p>\n<figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs sql\"><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> `TienChin`.`sys_menu` (`menu_id`, `menu_name`, `parent_id`, `order_num`, `path`, `component`, `query`,<br>                                   `is_frame`, `is_cache`, `menu_type`, `visible`, `status`, `perms`, `icon`,<br>                                   `create_by`, `create_time`, `update_by`, `update_time`, `remark`)<br><span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">2008</span>, <span class=\"hljs-string\">&#x27;渠道查询&#x27;</span>, <span class=\"hljs-number\">2006</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">&#x27;F&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>, <span class=\"hljs-string\">&#x27;tienchin:channel:list&#x27;</span>, <span class=\"hljs-string\">&#x27;#&#x27;</span>, <span class=\"hljs-string\">&#x27;admin&#x27;</span>,<br>        <span class=\"hljs-string\">&#x27;2023-08-26 09:57:58&#x27;</span>, <span class=\"hljs-string\">&#x27;admin&#x27;</span>, <span class=\"hljs-string\">&#x27;2023-09-02 11:15:23&#x27;</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>);<br><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> `TienChin`.`sys_menu` (`menu_id`, `menu_name`, `parent_id`, `order_num`, `path`, `component`, `query`,<br>                                   `is_frame`, `is_cache`, `menu_type`, `visible`, `status`, `perms`, `icon`,<br>                                   `create_by`, `create_time`, `update_by`, `update_time`, `remark`)<br><span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">2009</span>, <span class=\"hljs-string\">&#x27;添加渠道&#x27;</span>, <span class=\"hljs-number\">2006</span>, <span class=\"hljs-number\">2</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">&#x27;F&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>, <span class=\"hljs-string\">&#x27;tienchin:channel:create&#x27;</span>, <span class=\"hljs-string\">&#x27;#&#x27;</span>, <span class=\"hljs-string\">&#x27;admin&#x27;</span>,<br>        <span class=\"hljs-string\">&#x27;2023-09-02 11:15:49&#x27;</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>);<br><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> `TienChin`.`sys_menu` (`menu_id`, `menu_name`, `parent_id`, `order_num`, `path`, `component`, `query`,<br>                                   `is_frame`, `is_cache`, `menu_type`, `visible`, `status`, `perms`, `icon`,<br>                                   `create_by`, `create_time`, `update_by`, `update_time`, `remark`)<br><span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">2010</span>, <span class=\"hljs-string\">&#x27;修改渠道&#x27;</span>, <span class=\"hljs-number\">2006</span>, <span class=\"hljs-number\">3</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">&#x27;F&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>, <span class=\"hljs-string\">&#x27;tienchin:channel:edit&#x27;</span>, <span class=\"hljs-string\">&#x27;#&#x27;</span>, <span class=\"hljs-string\">&#x27;admin&#x27;</span>,<br>        <span class=\"hljs-string\">&#x27;2023-09-02 11:16:09&#x27;</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>);<br><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> `TienChin`.`sys_menu` (`menu_id`, `menu_name`, `parent_id`, `order_num`, `path`, `component`, `query`,<br>                                   `is_frame`, `is_cache`, `menu_type`, `visible`, `status`, `perms`, `icon`,<br>                                   `create_by`, `create_time`, `update_by`, `update_time`, `remark`)<br><span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">2011</span>, <span class=\"hljs-string\">&#x27;删除渠道&#x27;</span>, <span class=\"hljs-number\">2006</span>, <span class=\"hljs-number\">4</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">&#x27;F&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>, <span class=\"hljs-string\">&#x27;tienchin:channel:delete&#x27;</span>, <span class=\"hljs-string\">&#x27;#&#x27;</span>, <span class=\"hljs-string\">&#x27;admin&#x27;</span>,<br>        <span class=\"hljs-string\">&#x27;2023-09-02 11:16:24&#x27;</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>);<br><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> `TienChin`.`sys_menu` (`menu_id`, `menu_name`, `parent_id`, `order_num`, `path`, `component`, `query`,<br>                                   `is_frame`, `is_cache`, `menu_type`, `visible`, `status`, `perms`, `icon`,<br>                                   `create_by`, `create_time`, `update_by`, `update_time`, `remark`)<br><span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">2012</span>, <span class=\"hljs-string\">&#x27;导入渠道&#x27;</span>, <span class=\"hljs-number\">2006</span>, <span class=\"hljs-number\">5</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">&#x27;F&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>, <span class=\"hljs-string\">&#x27;tienchin:channel:import&#x27;</span>, <span class=\"hljs-string\">&#x27;#&#x27;</span>, <span class=\"hljs-string\">&#x27;admin&#x27;</span>,<br>        <span class=\"hljs-string\">&#x27;2023-09-02 11:16:39&#x27;</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>);<br><span class=\"hljs-keyword\">INSERT</span> <span class=\"hljs-keyword\">INTO</span> `TienChin`.`sys_menu` (`menu_id`, `menu_name`, `parent_id`, `order_num`, `path`, `component`, `query`,<br>                                   `is_frame`, `is_cache`, `menu_type`, `visible`, `status`, `perms`, `icon`,<br>                                   `create_by`, `create_time`, `update_by`, `update_time`, `remark`)<br><span class=\"hljs-keyword\">VALUES</span> (<span class=\"hljs-number\">2013</span>, <span class=\"hljs-string\">&#x27;导出渠道&#x27;</span>, <span class=\"hljs-number\">2006</span>, <span class=\"hljs-number\">6</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-number\">1</span>, <span class=\"hljs-number\">0</span>, <span class=\"hljs-string\">&#x27;F&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>, <span class=\"hljs-string\">&#x27;0&#x27;</span>, <span class=\"hljs-string\">&#x27;tienchin:channel:export&#x27;</span>, <span class=\"hljs-string\">&#x27;#&#x27;</span>, <span class=\"hljs-string\">&#x27;admin&#x27;</span>,<br>        <span class=\"hljs-string\">&#x27;2023-09-02 11:16:57&#x27;</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>, <span class=\"hljs-keyword\">NULL</span>, <span class=\"hljs-string\">&#x27;&#x27;</span>);<br></code></pre></td></tr></table></figure>\n<h1 id=\"添加渠道管理的账号\">添加渠道管理的账号<a title=\"#添加渠道管理的账号\" href=\"#添加渠道管理的账号\"></a></h1>\n<p>首先是添加一个角色，然后给这个角色添加权限，最后给这个角色添加一个账号，这样就可以了。</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202309/2105804-20230902112827084-1777795354.png\" alt=\"image-20230902112826596\" loading=\"lazy\" class=\"φbp\"></p>\n<p>在是添加一个账号，这个账号就是我们的渠道管理的账号，这个账号的角色就是我们刚刚添加的角色。</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202309/2105804-20230902112957386-407804647.png\" alt=\"image-20230902112957120\" loading=\"lazy\" class=\"φbp\"></p>\n<p>然后，我们在用刚刚创建的渠道管理员账号登录系统。</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202309/2105804-20230902113107981-2043798504.png\" alt=\"image-20230902113107708\" loading=\"lazy\" class=\"φbp\"></p>\n<h1 id=\"更改前端\">更改前端<a title=\"#更改前端\" href=\"#更改前端\"></a></h1>\n<p>全局替换权限字符：</p>\n<p><code>system:role</code> 替换为 <code>tienchin:channel</code>：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202309/2105804-20230902113312275-1226321700.png\" alt=\"image-20230902113311891\" loading=\"lazy\" class=\"φbp\"></p>\n<p>再将 <code>tienchin:channel:add</code> 替换为 <code>tienchin:channel:create</code>：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202309/2105804-20230902113408071-1982986853.png\" alt=\"image-20230902113407836\" loading=\"lazy\" class=\"φbp\"></p>\n<p>重启项目，在用渠道管理员账号登录你会发现只有分配的权限按钮，至于怎么隐藏菜单，我就不说了，后面再出文章。</p>\n<p>好了权限分配到此为止，下一章基于该账号进行渠道管理模块的后续功能开发，登录 admin 分配一下渠道管理的权限，全部分配一下利于测试与开发。</p>\n","prev":{"title":"TienChin 渠道管理-添加渠道","link":"2023/09/02/项目/TienChin 健身系统/2023-6-11/18-TienChin 渠道管理-添加渠道"},"next":{"title":"TienChin 渠道管理-字典原理分析","link":"2023/09/02/项目/TienChin 健身系统/2023-6-11/16-TienChin 渠道管理-字典原理分析"},"plink":"http://example.com/2023/09/02/项目/TienChin 健身系统/2023-6-11/17-TienChin 渠道管理-权限分配/","toc":[{"id":"添加权限","title":"添加权限","index":"1"},{"id":"添加渠道管理的账号","title":"添加渠道管理的账号","index":"2"},{"id":"更改前端","title":"更改前端","index":"3"}],"reading_time":"707 words in 5 min"}