{"title":"TienChin 活动管理-添加活动接口","date":"2023-09-06T15:37:50.000Z","date_formatted":{"ll":"Sep 6, 2023","L":"09/06/2023","MM-DD":"09-06"},"link":"2023/09/06/项目/TienChin 健身系统/2023-6-11/33-TienChin 活动管理-添加活动接口","tags":["项目"],"updated":"2023-09-21T17:08:41.444Z","content":"<h1 id=\"activitycontroller\">ActivityController<a title=\"#activitycontroller\" href=\"#activitycontroller\"></a></h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@PreAuthorize(&quot;hasPermission(&#x27;tienchin:activity:create&#x27;)&quot;)</span><br><span class=\"hljs-meta\">@Log(title = &quot;活动管理&quot;, businessType = BusinessType.INSERT)</span><br><span class=\"hljs-meta\">@PostMapping</span><br><span class=\"hljs-keyword\">public</span> AjaxResult <span class=\"hljs-title function_\">add</span><span class=\"hljs-params\">(<span class=\"hljs-meta\">@Validated</span> <span class=\"hljs-meta\">@RequestBody</span> ActivityVO activityVO)</span> &#123;<br>    <span class=\"hljs-keyword\">return</span> AjaxResult.success(iActivityService.addActivity(activityVO) &gt; <span class=\"hljs-number\">0</span> ? <span class=\"hljs-string\">&quot;添加成功&quot;</span> : <span class=\"hljs-string\">&quot;添加失败&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>\n<h1 id=\"iactivityservice\">IActivityService<a title=\"#iactivityservice\" href=\"#iactivityservice\"></a></h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 添加活动</span><br><span class=\"hljs-comment\"> *</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@param</span> activityVO 活动信息</span><br><span class=\"hljs-comment\"> * <span class=\"hljs-doctag\">@return</span> 结果</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">addActivity</span><span class=\"hljs-params\">(ActivityVO activityVO)</span>;<br></code></pre></td></tr></table></figure>\n<h1 id=\"activityserviceimpl\">ActivityServiceImpl<a title=\"#activityserviceimpl\" href=\"#activityserviceimpl\"></a></h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-meta\">@Override</span><br><span class=\"hljs-keyword\">public</span> <span class=\"hljs-type\">int</span> <span class=\"hljs-title function_\">addActivity</span><span class=\"hljs-params\">(ActivityVO activityVO)</span> &#123;<br>    <span class=\"hljs-type\">Activity</span> <span class=\"hljs-variable\">activity</span> <span class=\"hljs-operator\">=</span> <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">Activity</span>();<br><br>    BeanUtils.copyProperties(activityVO, activity);<br><br>    activity.setCreateTime(LocalDateTime.now());<br>    activity.setCreateBy(SecurityUtils.getUsername());<br><br>    <span class=\"hljs-keyword\">return</span> save(activity) ? <span class=\"hljs-number\">1</span> : <span class=\"hljs-number\">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>\n<h1 id=\"validationmessages.properties\">ValidationMessages.properties<a title=\"#validationmessages.properties\" href=\"#validationmessages.properties\"></a></h1>\n<figure class=\"highlight properties\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs properties\"><span class=\"hljs-comment\"># 活动管理</span><br><span class=\"hljs-attr\">activity.name.notBlank</span>=<span class=\"hljs-string\">活动名称不能为空</span><br><span class=\"hljs-attr\">activity.name.size</span>=<span class=\"hljs-string\">活动名称最大长度为20个字符</span><br><span class=\"hljs-attr\">activity.channelId.notnull</span>=<span class=\"hljs-string\">渠道ID不能为空</span><br><span class=\"hljs-attr\">activity.info.notBlank</span>=<span class=\"hljs-string\">活动简介不能为空</span><br><span class=\"hljs-attr\">activity.info.size</span>=<span class=\"hljs-string\">活动简介最多为255个字符</span><br><span class=\"hljs-attr\">activity.type.notnull</span>=<span class=\"hljs-string\">活动类型不能为空</span><br><span class=\"hljs-attr\">activity.status.max</span>=<span class=\"hljs-string\">活动状态最大值为1</span><br><span class=\"hljs-attr\">activity.status.min</span>=<span class=\"hljs-string\">活动状态最小值为0</span><br><span class=\"hljs-attr\">activity.discount.max</span>=<span class=\"hljs-string\">折扣最大值为1</span><br><span class=\"hljs-attr\">activity.discount.min</span>=<span class=\"hljs-string\">折扣最小值为0</span><br><span class=\"hljs-attr\">activity.voucher.min</span>=<span class=\"hljs-string\">代金券最小值为0</span><br><span class=\"hljs-attr\">activity.beginTime.notnull</span>=<span class=\"hljs-string\">活动开始时间不能为空</span><br><span class=\"hljs-attr\">activity.endTime.notnull</span>=<span class=\"hljs-string\">活动结束时间不能为空</span><br></code></pre></td></tr></table></figure>\n<h1 id=\"activityvo\">ActivityVO<a title=\"#activityvo\" href=\"#activityvo\"></a></h1>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动名称</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotBlank(message = &quot;&#123;activity.name.notBlank&#125;&quot;)</span><br><span class=\"hljs-meta\">@Size(max = 20, message = &quot;&#123;activity.name.size&#125;&quot;)</span><br><span class=\"hljs-keyword\">private</span> String activityName;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 渠道ID</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotNull(message = &quot;&#123;activity.channelId.notnull&#125;&quot;)</span><br><span class=\"hljs-keyword\">private</span> Integer channelId;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 渠道名称</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-keyword\">private</span> String channelName;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动简介</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotBlank(message = &quot;&#123;activity.info.notBlank&#125;&quot;)</span><br><span class=\"hljs-meta\">@Size(max = 255, message = &quot;&#123;activity.info.size&#125;&quot;)</span><br><span class=\"hljs-keyword\">private</span> String activityInfo;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动类型，1.折扣券、2.代金券</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotNull(message = &quot;&#123;activity.type.notnull&#125;&quot;)</span><br><span class=\"hljs-keyword\">private</span> Integer activityType;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动状态，0.表示禁用、1.表示正常</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@Max(value = 1, message = &quot;&#123;activity.status.max&#125;&quot;)</span><br><span class=\"hljs-meta\">@Min(value = 0, message = &quot;&#123;activity.status.min&#125;&quot;)</span><br><span class=\"hljs-keyword\">private</span> Integer activityStatus;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 折扣券</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@Max(value = 10, message = &quot;&#123;activity.discount.max&#125;&quot;)</span><br><span class=\"hljs-meta\">@Min(value = 0, message = &quot;&#123;activity.discount.min&#125;&quot;)</span><br><span class=\"hljs-keyword\">private</span> Double discount;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 代金券</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@Min(value = 0, message = &quot;&#123;activity.voucher.min&#125;&quot;)</span><br><span class=\"hljs-keyword\">private</span> Double voucher;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动开始时间</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotNull(message = &quot;&#123;activity.beginTime.notnull&#125;&quot;)</span><br><span class=\"hljs-meta\">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;, timezone = &quot;Asia/Shanghai&quot;)</span><br><span class=\"hljs-keyword\">private</span> LocalDateTime beginTime;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 活动结束时间</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@NotNull(message = &quot;&#123;activity.endTime.notnull&#125;&quot;)</span><br><span class=\"hljs-meta\">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;, timezone = &quot;Asia/Shanghai&quot;)</span><br><span class=\"hljs-keyword\">private</span> LocalDateTime endTime;<br></code></pre></td></tr></table></figure>\n<h1 id=\"baseentity\">BaseEntity<a title=\"#baseentity\" href=\"#baseentity\"></a></h1>\n<p>给基础实体类时间字段添加时区属性。</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs java\"><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 创建时间</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;, timezone = &quot;Asia/Shanghai&quot;)</span><br><span class=\"hljs-keyword\">private</span> Date createTime;<br><br><span class=\"hljs-comment\">/**</span><br><span class=\"hljs-comment\"> * 更新时间</span><br><span class=\"hljs-comment\"> */</span><br><span class=\"hljs-meta\">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;, timezone = &quot;Asia/Shanghai&quot;)</span><br><span class=\"hljs-keyword\">private</span> Date updateTime;<br></code></pre></td></tr></table></figure>","prev":{"title":"TienChin 活动管理-活动状态完善","link":"2023/09/06/项目/TienChin 健身系统/2023-6-11/32-TienChin 活动管理-活动状态完善"},"next":{"title":"TienChin 活动管理-活动列表展示","link":"2023/09/05/项目/TienChin 健身系统/2023-6-11/31-TienChin 活动管理-活动列表展示"},"plink":"http://example.com/2023/09/06/项目/TienChin 健身系统/2023-6-11/33-TienChin 活动管理-添加活动接口/","toc":[{"id":"activitycontroller","title":"ActivityController","index":"1"},{"id":"iactivityservice","title":"IActivityService","index":"2"},{"id":"activityserviceimpl","title":"ActivityServiceImpl","index":"3"},{"id":"validationmessages.properties","title":"ValidationMessages.properties","index":"4"},{"id":"activityvo","title":"ActivityVO","index":"5"},{"id":"baseentity","title":"BaseEntity","index":"6"}],"reading_time":"601 words in 4 min"}