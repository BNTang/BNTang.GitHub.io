{"title":"『云存储』删除文件","date":"2023-12-03T09:46:02.000Z","date_formatted":{"ll":"Dec 3, 2023","L":"12/03/2023","MM-DD":"12-03"},"link":"2023/12/03/Web/微信小程序/云开发/69-『云存储』删除文件","tags":["云开发","微信小程序"],"updated":"2024-03-04T02:19:39.736Z","content":"<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202312/2105804-20231203183636511-1188721312.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<h1 id=\"一、前言\">一、前言<a title=\"#一、前言\" href=\"#一、前言\"></a></h1>\n<blockquote>\n<ul>\n<li>本篇文章是『云存储』文章的第 3 篇，主要介绍『云存储』删除文件</li>\n</ul>\n</blockquote>\n<p>在前一篇文章中，详细介绍了从云存储中下载文件的步骤和须知。掌握了文件下载的方法后，现在让我们继续深入了解如何在云存储中执行删除文件的操作。</p>\n<p>我们不能一味地向云存储中添加数据而不进行清理。如果数据持续积累而不进行删除，云存储空间将迅速膨胀，由此产生的费用也会随之增加——毕竟这是一项收费服务。因此，定期清理那些不再需要的文件成为了降低成本，节约资源的必要措施。</p>\n<h1 id=\"二、删除文件代码实现\">二、删除文件代码实现<a title=\"#二、删除文件代码实现\" href=\"#二、删除文件代码实现\"></a></h1>\n<p>删除文件其实是一个非常简单的过程。由于我们的数据都存储在云端，因此无论我们如何编写代码，最终都需要先获取到云端的对象，通过 <code>wx.cloud</code> 即可获取到云端对象。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\">wx.<span class=\"hljs-property\">cloud</span><br></code></pre></td></tr></table></figure>\n<p>获取到云端对象后，常见的删除操作方法名可能会是 <code>delete</code> 或 <code>remove</code>。经过智能提示工具的指示，我了解到相关的方法称为 <code>deleteFile</code>。在使用这个方法时，您需要构造一个对象，并通过这个对象明确指出想要删除的文件。对象里有一个名为 <code>fileList</code> 的属性，它是一个数组，可供您列出单个或多个文件进行删除。接下来，您需要前往云存储控制台获取文件的 <code>fileID</code>，并将这些 <code>fileID</code> 加入到 <code>fileList</code> 数组中。完成这些步骤后，调用 <code>deleteFile</code> 方法即可实现文件的删除操作。</p>\n<p>为了确保能够准确执行删除操作，我们首先需要获取云存储中文件的唯一标识符，即 <code>fileID</code></p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202402/2105804-20240225213447591-1219741778.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>如此一来，我们就获得了需要删除的文件的 <code>fileID</code>。接下来，只需调用 <code>wx.cloud.deleteFile</code> 方法，并将获取的 <code>fileID</code> 填充进 <code>fileList</code> 参数中，执行该方法就可以实现文件的删除了。</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-keyword\">async</span> <span class=\"hljs-title function_\">onDelTap</span>(<span class=\"hljs-params\"></span>) &#123;<br>    <span class=\"hljs-keyword\">const</span> res = <span class=\"hljs-keyword\">await</span> wx.<span class=\"hljs-property\">cloud</span>.<span class=\"hljs-title function_\">deleteFile</span>(&#123;<br>        <span class=\"hljs-attr\">fileList</span>: [<span class=\"hljs-string\">&#x27;cloud://cloud1-5gnw7kej2c68cd30.636c-cloud1-5gnw7kej2c68cd30-1322890583/blob_20230708113926A001.png&#x27;</span>],<br>    &#125;);<br><br>    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(res);<br>&#125;<br></code></pre></td></tr></table></figure>\n<p>以上代码便是本次删除云存储中文件的最终实现。我们只需在 <code>fileList</code> 数组中填入相应的 <code>fileID</code> ，即可顺利删除特定文件。若需批量删除多个文件，只需将多个 <code>fileID</code> 添加进 <code>fileList</code> 数组即可完成操作。</p>\n<h1 id=\"三、运行测试\">三、运行测试<a title=\"#三、运行测试\" href=\"#三、运行测试\"></a></h1>\n<p>我们的代码已经编写完毕，现在可以进入测试阶段。请使用微信开发者工具来执行代码，通过底部导航栏进入 “云存储” 页面。在那里点击 “删除” 按钮进行操作：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202402/2105804-20240225214556385-834063011.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>观察控制台反馈的结果如下：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202402/2105804-20240225214624940-637570344.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>如果响应结果显示 “ok”，则表示删除文件操作已成功执行。这时，我们可以前往云存储控制台进行刷新，查看文件。您会发现，原先对应于 <code>cloud://cloud1-5gnw7kej2c68cd30.636c-cloud1-5gnw7kej2c68cd30-1322890583/dengdeng3.jpg</code> 的内容已经被成功删除。</p>\n<p>刷新之前：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202402/2105804-20240225214803477-1965942301.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>刷新之后：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202402/2105804-20240225214820983-1878713760.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>关于同时删除多个文件，操作也是相当简单。只需要将所有需要删除的文件的 <code>fileID</code> 都放入数组中即可。相信这个操作对大家来说都是易如反掌，无需赘述。</p>\n<p>至此，本文的介绍内容便全部结束。希望对您有所帮助。</p>\n<h1 id=\"四、总结\">四、总结<a title=\"#四、总结\" href=\"#四、总结\"></a></h1>\n<p>通过本文的学习，您将能够掌握以下核心知识点：</p>\n<ul>\n<li>1.删除云存储中的文件</li>\n<li>2.删除多个文件的方法</li>\n</ul>\n<blockquote>\n<p>最后，我要感谢您阅读本文。如果您觉得文章有用，请不吝点赞、收藏或者转发。您的支持是我不断创作与分享的最大动力。让我们携手在学习的旅途上相互促进，共同享受知识带来的快乐。</p>\n</blockquote>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202312/2105804-20231211215004818-977875224.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"『云存储』下载文件","link":"2023/12/03/Web/微信小程序/云开发/68-『云存储』下载文件"},"next":{"title":"『云函数』基本使用","link":"2023/12/03/Web/微信小程序/云开发/71-『云函数』基本使用"},"plink":"http://example.com/2023/12/03/Web/微信小程序/云开发/69-『云存储』删除文件/","toc":[{"id":"一、前言","title":"一、前言","index":"1"},{"id":"二、删除文件代码实现","title":"二、删除文件代码实现","index":"2"},{"id":"三、运行测试","title":"三、运行测试","index":"3"},{"id":"四、总结","title":"四、总结","index":"4"}]}