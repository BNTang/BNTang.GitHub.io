{"title":"微信小程序-组件生命周期方法","date":"2023-05-20T17:13:46.000Z","date_formatted":{"ll":"May 21, 2023","L":"05/21/2023","MM-DD":"05-21"},"link":"2023/05/21/Web/微信小程序/生命周期/组件生命周期/52-微信小程序-组件生命周期方法","tags":["微信小程序"],"updated":"2023-05-20T17:40:22.817Z","content":"<p>官方文档：<a href=\"https://developers.weixin.qq.com/miniprogram/dev/reference/api/Component.html\" target=\"_blank\">https://developers.weixin.qq.com/miniprogram/dev/reference/api/Component.html</a></p>\n<p>正如官方显示组件的生命周期中常用的如下：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202305/2105804-20230521011535777-1239140368.png\" alt=\"image-20230521011534936\" loading=\"lazy\" class=\"φbp\"></p>\n<p>!&gt; 组件的生命周期方法编写的位置与页面的生命周期是不一样的，组件生命周期声明是写在 <code>lifetimes</code> 当中</p>\n<p>官方文档：<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html\" target=\"_blank\">https://developers.weixin.qq.com/miniprogram/dev/framework/custom-component/lifetimes.html</a></p>\n<h1 id=\"示例\">示例<a title=\"#示例\" href=\"#示例\"></a></h1>\n<h2 id=\"监听组件生命周期\">监听组件生命周期<a title=\"#监听组件生命周期\" href=\"#监听组件生命周期\"></a></h2>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-comment\">// components/c-test/c-test.js</span><br><span class=\"hljs-title class_\">Component</span>(&#123;<br>  <span class=\"hljs-comment\">// 监听当前组件的生命周期</span><br>  <span class=\"hljs-attr\">lifetimes</span>: &#123;<br>    <span class=\"hljs-title function_\">created</span>(<span class=\"hljs-params\"></span>) &#123;<br>      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;created 组件被创建出来了&quot;</span>);<br>    &#125;,<br>    <span class=\"hljs-title function_\">ready</span>(<span class=\"hljs-params\"></span>) &#123;<br>      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;ready 组件被附加到页面的节点树上了&quot;</span>);<br>    &#125;,<br>    <span class=\"hljs-title function_\">attached</span>(<span class=\"hljs-params\"></span>) &#123;<br>      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;attached 组件被显示出来了&quot;</span>);<br>    &#125;,<br>    <span class=\"hljs-title function_\">detached</span>(<span class=\"hljs-params\"></span>) &#123;<br>      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;detached 组件从页面上被移除了&quot;</span>);<br>    &#125;,<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>\n<p>首页页面使用 c-test 组件：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs wxml\">&lt;!--index.wxml--&gt;<br>&lt;text&gt;首页&lt;/text&gt;<br>&lt;myTest wx:if=&quot;&#123;&#123;isShow&#125;&#125;&quot; /&gt;<br>&lt;button bindtap=&quot;toggleShow&quot;&gt;切换c-test组件显示状态&lt;/button&gt;<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-comment\">// index.js</span><br><span class=\"hljs-title class_\">Page</span>(&#123;<br>  <span class=\"hljs-attr\">data</span>: &#123;<br>    <span class=\"hljs-attr\">isShow</span>: <span class=\"hljs-literal\">true</span><br>  &#125;,<br>  <span class=\"hljs-title function_\">toggleShow</span>(<span class=\"hljs-params\"></span>) &#123;<br>    <span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-title function_\">setData</span>(&#123;<span class=\"hljs-attr\">isShow</span>: !<span class=\"hljs-variable language_\">this</span>.<span class=\"hljs-property\">isShow</span>&#125;)<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\"><span class=\"hljs-punctuation\">&#123;</span><br>  <span class=\"hljs-attr\">&quot;usingComponents&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">&#123;</span><br>    <span class=\"hljs-attr\">&quot;myTest&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;/components/c-test/c-test&quot;</span><br>  <span class=\"hljs-punctuation\">&#125;</span><br><span class=\"hljs-punctuation\">&#125;</span><br></code></pre></td></tr></table></figure>\n<h2 id=\"组件当中监听页面生命周期\">组件当中监听页面生命周期<a title=\"#组件当中监听页面生命周期\" href=\"#组件当中监听页面生命周期\"></a></h2>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-comment\">// components/c-test/c-test.js</span><br><span class=\"hljs-title class_\">Component</span>(&#123;<br>  <span class=\"hljs-comment\">// 监听当前组件的生命周期</span><br>  <span class=\"hljs-attr\">lifetimes</span>: &#123;<br>    <span class=\"hljs-title function_\">created</span>(<span class=\"hljs-params\"></span>) &#123;<br>      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;created 组件被创建出来了&quot;</span>);<br>    &#125;,<br>    <span class=\"hljs-title function_\">ready</span>(<span class=\"hljs-params\"></span>) &#123;<br>      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;ready 组件被附加到页面的节点树上了&quot;</span>);<br>    &#125;,<br>    <span class=\"hljs-title function_\">attached</span>(<span class=\"hljs-params\"></span>) &#123;<br>      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;attached 组件被显示出来了&quot;</span>);<br>    &#125;,<br>    <span class=\"hljs-title function_\">detached</span>(<span class=\"hljs-params\"></span>) &#123;<br>      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;detached 组件从页面上被移除了&quot;</span>);<br>    &#125;,<br>  &#125;,<br>  <span class=\"hljs-comment\">// 监听挂载到的页面对应的生命周期</span><br>  <span class=\"hljs-attr\">pageLifetimes</span>: &#123;<br>    <span class=\"hljs-title function_\">hide</span>(<span class=\"hljs-params\"></span>) &#123;<br>      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;页面被隐藏了&quot;</span>);<br>    &#125;,<br>    <span class=\"hljs-title function_\">show</span>(<span class=\"hljs-params\"></span>) &#123;<br>      <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;页面显示出来了&quot;</span>);<br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>","prev":{"title":"微信小程序-应用程序生命周期方法","link":"2023/05/21/Web/微信小程序/生命周期/应用程序生命周期/53-微信小程序-应用程序生命周期方法"},"next":{"title":"微信小程序-页面生命周期方法","link":"2023/05/20/Web/微信小程序/生命周期/页面生命周期/51-微信小程序-页面生命周期方法"},"plink":"http://example.com/2023/05/21/Web/微信小程序/生命周期/组件生命周期/52-微信小程序-组件生命周期方法/","toc":[{"id":"示例","title":"示例","index":"1","children":[{"id":"监听组件生命周期","title":"监听组件生命周期","index":"1.1"},{"id":"组件当中监听页面生命周期","title":"组件当中监听页面生命周期","index":"1.2"}]}],"reading_time":"427 words in 3 min"}