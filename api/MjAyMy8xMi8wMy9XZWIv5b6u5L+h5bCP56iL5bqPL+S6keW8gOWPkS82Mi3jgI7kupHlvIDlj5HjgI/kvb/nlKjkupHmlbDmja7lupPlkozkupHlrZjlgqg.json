{"title":"『云开发』使用云数据库和云存储","date":"2023-12-03T09:45:25.000Z","date_formatted":{"ll":"Dec 3, 2023","L":"12/03/2023","MM-DD":"12-03"},"link":"2023/12/03/Web/微信小程序/云开发/62-『云开发』使用云数据库和云存储","tags":["云开发","微信小程序"],"updated":"2024-01-19T03:14:11.089Z","content":"<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202312/2105804-20231203174723143-1729160431.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<h1 id=\"1.前言\">1.前言<a title=\"#1.前言\" href=\"#1.前言\"></a></h1>\n<p>经过上一篇文章的介绍，知道了什么是微信小程序的云开发，知道了微信小程序的云开发其实就是腾讯为我们搭建好的服务器，提供好了数据库，提供好了云存储，提供了云函数相关的功能，通过云函数可以对我们的数据进行加工处理等知识，那么这篇文章就来介绍一下云数据库和云存储的使用。</p>\n<h1 id=\"2.云数据库\">2.云数据库<a title=\"#2.云数据库\" href=\"#2.云数据库\"></a></h1>\n<p>首先创建一个全新的项目我这里不赘述了，因为之前已经介绍过了。</p>\n<p>创建项目完毕之后，找到，项目工具栏中的云开发，点击进入，找到数据库：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240109004756774-2042086418.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>微信给我们提供的云数据库，其实就是一个 MongoDB, 和 MongoDB 一样，可以通过创建集合然后在集合当中存储数据，这类似的东西。</p>\n<p>在以前我 MongoDB 的文章中有介绍，要想用 MongoDB 存储数据，首先需要创建一个集合，然后在集合当中存储数据，这个集合就相当于 MySQL 当中的表，有了表才可以网表中进行存储数据。</p>\n<h2 id=\"2.1.创建集合\">2.1.创建集合<a title=\"#2.1.创建集合\" href=\"#2.1.创建集合\"></a></h2>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240109005247933-1758796635.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"2.2.往集合添加数据\">2.2.往集合添加数据<a title=\"#2.2.往集合添加数据\" href=\"#2.2.往集合添加数据\"></a></h2>\n<p>添加数据可分为 <code>逐行添加</code>:</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240109005450710-852662421.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>逐行添加分为 <code>默认模式</code> 与 <code>JSON模式</code>, 首先来看看默认模式，点击加号，就会添加一个字段，你可以更改这个新增的字段的数据类型为你想要的，最后一个选项就是该字段本次要存储的内容了，再点击确定就添加成功了。</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240110002521328-402434008.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>添加成功结果如下图所示：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240110002700381-1243298233.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>再来看看 JSON 模式：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\"><span class=\"hljs-punctuation\">&#123;</span><br>  <span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;JonathanTang&quot;</span><span class=\"hljs-punctuation\">,</span><br>  <span class=\"hljs-attr\">&quot;age&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;18&quot;</span><span class=\"hljs-punctuation\">,</span><br>  <span class=\"hljs-attr\">&quot;email&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;123456@qq.com&quot;</span><br><span class=\"hljs-punctuation\">&#125;</span><br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240110003022093-32644412.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>添加结果如下图所示：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240110003114960-2059006043.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>如果你会 MongoDB 用这个云数据库跟切菜没太大区别。</p>\n<p>还可以用 <code>导入</code> 的方式添加：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240109005518659-1436889119.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>我这里就不卖关子，直接告诉大家用怎么样的方式去导入，我们一般正常的 JSON 文件内容应该是如下这样子的：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\"><span class=\"hljs-punctuation\">&#123;</span><span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;BNTang&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;age&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">19</span><span class=\"hljs-punctuation\">&#125;</span><span class=\"hljs-punctuation\">,</span><br><span class=\"hljs-punctuation\">&#123;</span><span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;BNTang1&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;age&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">20</span><span class=\"hljs-punctuation\">&#125;</span><span class=\"hljs-punctuation\">,</span><br><span class=\"hljs-punctuation\">&#123;</span><span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;BNTang2&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;age&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">21</span><span class=\"hljs-punctuation\">&#125;</span><br></code></pre></td></tr></table></figure>\n<p>但是在微信云数据库当中呢，这个 JSON 后面不能有 <code>,</code>，要想可以正确的导入我们对应的 JSON 数据，应该更改为如下这种 JSON 数据格式：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\"><span class=\"hljs-punctuation\">&#123;</span><span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;BNTang&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;age&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">19</span><span class=\"hljs-punctuation\">&#125;</span><br><span class=\"hljs-punctuation\">&#123;</span><span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;BNTang1&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;age&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">20</span><span class=\"hljs-punctuation\">&#125;</span><br><span class=\"hljs-punctuation\">&#123;</span><span class=\"hljs-attr\">&quot;name&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;BNTang2&quot;</span><span class=\"hljs-punctuation\">,</span> <span class=\"hljs-attr\">&quot;age&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">21</span><span class=\"hljs-punctuation\">&#125;</span><br></code></pre></td></tr></table></figure>\n<p>最后面不能带有 <code>,</code>，也就是一个对象占据一整行，我在桌面新建了一个 <code>a.txt</code> 将如上的内容粘贴了进去进行导入测试：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240110003956454-1576538178.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<h1 id=\"3.云存储\">3.云存储<a title=\"#3.云存储\" href=\"#3.云存储\"></a></h1>\n<p>云存储顾名思义就是存储我们的文件，我们可以将我们的文件上传到云存储当中，然后通过云存储的链接来访问我们的文件，这个功能跟我们的<code>阿里云/腾讯云</code> OSS 服务是一样的。</p>\n<h2 id=\"3.1.上传文件\">3.1.上传文件<a title=\"#3.1.上传文件\" href=\"#3.1.上传文件\"></a></h2>\n<p>选择一下自己要上传的媒体文件，点击上传文件即可完成上传：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240110004812410-1234311506.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>然后你可以在文件列表中看到你上传的文件你可以点击一下，就会在右侧弹出一个抽屉，在抽屉中展示了图片相关的信息，微信云存储提供了下载地址，这个时候自己可以复制一下这个下载地址进行访问一下我们来看看效果：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240110005010619-1241240854.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>在来上传一个其他类型的文件试试好吧，其它的我就不过多介绍了，后面会用代码来进行操作的，这里我上传了一个压缩包，也是可以的。</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240110005301648-1385837006.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n<p>好了，本篇文章的内容就介绍到这就结束了，我们下期再见，感谢大家的观看，谢谢大家。</p>\n<blockquote>\n<ul>\n<li>🐤如果您对本文有任何疑问或想法，请在评论区留言，我将很乐意与您交流。</li>\n<li>🐰您的每一条评论对我都至关重要，我会尽快给予回复。</li>\n<li>🎈如果您觉得这篇文章对您有所启发或帮助，请不吝赞赏、收藏或分享。</li>\n<li>🎁您的每一个动作都是对我创作的最大鼓励和支持。</li>\n<li>👍谢谢您的阅读和陪伴！</li>\n<li>😁如果您觉得本文对您有所帮助，可以关注我的公众号 <code>BNTang</code>，我会不定期分享一些干货文章。</li>\n<li>🍻感谢您的支持，我会继续努力的！</li>\n</ul>\n</blockquote>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202312/2105804-20231211215004818-977875224.png\" alt loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"『云函数』传参和调试","link":"2023/12/03/Web/微信小程序/云开发/72-『云函数』传参和调试"},"next":{"title":"『云开发』概述","link":"2023/12/03/Web/微信小程序/云开发/61-『云开发』概述"},"plink":"http://example.com/2023/12/03/Web/微信小程序/云开发/62-『云开发』使用云数据库和云存储/","toc":[{"id":"1.前言","title":"1.前言","index":"1"},{"id":"2.云数据库","title":"2.云数据库","index":"2","children":[{"id":"2.1.创建集合","title":"2.1.创建集合","index":"2.1"},{"id":"2.2.往集合添加数据","title":"2.2.往集合添加数据","index":"2.2"}]},{"id":"3.云存储","title":"3.云存储","index":"3","children":[{"id":"3.1.上传文件","title":"3.1.上传文件","index":"3.1"}]}]}