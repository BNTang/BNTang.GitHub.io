{"title":"微信小程序-image组件","date":"2023-04-23T12:55:55.000Z","date_formatted":{"ll":"Apr 23, 2023","L":"04/23/2023","MM-DD":"04-23"},"link":"2023/04/23/Web/微信小程序/component/常用组件/36-微信小程序-image组件","tags":["微信小程序"],"updated":"2023-04-23T16:36:10.948Z","content":"<p>官方文档地址：<a href=\"https://developers.weixin.qq.com/miniprogram/dev/component/image.html\" target=\"_blank\">https://developers.weixin.qq.com/miniprogram/dev/component/image.html</a></p>\n<h1 id=\"image-组件\">image 组件<a title=\"#image-组件\" href=\"#image-组件\"></a></h1>\n<p>图片组件。支持 JPG、PNG、SVG、WEBP、GIF 等格式，<a href=\"https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html\" target=\"_blank\">2.3.0</a> 起支持云文件ID。</p>\n<p>废话不多说直接上代码。</p>\n<h1 id=\"属性\">属性<a title=\"#属性\" href=\"#属性\"></a></h1>\n<p>我们先单独的使用下组件让我们的图片显示在页面当中先：</p>\n<p>index.wxml:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">image</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;../../assets/images/01.png&quot;</span>/&gt;</span><br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202304/2105804-20230424000303263-1709284845.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>可以看到图片显示了，但是呢，比例不对劲。这里就要介绍到 image 组件的注意点了。</p>\n<p>!&gt; 注意点：在微信小程序当中 image 组件是有默认宽高的 320 * 240</p>\n<h2 id=\"mode\">mode<a title=\"#mode\" href=\"#mode\"></a></h2>\n<p>在 image 中比较<code>常用</code>的模式有两个：</p>\n<ul>\n<li>widthFix：让图片的宽度和image的宽度一样，高度等比拉伸自适应。</li>\n<li>heightFix：让图片的高度和image的高度一样，宽度等比拉伸自适应</li>\n</ul>\n<p>?&gt; mode=“widthFix”</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">image</span> <span class=\"hljs-attr\">mode</span>=<span class=\"hljs-string\">&quot;widthFix&quot;</span> </span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;../../assets/images/01.png&quot;</span></span><br><span class=\"hljs-tag\">/&gt;</span><br></code></pre></td></tr></table></figure>\n<p>?&gt; mode=“heightFix”</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">image</span> <span class=\"hljs-attr\">mode</span>=<span class=\"hljs-string\">&quot;heightFix&quot;</span> </span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;../../assets/images/01.png&quot;</span></span><br><span class=\"hljs-tag\">/&gt;</span><br></code></pre></td></tr></table></figure>\n<p>假如我们这个时候需要开发一个banner的效果，我们就可以利用mode=&quot;widthFix&quot;来进行实现，我这里简单的来进行写一个示例供参考：</p>\n<p>index.wxml:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">image</span> <span class=\"hljs-attr\">mode</span>=<span class=\"hljs-string\">&quot;widthFix&quot;</span> </span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;../../assets/images/01.png&quot;</span></span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;banner&quot;</span></span><br><span class=\"hljs-tag\">/&gt;</span><br></code></pre></td></tr></table></figure>\n<p>index.wxss:</p>\n<figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs css\"><span class=\"hljs-selector-class\">.banner</span>&#123;<br>  <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100%</span>;<br>&#125;<br></code></pre></td></tr></table></figure>\n<p>最终效果：</p>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202304/2105804-20230424001939960-707665258.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<h2 id=\"bindload\">bindload<a title=\"#bindload\" href=\"#bindload\"></a></h2>\n<p>当图片载入完毕时触发，event.detail = {height, width}</p>\n<p>首先我们将如下的 WXML 代码在文件当中复制 10 个：</p>\n<p>index.wxml:</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">image</span> <span class=\"hljs-attr\">mode</span>=<span class=\"hljs-string\">&quot;widthFix&quot;</span> </span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;../../assets/images/01.png&quot;</span></span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;banner&quot;</span></span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">bindload</span>=<span class=\"hljs-string\">&quot;onImageLoad&quot;</span></span><br><span class=\"hljs-tag\">/&gt;</span><br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202304/2105804-20230424002413907-1530098503.png\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n<p>然后编写 JS 业务逻辑代码：</p>\n<p>index.js:</p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs javascript\"><span class=\"hljs-title class_\">Page</span>(&#123;<br>  <span class=\"hljs-title function_\">onImageLoad</span>(<span class=\"hljs-params\"></span>)&#123;<br>    <span class=\"hljs-variable language_\">console</span>.<span class=\"hljs-title function_\">log</span>(<span class=\"hljs-string\">&quot;图片加载完毕&quot;</span>);<br>  &#125;<br>&#125;)<br></code></pre></td></tr></table></figure>\n<p>运行这个程序，看控制台的打印：</p>\n<figure class=\"highlight text\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs text\">⑨图片加载完毕<br></code></pre></td></tr></table></figure>\n<p>如上的示例证明了一点，就是说我们有多少张图片，它就会加载多少次，这样就会存在一些问题，也就是我所要介绍的注意点。</p>\n<p>!&gt; 注意点：默认情况下只要界面被显示，那么界面上所有的图片都会被加载，无论这张图片是否在可视范围内，这样就会导致性能问题，如果界面上的图片比较多的话，我们可以使用lazy-load来优化性能。</p>\n<h2 id=\"lazy-load\">lazy-load<a title=\"#lazy-load\" href=\"#lazy-load\"></a></h2>\n<p>官方解释：图片懒加载，在即将进入一定范围（上下三屏）时才开始加载<br>\n本文解释：即将显示图片的时候才会去加载图片，而不是一上来就进行加载导致性能问题</p>\n<p>使用下 lazy-laod：</p>\n<p>改造下之前的案例将如下的代码在 index.wxml 拷贝 20 份：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">image</span> <span class=\"hljs-attr\">mode</span>=<span class=\"hljs-string\">&quot;widthFix&quot;</span> </span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;../../assets/images/01.png&quot;</span></span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;banner&quot;</span></span><br><span class=\"hljs-tag\">/&gt;</span><br></code></pre></td></tr></table></figure>\n<p>然后，在第 20 个 image 组件当中绑定 lazy-load：</p>\n<figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">image</span> <span class=\"hljs-attr\">mode</span>=<span class=\"hljs-string\">&quot;widthFix&quot;</span> </span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;../../assets/images/01.png&quot;</span></span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;banner&quot;</span></span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">bindload</span>=<span class=\"hljs-string\">&quot;onImageLoad&quot;</span></span><br><span class=\"hljs-tag\">       <span class=\"hljs-attr\">lazy-load</span></span><br><span class=\"hljs-tag\">/&gt;</span><br></code></pre></td></tr></table></figure>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202304/2105804-20230424003605132-979359846.gif\" alt=\"img\" loading=\"lazy\" class=\"φbp\"></p>\n","prev":{"title":"微信小程序-image组件-选择相册资源案例","link":"2023/04/24/Web/微信小程序/component/常用组件/案例/37-微信小程序-image组件-选择相册资源案例"},"next":{"title":"微信小程序-button组件","link":"2023/04/22/Web/微信小程序/component/常用组件/35-微信小程序-button组件"},"plink":"http://example.com/2023/04/23/Web/微信小程序/component/常用组件/36-微信小程序-image组件/","toc":[{"id":"image-组件","title":"image 组件","index":"1"},{"id":"属性","title":"属性","index":"2","children":[{"id":"mode","title":"mode","index":"2.1"},{"id":"bindload","title":"bindload","index":"2.2"},{"id":"lazy-load","title":"lazy-load","index":"2.3"}]}],"reading_time":"730 words in 5 min"}