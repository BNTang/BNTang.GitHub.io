{"title":"ã€Flutterã€å¸¸ç”¨ç»„ä»¶ è¡¨å•","date":"2024-01-04T16:14:28.000Z","date_formatted":{"ll":"Jan 5, 2024","L":"01/05/2024","MM-DD":"01-05"},"link":"2024/01/05/Flutter/22-ã€ŒFlutterã€å¸¸ç”¨ç»„ä»¶ è¡¨å•","tags":["Flutter"],"updated":"2024-01-09T05:51:10.858Z","content":"<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240101130244534-303737892.png\" alt loading=\"lazy\" class=\"Ï†bp\"></p>\n<h1 id=\"1.å‰è¨€\">1.å‰è¨€<a title=\"#1.å‰è¨€\" href=\"#1.å‰è¨€\"></a></h1>\n<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œä»‹ç»å®Œæ¯•äº†å¸¸ç”¨ç»„ä»¶ä¸­çš„ TextField ç»„ä»¶ï¼Œæœ¬ç¯‡æ–‡ç« å°†ç»§ç»­ä»‹ç»å¸¸ç”¨ç»„ä»¶ä¸­çš„è¡¨å•ç»„ä»¶ã€‚</p>\n<h1 id=\"2.è¡¨å•\">2.è¡¨å•<a title=\"#2.è¡¨å•\" href=\"#2.è¡¨å•\"></a></h1>\n<h2 id=\"2.1.ä»‹ç»\">2.1.ä»‹ç»<a title=\"#2.1.ä»‹ç»\" href=\"#2.1.ä»‹ç»\"></a></h2>\n<p>åœ¨Flutterä¸­ï¼Œè¡¨å•ï¼ˆFormï¼‰æ˜¯ä¸€ä¸ªç”¨äºæ•°æ®æ”¶é›†å’ŒéªŒè¯çš„å®¹å™¨ç»„ä»¶ã€‚å®ƒé€šå¸¸ä¸ <code>TextField</code> å’Œ <code>FormField</code> ç­‰è¾“å…¥ç»„ä»¶ç»“åˆä½¿ç”¨ï¼Œä»¥åˆ›å»ºä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·è¾“å…¥è¡¨å•ã€‚è¡¨å•ç»„ä»¶çš„ä¸»è¦ä½œç”¨æ˜¯å¯¹è¾“å…¥æ•°æ®è¿›è¡ŒéªŒè¯å’Œç®¡ç†ã€‚</p>\n<h2 id=\"2.2.å¸¸ç”¨å±æ€§\">2.2.å¸¸ç”¨å±æ€§<a title=\"#2.2.å¸¸ç”¨å±æ€§\" href=\"#2.2.å¸¸ç”¨å±æ€§\"></a></h2>\n<ol>\n<li><code>key</code>ï¼š<code>GlobalKey&lt;FormState&gt;</code> ç±»å‹ï¼Œç”¨äºæ§åˆ¶å’Œè®¿é—®è¡¨å•çš„çŠ¶æ€ï¼Œå¦‚éªŒè¯è¡¨å•å’Œä¿å­˜è¡¨å•æ•°æ®ã€‚</li>\n<li><code>autovalidateMode</code>ï¼šæ§åˆ¶è¡¨å•å­—æ®µçš„è‡ªåŠ¨éªŒè¯æ¨¡å¼ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥è®¾ç½®ä¸º <code>AutovalidateMode.always</code> è®©è¡¨å•å­—æ®µæ€»æ˜¯è‡ªåŠ¨éªŒè¯ã€‚</li>\n<li><code>onWillPop</code>ï¼šå½“ç”¨æˆ·å°è¯•ç¦»å¼€è¡¨å•é¡µæ—¶è§¦å‘çš„å›è°ƒï¼Œå¯ä»¥ç”¨äºæç¤ºä¿å­˜æ›´æ”¹ã€‚</li>\n<li><code>onChanged</code>ï¼šå½“è¡¨å•å†…ä»»æ„ä¸€ä¸ªè¡¨å•å­—æ®µçš„å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°ã€‚</li>\n</ol>\n<h2 id=\"2.3.ç¤ºä¾‹ä»£ç \">2.3.ç¤ºä¾‹ä»£ç <a title=\"#2.3.ç¤ºä¾‹ä»£ç \" href=\"#2.3.ç¤ºä¾‹ä»£ç \"></a></h2>\n<figure class=\"highlight dart\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs dart\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">&#x27;package:flutter/material.dart&#x27;</span>;<br><br><span class=\"hljs-keyword\">void</span> main() =&gt; runApp(MyApp());<br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyApp</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatelessWidget</span> </span>&#123;<br>  <span class=\"hljs-meta\">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class=\"hljs-keyword\">return</span> MaterialApp(<br>      home: Scaffold(<br>        appBar: AppBar(<br>          title: Text(<span class=\"hljs-string\">&#x27;Form Example&#x27;</span>),<br>        ),<br>        body: MyCustomForm(),<br>      ),<br>    );<br>  &#125;<br>&#125;<br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">MyCustomForm</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">StatefulWidget</span> </span>&#123;<br>  <span class=\"hljs-meta\">@override</span><br>  _MyCustomFormState createState() =&gt; _MyCustomFormState();<br>&#125;<br><br><span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">_MyCustomFormState</span> <span class=\"hljs-keyword\">extends</span> <span class=\"hljs-title\">State</span>&lt;<span class=\"hljs-title\">MyCustomForm</span>&gt; </span>&#123;<br>  <span class=\"hljs-keyword\">final</span> _formKey = GlobalKey&lt;FormState&gt;();<br><br>  <span class=\"hljs-meta\">@override</span><br>  Widget build(BuildContext context) &#123;<br>    <span class=\"hljs-keyword\">return</span> Form(<br>      key: _formKey,<br>      child: Column(<br>        crossAxisAlignment: CrossAxisAlignment.start,<br>        children: &lt;Widget&gt;[<br>          TextFormField(<br>            decoration: InputDecoration(<br>              hintText: <span class=\"hljs-string\">&#x27;Enter your email&#x27;</span>,<br>            ),<br>            validator: (value) &#123;<br>              <span class=\"hljs-keyword\">if</span> (value == <span class=\"hljs-keyword\">null</span> || value.isEmpty) &#123;<br>                <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;Please enter some text&#x27;</span>;<br>              &#125;<br>              <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">null</span>;<br>            &#125;,<br>          ),<br>          Padding(<br>            padding: <span class=\"hljs-keyword\">const</span> EdgeInsets.symmetric(vertical: <span class=\"hljs-number\">16.0</span>),<br>            child: ElevatedButton(<br>              onPressed: () &#123;<br>                <span class=\"hljs-keyword\">if</span> (_formKey.currentState!.validate()) &#123;<br>                  ScaffoldMessenger.of(context)<br>                      .showSnackBar(SnackBar(content: Text(<span class=\"hljs-string\">&#x27;Processing Data&#x27;</span>)));<br>                &#125;<br>              &#125;,<br>              child: Text(<span class=\"hljs-string\">&#x27;Submit&#x27;</span>),<br>            ),<br>          ),<br>        ],<br>      ),<br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>\n<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ªå¸¦æœ‰ <code>GlobalKey</code> çš„è¡¨å•ï¼Œå®ƒåŒ…å«ä¸€ä¸ª <code>TextFormField</code> ç”¨äºè¾“å…¥å’ŒéªŒè¯é‚®ç®±åœ°å€ï¼Œå¹¶æœ‰ä¸€ä¸ªæäº¤æŒ‰é’®ï¼Œå½“è¡¨å•éªŒè¯é€šè¿‡æ—¶ä¼šæ˜¾ç¤ºä¸€ä¸ªæç¤ºã€‚</p>\n<h2 id=\"2.4.è¿è¡Œæ•ˆæœ\">2.4.è¿è¡Œæ•ˆæœ<a title=\"#2.4.è¿è¡Œæ•ˆæœ\" href=\"#2.4.è¿è¡Œæ•ˆæœ\"></a></h2>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202401/2105804-20240106014650380-201916023.gif\" alt loading=\"lazy\" class=\"Ï†bp\"></p>\n<h1 id=\"3._formkey\">3._formKey<a title=\"#3._formkey\" href=\"#3._formkey\"></a></h1>\n<h2 id=\"3.1.ä»‹ç»\">3.1.ä»‹ç»<a title=\"#3.1.ä»‹ç»\" href=\"#3.1.ä»‹ç»\"></a></h2>\n<p><code>_formKey</code> åœ¨ Flutter ä¸­é€šå¸¸æ˜¯ä½œä¸ºä¸€ä¸ª <code>GlobalKey&lt;FormState&gt;</code> å®ä¾‹æ¥ä½¿ç”¨ï¼Œä¸»è¦ç”¨äºç®¡ç† <code>Form</code> ç»„ä»¶ã€‚å®ƒæä¾›äº†å¯¹è¡¨å•çš„æ§åˆ¶ï¼Œä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨è¡¨å•å¤–éƒ¨æ‰§è¡Œä¸€äº›æ“ä½œï¼Œå¦‚éªŒè¯è¡¨å•ã€ä¿å­˜è¡¨å•æ•°æ®ã€é‡ç½®è¡¨å•ç­‰ã€‚</p>\n<h2 id=\"3.2._formkey-çš„ä¸»è¦ç”¨æ³•\">3.2._formKey çš„ä¸»è¦ç”¨æ³•<a title=\"#3.2._formkey-çš„ä¸»è¦ç”¨æ³•\" href=\"#3.2._formkey-çš„ä¸»è¦ç”¨æ³•\"></a></h2>\n<ol>\n<li>**éªŒè¯è¡¨å•ï¼ˆValidating the Formï¼‰ï¼š**é€šè¿‡ <code>_formKey.currentState.validate()</code> å¯ä»¥è§¦å‘è¡¨å•ä¸­æ¯ä¸ª <code>FormField</code> çš„éªŒè¯é€»è¾‘ã€‚</li>\n<li>**ä¿å­˜è¡¨å•æ•°æ®ï¼ˆSaving Form Dataï¼‰ï¼š**é€šè¿‡ <code>_formKey.currentState.save()</code> å¯ä»¥è°ƒç”¨è¡¨å•ä¸­æ¯ä¸ª <code>FormField</code> çš„ <code>onSaved</code> æ–¹æ³•ã€‚</li>\n<li><strong>é‡ç½®è¡¨å•ï¼ˆResetting the Formï¼‰</strong>ï¼šä½¿ç”¨ <code>_formKey.currentState.reset()</code> å¯ä»¥é‡ç½®è¡¨å•åˆ°åˆå§‹çŠ¶æ€ï¼Œæ¸…é™¤æ‰€æœ‰ <code>FormField</code> çš„å†…å®¹ã€‚</li>\n</ol>\n<h1 id=\"4.å‚è€ƒèµ„æ–™\">4.å‚è€ƒèµ„æ–™<a title=\"#4.å‚è€ƒèµ„æ–™\" href=\"#4.å‚è€ƒèµ„æ–™\"></a></h1>\n<ul>\n<li><a href=\"https://api.flutter.dev/flutter/widgets/Form-class.html\" target=\"_blank\">https://api.flutter.dev/flutter/widgets/Form-class.html</a></li>\n</ul>\n<h1 id=\"end\">End<a title=\"#end\" href=\"#end\"></a></h1>\n<ul>\n<li>ğŸ¤å¦‚æœæ‚¨å¯¹æœ¬æ–‡æœ‰ä»»ä½•ç–‘é—®æˆ–æƒ³æ³•ï¼Œè¯·åœ¨è¯„è®ºåŒºç•™è¨€ï¼Œæˆ‘å°†å¾ˆä¹æ„ä¸æ‚¨äº¤æµã€‚</li>\n<li>ğŸ°æ‚¨çš„æ¯ä¸€æ¡è¯„è®ºå¯¹æˆ‘éƒ½è‡³å…³é‡è¦ï¼Œæˆ‘ä¼šå°½å¿«ç»™äºˆå›å¤ã€‚</li>\n<li>ğŸˆå¦‚æœæ‚¨è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹æ‚¨æœ‰æ‰€å¯å‘æˆ–å¸®åŠ©ï¼Œè¯·ä¸åèµèµã€æ”¶è—æˆ–åˆ†äº«ã€‚</li>\n<li>ğŸæ‚¨çš„æ¯ä¸€ä¸ªåŠ¨ä½œéƒ½æ˜¯å¯¹æˆ‘åˆ›ä½œçš„æœ€å¤§é¼“åŠ±å’Œæ”¯æŒã€‚</li>\n<li>ğŸ‘è°¢è°¢æ‚¨çš„é˜…è¯»å’Œé™ªä¼´ï¼</li>\n</ul>\n<p><img src=\"https://img2023.cnblogs.com/blog/2105804/202312/2105804-20231211215004818-977875224.png\" alt loading=\"lazy\" class=\"Ï†bp\"></p>\n","prev":{"title":"ã€Flutterã€å‘½åè·¯ç”±","link":"2024/01/06/Flutter/24-ã€Flutterã€å‘½åè·¯ç”±"},"next":{"title":"ã€Flutterã€å¸¸ç”¨ç»„ä»¶ TextField","link":"2024/01/04/Flutter/21-ã€ŒFlutterã€å¸¸ç”¨ç»„ä»¶ TextField"},"plink":"http://example.com/2024/01/05/Flutter/22-ã€ŒFlutterã€å¸¸ç”¨ç»„ä»¶ è¡¨å•/","toc":[{"id":"1.å‰è¨€","title":"1.å‰è¨€","index":"1"},{"id":"2.è¡¨å•","title":"2.è¡¨å•","index":"2","children":[{"id":"2.1.ä»‹ç»","title":"2.1.ä»‹ç»","index":"2.1"},{"id":"2.2.å¸¸ç”¨å±æ€§","title":"2.2.å¸¸ç”¨å±æ€§","index":"2.2"},{"id":"2.3.ç¤ºä¾‹ä»£ç ","title":"2.3.ç¤ºä¾‹ä»£ç ","index":"2.3"},{"id":"2.4.è¿è¡Œæ•ˆæœ","title":"2.4.è¿è¡Œæ•ˆæœ","index":"2.4"}]},{"id":"3._formkey","title":"3._formKey","index":"3","children":[{"id":"3.1.ä»‹ç»","title":"3.1.ä»‹ç»","index":"3.1"},{"id":"3.2._formkey-çš„ä¸»è¦ç”¨æ³•","title":"3.2._formKey çš„ä¸»è¦ç”¨æ³•","index":"3.2"}]},{"id":"4.å‚è€ƒèµ„æ–™","title":"4.å‚è€ƒèµ„æ–™","index":"4"},{"id":"end","title":"End","index":"5"}]}