{"title":"MongoDB-删除索引","date":"2022-08-28T13:36:48.000Z","date_formatted":{"ll":"Aug 28, 2022","L":"08/28/2022","MM-DD":"08-28"},"link":"2022/08/28/MongoDB/索引/08-MongoDB-删除索引","tags":["MongoDB"],"updated":"2022-08-28T13:42:16.318Z","content":"<h1 id=\"删除索引\">删除索引<a title=\"#删除索引\" href=\"#删除索引\"></a></h1>\n<p>书写格式：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">db.&lt;collection&gt;.dropIndex(&lt;IndexName | IndexDefine&gt;)<br></code></pre></td></tr></table></figure>\n<p>插入测试数据：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">db.person.insert(<span class=\"hljs-punctuation\">[</span><br><span class=\"hljs-punctuation\">&#123;</span>name<span class=\"hljs-punctuation\">:</span>&#x27;cs&#x27;<span class=\"hljs-punctuation\">,</span> age<span class=\"hljs-punctuation\">:</span><span class=\"hljs-number\">19</span><span class=\"hljs-punctuation\">&#125;</span><span class=\"hljs-punctuation\">,</span><br><span class=\"hljs-punctuation\">&#123;</span>name<span class=\"hljs-punctuation\">:</span>&#x27;as&#x27;<span class=\"hljs-punctuation\">,</span> age<span class=\"hljs-punctuation\">:</span><span class=\"hljs-number\">18</span><span class=\"hljs-punctuation\">&#125;</span><span class=\"hljs-punctuation\">,</span><br><span class=\"hljs-punctuation\">&#123;</span>name<span class=\"hljs-punctuation\">:</span>&#x27;bs&#x27;<span class=\"hljs-punctuation\">,</span> age<span class=\"hljs-punctuation\">:</span><span class=\"hljs-number\">17</span><span class=\"hljs-punctuation\">&#125;</span><br><span class=\"hljs-punctuation\">]</span>)<br></code></pre></td></tr></table></figure>\n<p>创建索引：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">db.person.createIndex(<span class=\"hljs-punctuation\">&#123;</span>name<span class=\"hljs-punctuation\">:</span> <span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">&#125;</span>)<br></code></pre></td></tr></table></figure>\n<h1 id=\"通过索引的名称来删除\">通过索引的名称来删除<a title=\"#通过索引的名称来删除\" href=\"#通过索引的名称来删除\"></a></h1>\n<p>查看索引的名称, 通过 <code>getIndexes()</code> 获得：</p>\n<p><img src=\"/2022/08/28/MongoDB/%E7%B4%A2%E5%BC%95/08-MongoDB-%E5%88%A0%E9%99%A4%E7%B4%A2%E5%BC%95/img.png\" alt=\"img.png\" loading=\"lazy\" class=\"φbp\"></p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">db.person.dropIndex(&#x27;name_1&#x27;)<br></code></pre></td></tr></table></figure>\n<h1 id=\"通过索引的定义来删除\">通过索引的定义来删除<a title=\"#通过索引的定义来删除\" href=\"#通过索引的定义来删除\"></a></h1>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">db.person.dropIndex(<span class=\"hljs-punctuation\">&#123;</span>name<span class=\"hljs-punctuation\">:</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">&#125;</span>)<br></code></pre></td></tr></table></figure>\n<p>!&gt; 如果是复合索引, 如果需要通过索引的定义来删除, 那么就必须一模一样才能正确的删除</p>\n<p>创建复合索引：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">db.person.createIndex(<span class=\"hljs-punctuation\">&#123;</span>name<span class=\"hljs-punctuation\">:</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span> age<span class=\"hljs-punctuation\">:</span><span class=\"hljs-number\">-1</span><span class=\"hljs-punctuation\">&#125;</span>)<br></code></pre></td></tr></table></figure>\n<p>错误删除格式：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">db.person.dropIndex(<span class=\"hljs-punctuation\">&#123;</span>name<span class=\"hljs-punctuation\">:</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">&#125;</span>)<br>db.person.dropIndex(<span class=\"hljs-punctuation\">&#123;</span>age<span class=\"hljs-punctuation\">:</span><span class=\"hljs-number\">-1</span><span class=\"hljs-punctuation\">&#125;</span>)<br>db.person.dropIndex(<span class=\"hljs-punctuation\">&#123;</span>age<span class=\"hljs-punctuation\">:</span><span class=\"hljs-number\">-1</span><span class=\"hljs-punctuation\">,</span> name<span class=\"hljs-punctuation\">:</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">&#125;</span>)<br></code></pre></td></tr></table></figure>\n<p>正确删除格式：</p>\n<figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><code class=\"hljs json\">db.person.dropIndex(<span class=\"hljs-punctuation\">&#123;</span>name<span class=\"hljs-punctuation\">:</span><span class=\"hljs-number\">1</span><span class=\"hljs-punctuation\">,</span> age<span class=\"hljs-punctuation\">:</span><span class=\"hljs-number\">-1</span><span class=\"hljs-punctuation\">&#125;</span>)<br></code></pre></td></tr></table></figure>\n<p>必须和定义一模一样才可以进行删除。</p>\n<p>!&gt; 在 MongoDB 中没有修改索引的方法, 所以如果想修改索引就必须先删除再重新创建</p>\n<p>!&gt; 如果删除的索引是多个字段, 如果是通过索引定义来删除, 那么传入的参数必须和定义一模一样才可以</p>\n","prev":{"title":"MongoDB-一对一关系","link":"2022/09/04/MongoDB/索引/MongoDB4.x-数据模型/02-MongoDB-一对一关系"},"next":{"title":"MongoDB-索引生存时间","link":"2022/08/28/MongoDB/索引/07-MongoDB-索引生存时间"},"plink":"http://example.com/2022/08/28/MongoDB/索引/08-MongoDB-删除索引/","toc":[{"id":"删除索引","title":"删除索引","index":"1"},{"id":"通过索引的名称来删除","title":"通过索引的名称来删除","index":"2"},{"id":"通过索引的定义来删除","title":"通过索引的定义来删除","index":"3"}],"reading_time":"303 words in 2 min"}